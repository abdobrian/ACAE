<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "ClientApp\\node_modules\\cache-loader\\README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#cache-loader">Cache Loader</a>
      </div>

      <div class="heading h2">
        <a href="#install">Install</a>
      </div>

      <div class="heading h2">
        <a href="#usage">Usage</a>
      </div>

      <div class="heading h2">
        <a href="#options">Options</a>
      </div>

      <div class="heading h2">
        <a href="#examples">Examples</a>
      </div>

      <div class="heading h3">
        <a href="#database-integration">Database Integration</a>
      </div>

      <div class="heading h2">
        <a href="#maintainers">Maintainers</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><p><a href="https://npmjs.com/package/cache-loader"><img src="https://img.shields.io/npm/v/cache-loader.svg" alt="npm"></a>
<a href="https://nodejs.org"><img src="https://img.shields.io/node/v/cache-loader.svg" alt="node"></a>
<a href="https://david-dm.org/webpack-contrib/cache-loader"><img src="https://david-dm.org/webpack-contrib/cache-loader.svg" alt="deps"></a>
<a href="https://travis-ci.org/webpack-contrib/cache-loader"><img src="http://img.shields.io/travis/webpack-contrib/cache-loader.svg" alt="test"></a>
<a href="https://codecov.io/gh/webpack-contrib/cache-loader"><img src="https://codecov.io/gh/webpack-contrib/cache-loader/branch/master/graph/badge.svg" alt="coverage"></a>
<a href="https://gitter.im/webpack/webpack"><img src="https://img.shields.io/badge/gitter-webpack%2Fwebpack-brightgreen.svg" alt="chat"></a></p>
<div align="center">
  <a href="https://webpack.js.org/">
    <img width="200" height="200" src="https://cdn.rawgit.com/webpack/media/e7485eb2/logo/icon-square-big.svg">
  </a>
  <div class="pilwrap" id="cache-loader">
  <h1>
    <a href="#cache-loader" name="cache-loader" class="pilcrow"></a>
Cache Loader
  </h1>
</div>
  <p>Caches the result of following loaders on disk (default) or in the database</p>
</div>
<p><div class="pilwrap" id="install">
  <h2 align="center">
    <a href="#install" name="install" class="pilcrow"></a>
Install
  </h2>
</div></p>
<pre><code class="bash">npm install --save-dev cache-loader
</code></pre>
<p><div class="pilwrap" id="usage">
  <h2 align="center">
    <a href="#usage" name="usage" class="pilcrow"></a>
Usage
  </h2>
</div></p>
<p>Add this loader in front of other (expensive) loaders to cache the result on disk.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.ext$/</span>,
        <span class="hljs-attr">use</span>: [
          <span class="hljs-string">'cache-loader'</span>,
          ...loaders
        ],
        <span class="hljs-attr">include</span>: path.resolve(<span class="hljs-string">'src'</span>)
      }
    ]
  }
}
</code></pre>
<blockquote>
<p>⚠️ Note that there is an overhead for saving the reading and saving the cache file, so only use this loader to cache expensive loaders.</p>
</blockquote>
<p><div class="pilwrap" id="options">
  <h2 align="center">
    <a href="#options" name="options" class="pilcrow"></a>
Options
  </h2>
</div></p>
<table>
<thead>
<tr>
<th style="text-align:center">Name</th>
<th style="text-align:center">Type</th>
<th style="text-align:center">Default</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><strong><code>cacheKey</code></strong></td>
<td style="text-align:center"><code>{Function(options, request) -&gt; {String}}</code></td>
<td style="text-align:center"><code>undefined</code></td>
<td style="text-align:left">Allows you to override default cache key generator</td>
</tr>
<tr>
<td style="text-align:center"><strong><code>cacheDirectory</code></strong></td>
<td style="text-align:center"><code>{String}</code></td>
<td style="text-align:center"><code>path.resolve('.cache-loader')</code></td>
<td style="text-align:left">Provide a cache directory where cache items should be stored (used for default read/write implementation)</td>
</tr>
<tr>
<td style="text-align:center"><strong><code>cacheIdentifier</code></strong></td>
<td style="text-align:center"><code>{String}</code></td>
<td style="text-align:center"><code>cache-loader:{version} {process.env.NODE_ENV}</code></td>
<td style="text-align:left">Provide an invalidation identifier which is used to generate the hashes. You can use it for extra dependencies of loaders (used for default read/write implementation)</td>
</tr>
<tr>
<td style="text-align:center"><strong><code>write</code></strong></td>
<td style="text-align:center"><code>{Function(cacheKey, data, callback) -&gt; {void}}</code></td>
<td style="text-align:center"><code>undefined</code></td>
<td style="text-align:left">Allows you to override default write cache data to file (e.g. Redis, memcached)</td>
</tr>
<tr>
<td style="text-align:center"><strong><code>read</code></strong></td>
<td style="text-align:center"><code>{Function(cacheKey, callback) -&gt; {void}}</code></td>
<td style="text-align:center"><code>undefined</code></td>
<td style="text-align:left">Allows you to override default read cache data from file</td>
</tr>
</tbody>
</table>
<p><div class="pilwrap" id="examples">
  <h2 align="center">
    <a href="#examples" name="examples" class="pilcrow"></a>
Examples
  </h2>
</div></p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">use</span>: [
          <span class="hljs-string">'cache-loader'</span>,
          <span class="hljs-string">'babel-loader'</span>
        ],
        <span class="hljs-attr">include</span>: path.resolve(<span class="hljs-string">'src'</span>)
      }
    ]
  }
}
</code></pre>
<div class="pilwrap" id="database-integration">
  <h3>
    <a href="#database-integration" name="database-integration" class="pilcrow"></a>
<code>Database Integration</code>
  </h3>
</div>
<p><strong>webpack.config.js</strong></p>
<pre><code class="js"><span class="hljs-comment">// Or different database client - memcached, mongodb, ...</span>
<span class="hljs-keyword">const</span> redis = <span class="hljs-built_in">require</span>(<span class="hljs-string">'redis'</span>);
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>);

<span class="hljs-comment">// ...</span>
<span class="hljs-comment">// connect to client</span>
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> BUILD_CACHE_TIMEOUT = <span class="hljs-number">24</span> * <span class="hljs-number">3600</span>; <span class="hljs-comment">// 1 day</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">digest</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> crypto.createHash(<span class="hljs-string">'md5'</span>).update(str).digest(<span class="hljs-string">'hex'</span>);
}

<span class="hljs-comment">// Generate own cache key</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cacheKey</span>(<span class="hljs-params">options, request</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-string">`build:cache:<span class="hljs-subst">${digest(request)}</span>`</span>;
}


<span class="hljs-comment">// Read data from database and parse them</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">read</span>(<span class="hljs-params">key, callback</span>) </span>{
  client.get(key, (err, result) =&gt; {
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">return</span> callback(err);
    }

    <span class="hljs-keyword">if</span> (!result) {
      <span class="hljs-keyword">return</span> callback(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Key <span class="hljs-subst">${key}</span> not found`</span>));
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">let</span> data = <span class="hljs-built_in">JSON</span>.parse(result);
      callback(<span class="hljs-literal">null</span>, data);
    } <span class="hljs-keyword">catch</span> (e) {
      callback(e);
    }
  });
}


<span class="hljs-comment">// Write data to database under cacheKey</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">write</span>(<span class="hljs-params">key, data, callback</span>) </span>{
  client.set(key, <span class="hljs-built_in">JSON</span>.stringify(data), <span class="hljs-string">'EX'</span>, BUILD_CACHE_TIMEOUT, callback);
}

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        <span class="hljs-attr">use</span>: [
          {
            <span class="hljs-attr">loader</span>: <span class="hljs-string">'cache-loader'</span>,
            <span class="hljs-attr">options</span>: {
              cacheKey,
              read,
              write,
            }
          },
          <span class="hljs-string">'babel-loader'</span>
        ],
        <span class="hljs-attr">include</span>: path.resolve(<span class="hljs-string">'src'</span>)
      }
    ]
  }
}
</code></pre>
<p><div class="pilwrap" id="maintainers">
  <h2 align="center">
    <a href="#maintainers" name="maintainers" class="pilcrow"></a>
Maintainers
  </h2>
</div></p>
<table>
  <tbody>
    <tr>
      <td align="center">
        <a href="https://github.com/sokra">
          <img width="150" height="150" src="https://github.com/sokra.png?size=150">
          </br>
          Tobias Koppers
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/bebraw">
          <img width="150" height="150" src="https://github.com/bebraw.png?v=3&s=150">
          </br>
          Juho Vepsäläinen
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/d3viant0ne">
          <img width="150" height="150" src="https://github.com/d3viant0ne.png?v=3&s=150">
          </br>
          Joshua Wiens
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/michael-ciniawsky">
          <img width="150" height="150" src="https://github.com/michael-ciniawsky.png?v=3&s=150">
          </br>
          Michael Ciniawsky
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/evilebottnawi">
          <img width="150" height="150" src="https://github.com/evilebottnawi.png?v=3&s=150">
          </br>
          Alexander Krasnoyarov
        </a>
      </td>
    </tr>
  <tbody>
</table>
</div>
  </div>
</body>
</html>
