<!DOCTYPE html>
<html>
<head>
  <title>engine.io.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "ClientApp\\node_modules\\engine.io-client\\engine.io.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>engine.io.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">webpackUniversalModuleDefinition</span>(<span class="hljs-params">root, factory</span>) </span>{
	<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> === <span class="hljs-string">'object'</span>)
		<span class="hljs-built_in">module</span>.exports = factory();
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd)
		define([], factory);
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> exports === <span class="hljs-string">'object'</span>)
		exports[<span class="hljs-string">"eio"</span>] = factory();
	<span class="hljs-keyword">else</span>
		root[<span class="hljs-string">"eio"</span>] = factory();
})(<span class="hljs-keyword">this</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">return</span> <span class="hljs-comment">/******/</span> (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modules</span>) </span>{ <span class="hljs-comment">// webpackBootstrap</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// The module cache</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-keyword">var</span> installedModules = {};

<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// The require function</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__webpack_require__</span>(<span class="hljs-params">moduleId</span>) </span>{

<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Check if module is in cache</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">if</span>(installedModules[moduleId])
<span class="hljs-comment">/******/</span> 			<span class="hljs-keyword">return</span> installedModules[moduleId].exports;

<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Create a new module (and put it into the cache)</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">var</span> <span class="hljs-built_in">module</span> = installedModules[moduleId] = {
<span class="hljs-comment">/******/</span> 			exports: {},
<span class="hljs-comment">/******/</span> 			id: moduleId,
<span class="hljs-comment">/******/</span> 			loaded: <span class="hljs-literal">false</span>
<span class="hljs-comment">/******/</span> 		};

<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Execute the module function</span>
<span class="hljs-comment">/******/</span> 		modules[moduleId].call(<span class="hljs-built_in">module</span>.exports, <span class="hljs-built_in">module</span>, <span class="hljs-built_in">module</span>.exports, __webpack_require__);

<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Flag the module as loaded</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-built_in">module</span>.loaded = <span class="hljs-literal">true</span>;

<span class="hljs-comment">/******/</span> 		<span class="hljs-comment">// Return the exports of the module</span>
<span class="hljs-comment">/******/</span> 		<span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>.exports;
<span class="hljs-comment">/******/</span> 	}


<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// expose the modules object (__webpack_modules__)</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.m = modules;

<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// expose the module cache</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.c = installedModules;

<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// __webpack_public_path__</span>
<span class="hljs-comment">/******/</span> 	__webpack_require__.p = <span class="hljs-string">""</span>;

<span class="hljs-comment">/******/</span> 	<span class="hljs-comment">// Load entry module and return exports</span>
<span class="hljs-comment">/******/</span> 	<span class="hljs-keyword">return</span> __webpack_require__(<span class="hljs-number">0</span>);
<span class="hljs-comment">/******/</span> })
<span class="hljs-comment">/************************************************************************/</span>
<span class="hljs-comment">/******/</span> ([
<span class="hljs-comment">/* 0 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{
<span class="hljs-meta">
	'use strict'</span>;

	<span class="hljs-built_in">module</span>.exports = __webpack_require__(<span class="hljs-number">1</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>Exports parser</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-built_in">module</span>.exports.parser = __webpack_require__(<span class="hljs-number">8</span>);

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 1 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-string">'use strict'</span>;

	<span class="hljs-keyword">var</span> _typeof = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span> === <span class="hljs-string">"function"</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span>.iterator === <span class="hljs-string">"symbol"</span> ? <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> obj; } : <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{ <span class="hljs-keyword">return</span> obj &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Symbol</span> === <span class="hljs-string">"function"</span> &amp;&amp; obj.constructor === <span class="hljs-built_in">Symbol</span> &amp;&amp; obj !== <span class="hljs-built_in">Symbol</span>.prototype ? <span class="hljs-string">"symbol"</span> : <span class="hljs-keyword">typeof</span> obj; };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module dependencies.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> transports = __webpack_require__(<span class="hljs-number">2</span>);
	<span class="hljs-keyword">var</span> Emitter = __webpack_require__(<span class="hljs-number">18</span>);
	<span class="hljs-keyword">var</span> debug = __webpack_require__(<span class="hljs-number">22</span>)(<span class="hljs-string">'engine.io-client:socket'</span>);
	<span class="hljs-keyword">var</span> index = __webpack_require__(<span class="hljs-number">29</span>);
	<span class="hljs-keyword">var</span> parser = __webpack_require__(<span class="hljs-number">8</span>);
	<span class="hljs-keyword">var</span> parseuri = __webpack_require__(<span class="hljs-number">30</span>);
	<span class="hljs-keyword">var</span> parseqs = __webpack_require__(<span class="hljs-number">19</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module exports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = Socket;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>Socket constructor.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">uri</span>
<span class="dox_type">String</span>
<span class="dox_type">Object</span>
<span>or options
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Socket</span>(<span class="hljs-params">uri, opts</span>) </span>{
	  <span class="hljs-keyword">if</span> (!(<span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> Socket)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Socket(uri, opts);

	  opts = opts || {};

	  <span class="hljs-keyword">if</span> (uri &amp;&amp; <span class="hljs-string">'object'</span> === (<span class="hljs-keyword">typeof</span> uri === <span class="hljs-string">'undefined'</span> ? <span class="hljs-string">'undefined'</span> : _typeof(uri))) {
	    opts = uri;
	    uri = <span class="hljs-literal">null</span>;
	  }

	  <span class="hljs-keyword">if</span> (uri) {
	    uri = parseuri(uri);
	    opts.hostname = uri.host;
	    opts.secure = uri.protocol === <span class="hljs-string">'https'</span> || uri.protocol === <span class="hljs-string">'wss'</span>;
	    opts.port = uri.port;
	    <span class="hljs-keyword">if</span> (uri.query) opts.query = uri.query;
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (opts.host) {
	    opts.hostname = parseuri(opts.host).host;
	  }

	  <span class="hljs-keyword">this</span>.secure = <span class="hljs-literal">null</span> != opts.secure ? opts.secure : global.location &amp;&amp; <span class="hljs-string">'https:'</span> === location.protocol;

	  <span class="hljs-keyword">if</span> (opts.hostname &amp;&amp; !opts.port) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<p>if no port is specified manually, use the protocol default</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    opts.port = <span class="hljs-keyword">this</span>.secure ? <span class="hljs-string">'443'</span> : <span class="hljs-string">'80'</span>;
	  }

	  <span class="hljs-keyword">this</span>.agent = opts.agent || <span class="hljs-literal">false</span>;
	  <span class="hljs-keyword">this</span>.hostname = opts.hostname || (global.location ? location.hostname : <span class="hljs-string">'localhost'</span>);
	  <span class="hljs-keyword">this</span>.port = opts.port || (global.location &amp;&amp; location.port ? location.port : <span class="hljs-keyword">this</span>.secure ? <span class="hljs-number">443</span> : <span class="hljs-number">80</span>);
	  <span class="hljs-keyword">this</span>.query = opts.query || {};
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.query) <span class="hljs-keyword">this</span>.query = parseqs.decode(<span class="hljs-keyword">this</span>.query);
	  <span class="hljs-keyword">this</span>.upgrade = <span class="hljs-literal">false</span> !== opts.upgrade;
	  <span class="hljs-keyword">this</span>.path = (opts.path || <span class="hljs-string">'/engine.io'</span>).replace(<span class="hljs-regexp">/\/$/</span>, <span class="hljs-string">''</span>) + <span class="hljs-string">'/'</span>;
	  <span class="hljs-keyword">this</span>.forceJSONP = !!opts.forceJSONP;
	  <span class="hljs-keyword">this</span>.jsonp = <span class="hljs-literal">false</span> !== opts.jsonp;
	  <span class="hljs-keyword">this</span>.forceBase64 = !!opts.forceBase64;
	  <span class="hljs-keyword">this</span>.enablesXDR = !!opts.enablesXDR;
	  <span class="hljs-keyword">this</span>.timestampParam = opts.timestampParam || <span class="hljs-string">'t'</span>;
	  <span class="hljs-keyword">this</span>.timestampRequests = opts.timestampRequests;
	  <span class="hljs-keyword">this</span>.transports = opts.transports || [<span class="hljs-string">'polling'</span>, <span class="hljs-string">'websocket'</span>];
	  <span class="hljs-keyword">this</span>.transportOptions = opts.transportOptions || {};
	  <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">''</span>;
	  <span class="hljs-keyword">this</span>.writeBuffer = [];
	  <span class="hljs-keyword">this</span>.prevBufferLen = <span class="hljs-number">0</span>;
	  <span class="hljs-keyword">this</span>.policyPort = opts.policyPort || <span class="hljs-number">843</span>;
	  <span class="hljs-keyword">this</span>.rememberUpgrade = opts.rememberUpgrade || <span class="hljs-literal">false</span>;
	  <span class="hljs-keyword">this</span>.binaryType = <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;
	  <span class="hljs-keyword">this</span>.perMessageDeflate = <span class="hljs-literal">false</span> !== opts.perMessageDeflate ? opts.perMessageDeflate || {} : <span class="hljs-literal">false</span>;

	  <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span> === <span class="hljs-keyword">this</span>.perMessageDeflate) <span class="hljs-keyword">this</span>.perMessageDeflate = {};
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.perMessageDeflate &amp;&amp; <span class="hljs-literal">null</span> == <span class="hljs-keyword">this</span>.perMessageDeflate.threshold) {
	    <span class="hljs-keyword">this</span>.perMessageDeflate.threshold = <span class="hljs-number">1024</span>;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<p>SSL options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.pfx = opts.pfx || <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.key = opts.key || <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.passphrase = opts.passphrase || <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.cert = opts.cert || <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.ca = opts.ca || <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.ciphers = opts.ciphers || <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.rejectUnauthorized = opts.rejectUnauthorized === <span class="hljs-literal">undefined</span> ? <span class="hljs-literal">true</span> : opts.rejectUnauthorized;
	  <span class="hljs-keyword">this</span>.forceNode = !!opts.forceNode;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>other options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> freeGlobal = (<span class="hljs-keyword">typeof</span> global === <span class="hljs-string">'undefined'</span> ? <span class="hljs-string">'undefined'</span> : _typeof(global)) === <span class="hljs-string">'object'</span> &amp;&amp; global;
	  <span class="hljs-keyword">if</span> (freeGlobal.global === freeGlobal) {
	    <span class="hljs-keyword">if</span> (opts.extraHeaders &amp;&amp; <span class="hljs-built_in">Object</span>.keys(opts.extraHeaders).length &gt; <span class="hljs-number">0</span>) {
	      <span class="hljs-keyword">this</span>.extraHeaders = opts.extraHeaders;
	    }

	    <span class="hljs-keyword">if</span> (opts.localAddress) {
	      <span class="hljs-keyword">this</span>.localAddress = opts.localAddress;
	    }
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>set on handshake</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.id = <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.upgrades = <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.pingInterval = <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.pingTimeout = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>set on heartbeat</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.pingIntervalTimer = <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.pingTimeoutTimer = <span class="hljs-literal">null</span>;

	  <span class="hljs-keyword">this</span>.open();
	}

	Socket.priorWebsocketSuccess = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>Mix in <code>Emitter</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Emitter(Socket.prototype);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
<p>Protocol version.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.protocol = parser.protocol; <span class="hljs-comment">// this is an int</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>Expose deps for legacy compatibility
and standalone browser access.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.Socket = Socket;
	Socket.Transport = __webpack_require__(<span class="hljs-number">7</span>);
	Socket.transports = __webpack_require__(<span class="hljs-number">2</span>);
	Socket.parser = __webpack_require__(<span class="hljs-number">8</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>Creates transport of the given type.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">transport</span>
<span class="dox_type">String</span>
<span>name
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Transport</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.createTransport = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
	  debug(<span class="hljs-string">'creating transport "%s"'</span>, name);
	  <span class="hljs-keyword">var</span> query = clone(<span class="hljs-keyword">this</span>.query);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>append engine.io protocol identifier</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  query.EIO = parser.protocol;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>transport name</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  query.transport = name;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>per-transport options</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> options = <span class="hljs-keyword">this</span>.transportOptions[name] || {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>session id if we already have one</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.id) query.sid = <span class="hljs-keyword">this</span>.id;

	  <span class="hljs-keyword">var</span> transport = <span class="hljs-keyword">new</span> transports[name]({
	    <span class="hljs-attr">query</span>: query,
	    <span class="hljs-attr">socket</span>: <span class="hljs-keyword">this</span>,
	    <span class="hljs-attr">agent</span>: options.agent || <span class="hljs-keyword">this</span>.agent,
	    <span class="hljs-attr">hostname</span>: options.hostname || <span class="hljs-keyword">this</span>.hostname,
	    <span class="hljs-attr">port</span>: options.port || <span class="hljs-keyword">this</span>.port,
	    <span class="hljs-attr">secure</span>: options.secure || <span class="hljs-keyword">this</span>.secure,
	    <span class="hljs-attr">path</span>: options.path || <span class="hljs-keyword">this</span>.path,
	    <span class="hljs-attr">forceJSONP</span>: options.forceJSONP || <span class="hljs-keyword">this</span>.forceJSONP,
	    <span class="hljs-attr">jsonp</span>: options.jsonp || <span class="hljs-keyword">this</span>.jsonp,
	    <span class="hljs-attr">forceBase64</span>: options.forceBase64 || <span class="hljs-keyword">this</span>.forceBase64,
	    <span class="hljs-attr">enablesXDR</span>: options.enablesXDR || <span class="hljs-keyword">this</span>.enablesXDR,
	    <span class="hljs-attr">timestampRequests</span>: options.timestampRequests || <span class="hljs-keyword">this</span>.timestampRequests,
	    <span class="hljs-attr">timestampParam</span>: options.timestampParam || <span class="hljs-keyword">this</span>.timestampParam,
	    <span class="hljs-attr">policyPort</span>: options.policyPort || <span class="hljs-keyword">this</span>.policyPort,
	    <span class="hljs-attr">pfx</span>: options.pfx || <span class="hljs-keyword">this</span>.pfx,
	    <span class="hljs-attr">key</span>: options.key || <span class="hljs-keyword">this</span>.key,
	    <span class="hljs-attr">passphrase</span>: options.passphrase || <span class="hljs-keyword">this</span>.passphrase,
	    <span class="hljs-attr">cert</span>: options.cert || <span class="hljs-keyword">this</span>.cert,
	    <span class="hljs-attr">ca</span>: options.ca || <span class="hljs-keyword">this</span>.ca,
	    <span class="hljs-attr">ciphers</span>: options.ciphers || <span class="hljs-keyword">this</span>.ciphers,
	    <span class="hljs-attr">rejectUnauthorized</span>: options.rejectUnauthorized || <span class="hljs-keyword">this</span>.rejectUnauthorized,
	    <span class="hljs-attr">perMessageDeflate</span>: options.perMessageDeflate || <span class="hljs-keyword">this</span>.perMessageDeflate,
	    <span class="hljs-attr">extraHeaders</span>: options.extraHeaders || <span class="hljs-keyword">this</span>.extraHeaders,
	    <span class="hljs-attr">forceNode</span>: options.forceNode || <span class="hljs-keyword">this</span>.forceNode,
	    <span class="hljs-attr">localAddress</span>: options.localAddress || <span class="hljs-keyword">this</span>.localAddress,
	    <span class="hljs-attr">requestTimeout</span>: options.requestTimeout || <span class="hljs-keyword">this</span>.requestTimeout,
	    <span class="hljs-attr">protocols</span>: options.protocols || <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>
	  });

	  <span class="hljs-keyword">return</span> transport;
	};

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">clone</span>(<span class="hljs-params">obj</span>) </span>{
	  <span class="hljs-keyword">var</span> o = {};
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> obj) {
	    <span class="hljs-keyword">if</span> (obj.hasOwnProperty(i)) {
	      o[i] = obj[i];
	    }
	  }
	  <span class="hljs-keyword">return</span> o;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<div class="dox">
<div class="summary">
<p>Initializes transport to use and starts probe.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	Socket.prototype.open = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> transport;
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.rememberUpgrade &amp;&amp; Socket.priorWebsocketSuccess &amp;&amp; <span class="hljs-keyword">this</span>.transports.indexOf(<span class="hljs-string">'websocket'</span>) !== <span class="hljs-number">-1</span>) {
	    transport = <span class="hljs-string">'websocket'</span>;
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> === <span class="hljs-keyword">this</span>.transports.length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>Emit error on next tick so it can be listened to</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	      self.emit(<span class="hljs-string">'error'</span>, <span class="hljs-string">'No transports available'</span>);
	    }, <span class="hljs-number">0</span>);
	    <span class="hljs-keyword">return</span>;
	  } <span class="hljs-keyword">else</span> {
	    transport = <span class="hljs-keyword">this</span>.transports[<span class="hljs-number">0</span>];
	  }
	  <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">'opening'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>Retry with the next transport if the transport is disabled (jsonp: false)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">try</span> {
	    transport = <span class="hljs-keyword">this</span>.createTransport(transport);
	  } <span class="hljs-keyword">catch</span> (e) {
	    <span class="hljs-keyword">this</span>.transports.shift();
	    <span class="hljs-keyword">this</span>.open();
	    <span class="hljs-keyword">return</span>;
	  }

	  transport.open();
	  <span class="hljs-keyword">this</span>.setTransport(transport);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sets the current transport. Disables the existing one (if any).</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.setTransport = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">transport</span>) </span>{
	  debug(<span class="hljs-string">'setting transport %s'</span>, transport.name);
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.transport) {
	    debug(<span class="hljs-string">'clearing existing transport %s'</span>, <span class="hljs-keyword">this</span>.transport.name);
	    <span class="hljs-keyword">this</span>.transport.removeAllListeners();
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>set up transport</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.transport = transport;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>set up transport listeners</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  transport.on(<span class="hljs-string">'drain'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    self.onDrain();
	  }).on(<span class="hljs-string">'packet'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">packet</span>) </span>{
	    self.onPacket(packet);
	  }).on(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
	    self.onError(e);
	  }).on(<span class="hljs-string">'close'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    self.onClose(<span class="hljs-string">'transport close'</span>);
	  });
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<div class="dox">
<div class="summary">
<p>Probes a transport.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">transport</span>
<span class="dox_type">String</span>
<span>name
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.probe = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
	  debug(<span class="hljs-string">'probing transport "%s"'</span>, name);
	  <span class="hljs-keyword">var</span> transport = <span class="hljs-keyword">this</span>.createTransport(name, { <span class="hljs-attr">probe</span>: <span class="hljs-number">1</span> });
	  <span class="hljs-keyword">var</span> failed = <span class="hljs-literal">false</span>;
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

	  Socket.priorWebsocketSuccess = <span class="hljs-literal">false</span>;

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onTransportOpen</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (self.onlyBinaryUpgrades) {
	      <span class="hljs-keyword">var</span> upgradeLosesBinary = !<span class="hljs-keyword">this</span>.supportsBinary &amp;&amp; self.transport.supportsBinary;
	      failed = failed || upgradeLosesBinary;
	    }
	    <span class="hljs-keyword">if</span> (failed) <span class="hljs-keyword">return</span>;

	    debug(<span class="hljs-string">'probe transport "%s" opened'</span>, name);
	    transport.send([{ <span class="hljs-attr">type</span>: <span class="hljs-string">'ping'</span>, <span class="hljs-attr">data</span>: <span class="hljs-string">'probe'</span> }]);
	    transport.once(<span class="hljs-string">'packet'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">msg</span>) </span>{
	      <span class="hljs-keyword">if</span> (failed) <span class="hljs-keyword">return</span>;
	      <span class="hljs-keyword">if</span> (<span class="hljs-string">'pong'</span> === msg.type &amp;&amp; <span class="hljs-string">'probe'</span> === msg.data) {
	        debug(<span class="hljs-string">'probe transport "%s" pong'</span>, name);
	        self.upgrading = <span class="hljs-literal">true</span>;
	        self.emit(<span class="hljs-string">'upgrading'</span>, transport);
	        <span class="hljs-keyword">if</span> (!transport) <span class="hljs-keyword">return</span>;
	        Socket.priorWebsocketSuccess = <span class="hljs-string">'websocket'</span> === transport.name;

	        debug(<span class="hljs-string">'pausing current transport "%s"'</span>, self.transport.name);
	        self.transport.pause(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	          <span class="hljs-keyword">if</span> (failed) <span class="hljs-keyword">return</span>;
	          <span class="hljs-keyword">if</span> (<span class="hljs-string">'closed'</span> === self.readyState) <span class="hljs-keyword">return</span>;
	          debug(<span class="hljs-string">'changing transport and sending upgrade packet'</span>);

	          cleanup();

	          self.setTransport(transport);
	          transport.send([{ <span class="hljs-attr">type</span>: <span class="hljs-string">'upgrade'</span> }]);
	          self.emit(<span class="hljs-string">'upgrade'</span>, transport);
	          transport = <span class="hljs-literal">null</span>;
	          self.upgrading = <span class="hljs-literal">false</span>;
	          self.flush();
	        });
	      } <span class="hljs-keyword">else</span> {
	        debug(<span class="hljs-string">'probe transport "%s" failed'</span>, name);
	        <span class="hljs-keyword">var</span> err = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'probe error'</span>);
	        err.transport = transport.name;
	        self.emit(<span class="hljs-string">'upgradeError'</span>, err);
	      }
	    });
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">freezeTransport</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (failed) <span class="hljs-keyword">return</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>Any callback called by transport should be ignored since now</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    failed = <span class="hljs-literal">true</span>;

	    cleanup();

	    transport.close();
	    transport = <span class="hljs-literal">null</span>;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>Handle any error that happens while probing</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onerror</span>(<span class="hljs-params">err</span>) </span>{
	    <span class="hljs-keyword">var</span> error = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'probe error: '</span> + err);
	    error.transport = transport.name;

	    freezeTransport();

	    debug(<span class="hljs-string">'probe transport "%s" failed because of error: %s'</span>, name, err);

	    self.emit(<span class="hljs-string">'upgradeError'</span>, error);
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onTransportClose</span>(<span class="hljs-params"></span>) </span>{
	    onerror(<span class="hljs-string">'transport closed'</span>);
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>When the socket is closed while we're probing</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onclose</span>(<span class="hljs-params"></span>) </span>{
	    onerror(<span class="hljs-string">'socket closed'</span>);
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<p>When the socket is upgraded while we're probing</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onupgrade</span>(<span class="hljs-params">to</span>) </span>{
	    <span class="hljs-keyword">if</span> (transport &amp;&amp; to.name !== transport.name) {
	      debug(<span class="hljs-string">'"%s" works - aborting "%s"'</span>, to.name, transport.name);
	      freezeTransport();
	    }
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>Remove all listeners on the transport and on self</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanup</span>(<span class="hljs-params"></span>) </span>{
	    transport.removeListener(<span class="hljs-string">'open'</span>, onTransportOpen);
	    transport.removeListener(<span class="hljs-string">'error'</span>, onerror);
	    transport.removeListener(<span class="hljs-string">'close'</span>, onTransportClose);
	    self.removeListener(<span class="hljs-string">'close'</span>, onclose);
	    self.removeListener(<span class="hljs-string">'upgrading'</span>, onupgrade);
	  }

	  transport.once(<span class="hljs-string">'open'</span>, onTransportOpen);
	  transport.once(<span class="hljs-string">'error'</span>, onerror);
	  transport.once(<span class="hljs-string">'close'</span>, onTransportClose);

	  <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'close'</span>, onclose);
	  <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'upgrading'</span>, onupgrade);

	  transport.open();
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called when connection is deemed open.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.onOpen = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  debug(<span class="hljs-string">'socket open'</span>);
	  <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">'open'</span>;
	  Socket.priorWebsocketSuccess = <span class="hljs-string">'websocket'</span> === <span class="hljs-keyword">this</span>.transport.name;
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'open'</span>);
	  <span class="hljs-keyword">this</span>.flush();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<p>we check for <code>readyState</code> in case an <code>open</code>
listener already closed the socket</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'open'</span> === <span class="hljs-keyword">this</span>.readyState &amp;&amp; <span class="hljs-keyword">this</span>.upgrade &amp;&amp; <span class="hljs-keyword">this</span>.transport.pause) {
	    debug(<span class="hljs-string">'starting upgrade probes'</span>);
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = <span class="hljs-keyword">this</span>.upgrades.length; i &lt; l; i++) {
	      <span class="hljs-keyword">this</span>.probe(<span class="hljs-keyword">this</span>.upgrades[i]);
	    }
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<div class="dox">
<div class="summary">
<p>Handles a packet.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.onPacket = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">packet</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'opening'</span> === <span class="hljs-keyword">this</span>.readyState || <span class="hljs-string">'open'</span> === <span class="hljs-keyword">this</span>.readyState || <span class="hljs-string">'closing'</span> === <span class="hljs-keyword">this</span>.readyState) {
	    debug(<span class="hljs-string">'socket receive: type "%s", data "%s"'</span>, packet.type, packet.data);

	    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'packet'</span>, packet);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<p>Socket is live - any packet counts</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'heartbeat'</span>);

	    <span class="hljs-keyword">switch</span> (packet.type) {
	      <span class="hljs-keyword">case</span> <span class="hljs-string">'open'</span>:
	        <span class="hljs-keyword">this</span>.onHandshake(<span class="hljs-built_in">JSON</span>.parse(packet.data));
	        <span class="hljs-keyword">break</span>;

	      <span class="hljs-keyword">case</span> <span class="hljs-string">'pong'</span>:
	        <span class="hljs-keyword">this</span>.setPing();
	        <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'pong'</span>);
	        <span class="hljs-keyword">break</span>;

	      <span class="hljs-keyword">case</span> <span class="hljs-string">'error'</span>:
	        <span class="hljs-keyword">var</span> err = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'server error'</span>);
	        err.code = packet.data;
	        <span class="hljs-keyword">this</span>.onError(err);
	        <span class="hljs-keyword">break</span>;

	      <span class="hljs-keyword">case</span> <span class="hljs-string">'message'</span>:
	        <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'data'</span>, packet.data);
	        <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'message'</span>, packet.data);
	        <span class="hljs-keyword">break</span>;
	    }
	  } <span class="hljs-keyword">else</span> {
	    debug(<span class="hljs-string">'packet received with socket readyState "%s"'</span>, <span class="hljs-keyword">this</span>.readyState);
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called upon handshake completion.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">handshake</span>
<span class="dox_type">Object</span>
<span>obj
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.onHandshake = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'handshake'</span>, data);
	  <span class="hljs-keyword">this</span>.id = data.sid;
	  <span class="hljs-keyword">this</span>.transport.query.sid = data.sid;
	  <span class="hljs-keyword">this</span>.upgrades = <span class="hljs-keyword">this</span>.filterUpgrades(data.upgrades);
	  <span class="hljs-keyword">this</span>.pingInterval = data.pingInterval;
	  <span class="hljs-keyword">this</span>.pingTimeout = data.pingTimeout;
	  <span class="hljs-keyword">this</span>.onOpen();
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>In case open handler closes socket</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'closed'</span> === <span class="hljs-keyword">this</span>.readyState) <span class="hljs-keyword">return</span>;
	  <span class="hljs-keyword">this</span>.setPing();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>Prolong liveness of socket on heartbeat</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.removeListener(<span class="hljs-string">'heartbeat'</span>, <span class="hljs-keyword">this</span>.onHeartbeat);
	  <span class="hljs-keyword">this</span>.on(<span class="hljs-string">'heartbeat'</span>, <span class="hljs-keyword">this</span>.onHeartbeat);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<div class="dox">
<div class="summary">
<p>Resets ping timeout.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.onHeartbeat = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">timeout</span>) </span>{
	  clearTimeout(<span class="hljs-keyword">this</span>.pingTimeoutTimer);
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  self.pingTimeoutTimer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'closed'</span> === self.readyState) <span class="hljs-keyword">return</span>;
	    self.onClose(<span class="hljs-string">'ping timeout'</span>);
	  }, timeout || self.pingInterval + self.pingTimeout);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<div class="dox">
<div class="summary">
<p>Pings server every <code>this.pingInterval</code> and expects response
within <code>this.pingTimeout</code> or closes connection.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.setPing = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  clearTimeout(self.pingIntervalTimer);
	  self.pingIntervalTimer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    debug(<span class="hljs-string">'writing ping packet - expecting pong within %sms'</span>, self.pingTimeout);
	    self.ping();
	    self.onHeartbeat(self.pingTimeout);
	  }, self.pingInterval);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sends a ping packet.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.ping = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  <span class="hljs-keyword">this</span>.sendPacket(<span class="hljs-string">'ping'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    self.emit(<span class="hljs-string">'ping'</span>);
	  });
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called on <code>drain</code> event</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.onDrain = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">this</span>.writeBuffer.splice(<span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>.prevBufferLen);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<p>setting prevBufferLen = 0 is very important
for example, when upgrading, upgrade packet is sent over,
and a nonzero prevBufferLen could cause problems on <code>drain</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.prevBufferLen = <span class="hljs-number">0</span>;

	  <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> === <span class="hljs-keyword">this</span>.writeBuffer.length) {
	    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'drain'</span>);
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">this</span>.flush();
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<div class="dox">
<div class="summary">
<p>Flush write buffers.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.flush = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'closed'</span> !== <span class="hljs-keyword">this</span>.readyState &amp;&amp; <span class="hljs-keyword">this</span>.transport.writable &amp;&amp; !<span class="hljs-keyword">this</span>.upgrading &amp;&amp; <span class="hljs-keyword">this</span>.writeBuffer.length) {
	    debug(<span class="hljs-string">'flushing %d packets in socket'</span>, <span class="hljs-keyword">this</span>.writeBuffer.length);
	    <span class="hljs-keyword">this</span>.transport.send(<span class="hljs-keyword">this</span>.writeBuffer);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<p>keep track of current length of writeBuffer
splice writeBuffer and callbackBuffer on <code>drain</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">this</span>.prevBufferLen = <span class="hljs-keyword">this</span>.writeBuffer.length;
	    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'flush'</span>);
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sends a message.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">message.</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Socket</span>
<span>for chaining.
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.write = Socket.prototype.send = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">msg, options, fn</span>) </span>{
	  <span class="hljs-keyword">this</span>.sendPacket(<span class="hljs-string">'message'</span>, msg, options, fn);
	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sends a packet.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">packet</span>
<span class="dox_type">String</span>
<span>type.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data.</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>function.
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.sendPacket = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">type, data, options, fn</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> === <span class="hljs-keyword">typeof</span> data) {
	    fn = data;
	    data = <span class="hljs-literal">undefined</span>;
	  }

	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> === <span class="hljs-keyword">typeof</span> options) {
	    fn = options;
	    options = <span class="hljs-literal">null</span>;
	  }

	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'closing'</span> === <span class="hljs-keyword">this</span>.readyState || <span class="hljs-string">'closed'</span> === <span class="hljs-keyword">this</span>.readyState) {
	    <span class="hljs-keyword">return</span>;
	  }

	  options = options || {};
	  options.compress = <span class="hljs-literal">false</span> !== options.compress;

	  <span class="hljs-keyword">var</span> packet = {
	    <span class="hljs-attr">type</span>: type,
	    <span class="hljs-attr">data</span>: data,
	    <span class="hljs-attr">options</span>: options
	  };
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'packetCreate'</span>, packet);
	  <span class="hljs-keyword">this</span>.writeBuffer.push(packet);
	  <span class="hljs-keyword">if</span> (fn) <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'flush'</span>, fn);
	  <span class="hljs-keyword">this</span>.flush();
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<div class="dox">
<div class="summary">
<p>Closes the connection.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.close = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'opening'</span> === <span class="hljs-keyword">this</span>.readyState || <span class="hljs-string">'open'</span> === <span class="hljs-keyword">this</span>.readyState) {
	    <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">'closing'</span>;

	    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.writeBuffer.length) {
	      <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'drain'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.upgrading) {
	          waitForUpgrade();
	        } <span class="hljs-keyword">else</span> {
	          close();
	        }
	      });
	    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.upgrading) {
	      waitForUpgrade();
	    } <span class="hljs-keyword">else</span> {
	      close();
	    }
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span>(<span class="hljs-params"></span>) </span>{
	    self.onClose(<span class="hljs-string">'forced close'</span>);
	    debug(<span class="hljs-string">'socket closing - telling transport to close'</span>);
	    self.transport.close();
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanupAndClose</span>(<span class="hljs-params"></span>) </span>{
	    self.removeListener(<span class="hljs-string">'upgrade'</span>, cleanupAndClose);
	    self.removeListener(<span class="hljs-string">'upgradeError'</span>, cleanupAndClose);
	    close();
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">waitForUpgrade</span>(<span class="hljs-params"></span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<p>wait for upgrade to finish since we can't send packets while pausing a transport</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    self.once(<span class="hljs-string">'upgrade'</span>, cleanupAndClose);
	    self.once(<span class="hljs-string">'upgradeError'</span>, cleanupAndClose);
	  }

	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called upon transport error</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.onError = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
	  debug(<span class="hljs-string">'socket error %j'</span>, err);
	  Socket.priorWebsocketSuccess = <span class="hljs-literal">false</span>;
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'error'</span>, err);
	  <span class="hljs-keyword">this</span>.onClose(<span class="hljs-string">'transport error'</span>, err);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called upon transport close.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.onClose = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">reason, desc</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'opening'</span> === <span class="hljs-keyword">this</span>.readyState || <span class="hljs-string">'open'</span> === <span class="hljs-keyword">this</span>.readyState || <span class="hljs-string">'closing'</span> === <span class="hljs-keyword">this</span>.readyState) {
	    debug(<span class="hljs-string">'socket close with reason: "%s"'</span>, reason);
	    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<p>clear timers</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    clearTimeout(<span class="hljs-keyword">this</span>.pingIntervalTimer);
	    clearTimeout(<span class="hljs-keyword">this</span>.pingTimeoutTimer);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<p>stop event from firing again for transport</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">this</span>.transport.removeAllListeners(<span class="hljs-string">'close'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<p>ensure transport won't stay open</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">this</span>.transport.close();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<p>ignore further transport communication</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">this</span>.transport.removeAllListeners();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<p>set ready state</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">'closed'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<p>clear session id</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">this</span>.id = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<p>emit close event</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'close'</span>, reason, desc);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<p>clean buffers after, so users can still
grab the buffers on <code>close</code> event</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    self.writeBuffer = [];
	    self.prevBufferLen = <span class="hljs-number">0</span>;
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<div class="dox">
<div class="summary">
<p>Filters upgrades, returning only those matching client transports.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">server</span>
<span class="dox_type">Array</span>
<span>upgrades
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Socket.prototype.filterUpgrades = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">upgrades</span>) </span>{
	  <span class="hljs-keyword">var</span> filteredUpgrades = [];
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, j = upgrades.length; i &lt; j; i++) {
	    <span class="hljs-keyword">if</span> (~index(<span class="hljs-keyword">this</span>.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);
	  }
	  <span class="hljs-keyword">return</span> filteredUpgrades;
	};
	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 2 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-string">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module dependencies</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> XMLHttpRequest = __webpack_require__(<span class="hljs-number">3</span>);
	<span class="hljs-keyword">var</span> XHR = __webpack_require__(<span class="hljs-number">5</span>);
	<span class="hljs-keyword">var</span> JSONP = __webpack_require__(<span class="hljs-number">26</span>);
	<span class="hljs-keyword">var</span> websocket = __webpack_require__(<span class="hljs-number">27</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<div class="dox">
<div class="summary">
<p>Export transports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.polling = polling;
	exports.websocket = websocket;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<div class="dox">
<div class="summary">
<p>Polling transport polymorphic constructor.
Decides on xhr vs jsonp based on feature detection.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">polling</span>(<span class="hljs-params">opts</span>) </span>{
	  <span class="hljs-keyword">var</span> xhr;
	  <span class="hljs-keyword">var</span> xd = <span class="hljs-literal">false</span>;
	  <span class="hljs-keyword">var</span> xs = <span class="hljs-literal">false</span>;
	  <span class="hljs-keyword">var</span> jsonp = <span class="hljs-literal">false</span> !== opts.jsonp;

	  <span class="hljs-keyword">if</span> (global.location) {
	    <span class="hljs-keyword">var</span> isSSL = <span class="hljs-string">'https:'</span> === location.protocol;
	    <span class="hljs-keyword">var</span> port = location.port;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<p>some user agents have empty <code>location.port</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">if</span> (!port) {
	      port = isSSL ? <span class="hljs-number">443</span> : <span class="hljs-number">80</span>;
	    }

	    xd = opts.hostname !== location.hostname || port !== opts.port;
	    xs = opts.secure !== isSSL;
	  }

	  opts.xdomain = xd;
	  opts.xscheme = xs;
	  xhr = <span class="hljs-keyword">new</span> XMLHttpRequest(opts);

	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'open'</span> <span class="hljs-keyword">in</span> xhr &amp;&amp; !opts.forceJSONP) {
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XHR(opts);
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">if</span> (!jsonp) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'JSONP disabled'</span>);
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> JSONP(opts);
	  }
	}
	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 3 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-string">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<p>browser shim for xmlhttprequest module</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> hasCORS = __webpack_require__(<span class="hljs-number">4</span>);

	<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">opts</span>) </span>{
	  <span class="hljs-keyword">var</span> xdomain = opts.xdomain;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<p>scheme must be same when usign XDomainRequest
http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> xscheme = opts.xscheme;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<p>XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.
https://github.com/Automattic/engine.io-client/pull/217</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> enablesXDR = opts.enablesXDR;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<p>XMLHttpRequest can be disabled on IE</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> XMLHttpRequest &amp;&amp; (!xdomain || hasCORS)) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XMLHttpRequest();
	    }
	  } <span class="hljs-keyword">catch</span> (e) {}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68"></a>
</div>
<p>Use XDomainRequest for IE8 if enablesXDR is true
because loading bar keeps flashing when using jsonp-polling
https://github.com/yujiosaka/socke.io-ie8-loading-example</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> XDomainRequest &amp;&amp; !xscheme &amp;&amp; enablesXDR) {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XDomainRequest();
	    }
	  } <span class="hljs-keyword">catch</span> (e) {}

	  <span class="hljs-keyword">if</span> (!xdomain) {
	    <span class="hljs-keyword">try</span> {
	      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> global[[<span class="hljs-string">'Active'</span>].concat(<span class="hljs-string">'Object'</span>).join(<span class="hljs-string">'X'</span>)](<span class="hljs-string">'Microsoft.XMLHTTP'</span>);
	    } <span class="hljs-keyword">catch</span> (e) {}
	  }
	};
	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 4 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

	
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module exports.</p>
</div>
<div class="body">
<p>Logic borrowed from Modernizr:</p>
<ul>
<li>https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js</li>
</ul>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">try</span> {
	  <span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">typeof</span> XMLHttpRequest !== <span class="hljs-string">'undefined'</span> &amp;&amp;
	    <span class="hljs-string">'withCredentials'</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">new</span> XMLHttpRequest();
	} <span class="hljs-keyword">catch</span> (err) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70"></a>
</div>
<p>if XMLHttp support is disabled in IE then it will throw
when trying to create</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-built_in">module</span>.exports = <span class="hljs-literal">false</span>;
	}


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 5 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-string">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module requirements.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> XMLHttpRequest = __webpack_require__(<span class="hljs-number">3</span>);
	<span class="hljs-keyword">var</span> Polling = __webpack_require__(<span class="hljs-number">6</span>);
	<span class="hljs-keyword">var</span> Emitter = __webpack_require__(<span class="hljs-number">18</span>);
	<span class="hljs-keyword">var</span> inherit = __webpack_require__(<span class="hljs-number">20</span>);
	<span class="hljs-keyword">var</span> debug = __webpack_require__(<span class="hljs-number">22</span>)(<span class="hljs-string">'engine.io-client:polling-xhr'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module exports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = XHR;
	<span class="hljs-built_in">module</span>.exports.Request = Request;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73"></a>
</div>
<div class="dox">
<div class="summary">
<p>Empty function</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">empty</span>(<span class="hljs-params"></span>) </span>{}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74"></a>
</div>
<div class="dox">
<div class="summary">
<p>XHR Polling constructor.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">XHR</span>(<span class="hljs-params">opts</span>) </span>{
	  Polling.call(<span class="hljs-keyword">this</span>, opts);
	  <span class="hljs-keyword">this</span>.requestTimeout = opts.requestTimeout;
	  <span class="hljs-keyword">this</span>.extraHeaders = opts.extraHeaders;

	  <span class="hljs-keyword">if</span> (global.location) {
	    <span class="hljs-keyword">var</span> isSSL = <span class="hljs-string">'https:'</span> === location.protocol;
	    <span class="hljs-keyword">var</span> port = location.port;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75"></a>
</div>
<p>some user agents have empty <code>location.port</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">if</span> (!port) {
	      port = isSSL ? <span class="hljs-number">443</span> : <span class="hljs-number">80</span>;
	    }

	    <span class="hljs-keyword">this</span>.xd = opts.hostname !== global.location.hostname || port !== opts.port;
	    <span class="hljs-keyword">this</span>.xs = opts.secure !== isSSL;
	  }
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76"></a>
</div>
<div class="dox">
<div class="summary">
<p>Inherits from Polling.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	inherit(XHR, Polling);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77"></a>
</div>
<div class="dox">
<div class="summary">
<p>XHR supports binary</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	XHR.prototype.supportsBinary = <span class="hljs-literal">true</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78"></a>
</div>
<div class="dox">
<div class="summary">
<p>Creates a request.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">method</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	XHR.prototype.request = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">opts</span>) </span>{
	  opts = opts || {};
	  opts.uri = <span class="hljs-keyword">this</span>.uri();
	  opts.xd = <span class="hljs-keyword">this</span>.xd;
	  opts.xs = <span class="hljs-keyword">this</span>.xs;
	  opts.agent = <span class="hljs-keyword">this</span>.agent || <span class="hljs-literal">false</span>;
	  opts.supportsBinary = <span class="hljs-keyword">this</span>.supportsBinary;
	  opts.enablesXDR = <span class="hljs-keyword">this</span>.enablesXDR;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79"></a>
</div>
<p>SSL options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  opts.pfx = <span class="hljs-keyword">this</span>.pfx;
	  opts.key = <span class="hljs-keyword">this</span>.key;
	  opts.passphrase = <span class="hljs-keyword">this</span>.passphrase;
	  opts.cert = <span class="hljs-keyword">this</span>.cert;
	  opts.ca = <span class="hljs-keyword">this</span>.ca;
	  opts.ciphers = <span class="hljs-keyword">this</span>.ciphers;
	  opts.rejectUnauthorized = <span class="hljs-keyword">this</span>.rejectUnauthorized;
	  opts.requestTimeout = <span class="hljs-keyword">this</span>.requestTimeout;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80"></a>
</div>
<p>other options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  opts.extraHeaders = <span class="hljs-keyword">this</span>.extraHeaders;

	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Request(opts);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sends data.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">String</span>
<span>to send.
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">called</span>
<span class="dox_type">Function</span>
<span>upon flush.
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	XHR.prototype.doWrite = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data, fn</span>) </span>{
	  <span class="hljs-keyword">var</span> isBinary = <span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">'string'</span> &amp;&amp; data !== <span class="hljs-literal">undefined</span>;
	  <span class="hljs-keyword">var</span> req = <span class="hljs-keyword">this</span>.request({ <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, <span class="hljs-attr">data</span>: data, <span class="hljs-attr">isBinary</span>: isBinary });
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  req.on(<span class="hljs-string">'success'</span>, fn);
	  req.on(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
	    self.onError(<span class="hljs-string">'xhr post error'</span>, err);
	  });
	  <span class="hljs-keyword">this</span>.sendXhr = req;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82"></a>
</div>
<div class="dox">
<div class="summary">
<p>Starts a poll cycle.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	XHR.prototype.doPoll = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  debug(<span class="hljs-string">'xhr poll'</span>);
	  <span class="hljs-keyword">var</span> req = <span class="hljs-keyword">this</span>.request();
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  req.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
	    self.onData(data);
	  });
	  req.on(<span class="hljs-string">'error'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
	    self.onError(<span class="hljs-string">'xhr poll error'</span>, err);
	  });
	  <span class="hljs-keyword">this</span>.pollXhr = req;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83"></a>
</div>
<div class="dox">
<div class="summary">
<p>Request constructor</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Request</span>(<span class="hljs-params">opts</span>) </span>{
	  <span class="hljs-keyword">this</span>.method = opts.method || <span class="hljs-string">'GET'</span>;
	  <span class="hljs-keyword">this</span>.uri = opts.uri;
	  <span class="hljs-keyword">this</span>.xd = !!opts.xd;
	  <span class="hljs-keyword">this</span>.xs = !!opts.xs;
	  <span class="hljs-keyword">this</span>.async = <span class="hljs-literal">false</span> !== opts.async;
	  <span class="hljs-keyword">this</span>.data = <span class="hljs-literal">undefined</span> !== opts.data ? opts.data : <span class="hljs-literal">null</span>;
	  <span class="hljs-keyword">this</span>.agent = opts.agent;
	  <span class="hljs-keyword">this</span>.isBinary = opts.isBinary;
	  <span class="hljs-keyword">this</span>.supportsBinary = opts.supportsBinary;
	  <span class="hljs-keyword">this</span>.enablesXDR = opts.enablesXDR;
	  <span class="hljs-keyword">this</span>.requestTimeout = opts.requestTimeout;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84"></a>
</div>
<p>SSL options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.pfx = opts.pfx;
	  <span class="hljs-keyword">this</span>.key = opts.key;
	  <span class="hljs-keyword">this</span>.passphrase = opts.passphrase;
	  <span class="hljs-keyword">this</span>.cert = opts.cert;
	  <span class="hljs-keyword">this</span>.ca = opts.ca;
	  <span class="hljs-keyword">this</span>.ciphers = opts.ciphers;
	  <span class="hljs-keyword">this</span>.rejectUnauthorized = opts.rejectUnauthorized;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85"></a>
</div>
<p>other options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.extraHeaders = opts.extraHeaders;

	  <span class="hljs-keyword">this</span>.create();
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86"></a>
</div>
<div class="dox">
<div class="summary">
<p>Mix in <code>Emitter</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Emitter(Request.prototype);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87"></a>
</div>
<div class="dox">
<div class="summary">
<p>Creates the XHR object and sends the request.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Request.prototype.create = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> opts = { <span class="hljs-attr">agent</span>: <span class="hljs-keyword">this</span>.agent, <span class="hljs-attr">xdomain</span>: <span class="hljs-keyword">this</span>.xd, <span class="hljs-attr">xscheme</span>: <span class="hljs-keyword">this</span>.xs, <span class="hljs-attr">enablesXDR</span>: <span class="hljs-keyword">this</span>.enablesXDR };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88"></a>
</div>
<p>SSL options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  opts.pfx = <span class="hljs-keyword">this</span>.pfx;
	  opts.key = <span class="hljs-keyword">this</span>.key;
	  opts.passphrase = <span class="hljs-keyword">this</span>.passphrase;
	  opts.cert = <span class="hljs-keyword">this</span>.cert;
	  opts.ca = <span class="hljs-keyword">this</span>.ca;
	  opts.ciphers = <span class="hljs-keyword">this</span>.ciphers;
	  opts.rejectUnauthorized = <span class="hljs-keyword">this</span>.rejectUnauthorized;

	  <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">this</span>.xhr = <span class="hljs-keyword">new</span> XMLHttpRequest(opts);
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

	  <span class="hljs-keyword">try</span> {
	    debug(<span class="hljs-string">'xhr open %s: %s'</span>, <span class="hljs-keyword">this</span>.method, <span class="hljs-keyword">this</span>.uri);
	    xhr.open(<span class="hljs-keyword">this</span>.method, <span class="hljs-keyword">this</span>.uri, <span class="hljs-keyword">this</span>.async);
	    <span class="hljs-keyword">try</span> {
	      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.extraHeaders) {
	        xhr.setDisableHeaderCheck &amp;&amp; xhr.setDisableHeaderCheck(<span class="hljs-literal">true</span>);
	        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.extraHeaders) {
	          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.extraHeaders.hasOwnProperty(i)) {
	            xhr.setRequestHeader(i, <span class="hljs-keyword">this</span>.extraHeaders[i]);
	          }
	        }
	      }
	    } <span class="hljs-keyword">catch</span> (e) {}

	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'POST'</span> === <span class="hljs-keyword">this</span>.method) {
	      <span class="hljs-keyword">try</span> {
	        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isBinary) {
	          xhr.setRequestHeader(<span class="hljs-string">'Content-type'</span>, <span class="hljs-string">'application/octet-stream'</span>);
	        } <span class="hljs-keyword">else</span> {
	          xhr.setRequestHeader(<span class="hljs-string">'Content-type'</span>, <span class="hljs-string">'text/plain;charset=UTF-8'</span>);
	        }
	      } <span class="hljs-keyword">catch</span> (e) {}
	    }

	    <span class="hljs-keyword">try</span> {
	      xhr.setRequestHeader(<span class="hljs-string">'Accept'</span>, <span class="hljs-string">'*/*'</span>);
	    } <span class="hljs-keyword">catch</span> (e) {}

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.supportsBinary) {
	      xhr.responseType = <span class="hljs-string">'arraybuffer'</span>;
	    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89"></a>
</div>
<p>ie6 check</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'withCredentials'</span> <span class="hljs-keyword">in</span> xhr) {
	      xhr.withCredentials = <span class="hljs-literal">true</span>;
	    }

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.requestTimeout) {
	      xhr.timeout = <span class="hljs-keyword">this</span>.requestTimeout;
	    }

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasXDR()) {
	      xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	        self.onLoad();
	      };
	      xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	        self.onError(xhr.responseText);
	      };
	    } <span class="hljs-keyword">else</span> {
	      xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	        <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">2</span>) {
	          <span class="hljs-keyword">try</span> {
	            <span class="hljs-keyword">var</span> contentType = xhr.getResponseHeader(<span class="hljs-string">'Content-Type'</span>);
	            <span class="hljs-keyword">if</span> (contentType !== <span class="hljs-string">'application/octet-stream'</span>) {
	              xhr.responseType = <span class="hljs-string">'text'</span>;
	            }
	          } <span class="hljs-keyword">catch</span> (e) {}
	        }
	        <span class="hljs-keyword">if</span> (<span class="hljs-number">4</span> !== xhr.readyState) <span class="hljs-keyword">return</span>;
	        <span class="hljs-keyword">if</span> (<span class="hljs-number">200</span> === xhr.status || <span class="hljs-number">1223</span> === xhr.status) {
	          self.onLoad();
	        } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90"></a>
</div>
<p>make sure the <code>error</code> event handler that's user-set
does not throw in the same tick and gets caught here</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	          setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	            self.onError(xhr.status);
	          }, <span class="hljs-number">0</span>);
	        }
	      };
	    }

	    debug(<span class="hljs-string">'xhr data %s'</span>, <span class="hljs-keyword">this</span>.data);
	    xhr.send(<span class="hljs-keyword">this</span>.data);
	  } <span class="hljs-keyword">catch</span> (e) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91"></a>
</div>
<p>Need to defer since .create() is called directly fhrom the constructor
and thus the 'error' event can only be only bound <em>after</em> this exception
occurs.  Therefore, also, we cannot throw here at all.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	      self.onError(e);
	    }, <span class="hljs-number">0</span>);
	    <span class="hljs-keyword">return</span>;
	  }

	  <span class="hljs-keyword">if</span> (global.document) {
	    <span class="hljs-keyword">this</span>.index = Request.requestsCount++;
	    Request.requests[<span class="hljs-keyword">this</span>.index] = <span class="hljs-keyword">this</span>;
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called upon successful response.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Request.prototype.onSuccess = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'success'</span>);
	  <span class="hljs-keyword">this</span>.cleanup();
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called if we have data.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Request.prototype.onData = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'data'</span>, data);
	  <span class="hljs-keyword">this</span>.onSuccess();
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called upon error.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Request.prototype.onError = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'error'</span>, err);
	  <span class="hljs-keyword">this</span>.cleanup(<span class="hljs-literal">true</span>);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95"></a>
</div>
<div class="dox">
<div class="summary">
<p>Cleans up house.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Request.prototype.cleanup = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fromError</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.xhr || <span class="hljs-literal">null</span> === <span class="hljs-keyword">this</span>.xhr) {
	    <span class="hljs-keyword">return</span>;
	  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96"></a>
</div>
<p>xmlhttprequest</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.hasXDR()) {
	    <span class="hljs-keyword">this</span>.xhr.onload = <span class="hljs-keyword">this</span>.xhr.onerror = empty;
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">this</span>.xhr.onreadystatechange = empty;
	  }

	  <span class="hljs-keyword">if</span> (fromError) {
	    <span class="hljs-keyword">try</span> {
	      <span class="hljs-keyword">this</span>.xhr.abort();
	    } <span class="hljs-keyword">catch</span> (e) {}
	  }

	  <span class="hljs-keyword">if</span> (global.document) {
	    <span class="hljs-keyword">delete</span> Request.requests[<span class="hljs-keyword">this</span>.index];
	  }

	  <span class="hljs-keyword">this</span>.xhr = <span class="hljs-literal">null</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called upon load.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Request.prototype.onLoad = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> data;
	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">var</span> contentType;
	    <span class="hljs-keyword">try</span> {
	      contentType = <span class="hljs-keyword">this</span>.xhr.getResponseHeader(<span class="hljs-string">'Content-Type'</span>);
	    } <span class="hljs-keyword">catch</span> (e) {}
	    <span class="hljs-keyword">if</span> (contentType === <span class="hljs-string">'application/octet-stream'</span>) {
	      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.xhr.responseType === <span class="hljs-string">'arraybuffer'</span>) {
	        data = <span class="hljs-keyword">this</span>.xhr.response || <span class="hljs-keyword">this</span>.xhr.responseText;
	      } <span class="hljs-keyword">else</span> {
	        data = <span class="hljs-built_in">String</span>.fromCharCode.apply(<span class="hljs-literal">null</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-keyword">this</span>.xhr.response));
	      }
	    } <span class="hljs-keyword">else</span> {
	      data = <span class="hljs-keyword">this</span>.xhr.responseText;
	    }
	  } <span class="hljs-keyword">catch</span> (e) {
	    <span class="hljs-keyword">this</span>.onError(e);
	  }
	  <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != data) {
	    <span class="hljs-keyword">this</span>.onData(data);
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if it has XDomainRequest.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Request.prototype.hasXDR = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">return</span> <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> global.XDomainRequest &amp;&amp; !<span class="hljs-keyword">this</span>.xs &amp;&amp; <span class="hljs-keyword">this</span>.enablesXDR;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99"></a>
</div>
<div class="dox">
<div class="summary">
<p>Aborts the request.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Request.prototype.abort = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">this</span>.cleanup();
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100"></a>
</div>
<div class="dox">
<div class="summary">
<p>Aborts pending requests when unloading the window. This is needed to prevent
memory leaks (e.g. when using IE) and to ensure that no spurious error is
emitted.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Request.requestsCount = <span class="hljs-number">0</span>;
	Request.requests = {};

	<span class="hljs-keyword">if</span> (global.document) {
	  <span class="hljs-keyword">if</span> (global.attachEvent) {
	    global.attachEvent(<span class="hljs-string">'onunload'</span>, unloadHandler);
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (global.addEventListener) {
	    global.addEventListener(<span class="hljs-string">'beforeunload'</span>, unloadHandler, <span class="hljs-literal">false</span>);
	  }
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unloadHandler</span>(<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> Request.requests) {
	    <span class="hljs-keyword">if</span> (Request.requests.hasOwnProperty(i)) {
	      Request.requests[i].abort();
	    }
	  }
	}
	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 6 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{
<span class="hljs-meta">
	'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module dependencies.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> Transport = __webpack_require__(<span class="hljs-number">7</span>);
	<span class="hljs-keyword">var</span> parseqs = __webpack_require__(<span class="hljs-number">19</span>);
	<span class="hljs-keyword">var</span> parser = __webpack_require__(<span class="hljs-number">8</span>);
	<span class="hljs-keyword">var</span> inherit = __webpack_require__(<span class="hljs-number">20</span>);
	<span class="hljs-keyword">var</span> yeast = __webpack_require__(<span class="hljs-number">21</span>);
	<span class="hljs-keyword">var</span> debug = __webpack_require__(<span class="hljs-number">22</span>)(<span class="hljs-string">'engine.io-client:polling'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module exports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = Polling;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103"></a>
</div>
<div class="dox">
<div class="summary">
<p>Is XHR2 supported?</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> hasXHR2 = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> XMLHttpRequest = __webpack_require__(<span class="hljs-number">3</span>);
	  <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest({ <span class="hljs-attr">xdomain</span>: <span class="hljs-literal">false</span> });
	  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> != xhr.responseType;
	}();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104"></a>
</div>
<div class="dox">
<div class="summary">
<p>Polling interface.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Polling</span>(<span class="hljs-params">opts</span>) </span>{
	  <span class="hljs-keyword">var</span> forceBase64 = opts &amp;&amp; opts.forceBase64;
	  <span class="hljs-keyword">if</span> (!hasXHR2 || forceBase64) {
	    <span class="hljs-keyword">this</span>.supportsBinary = <span class="hljs-literal">false</span>;
	  }
	  Transport.call(<span class="hljs-keyword">this</span>, opts);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105"></a>
</div>
<div class="dox">
<div class="summary">
<p>Inherits from Transport.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	inherit(Polling, Transport);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106"></a>
</div>
<div class="dox">
<div class="summary">
<p>Transport name.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Polling.prototype.name = <span class="hljs-string">'polling'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107"></a>
</div>
<div class="dox">
<div class="summary">
<p>Opens the socket (triggers polling). We write a PING message to determine
when the transport is open.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Polling.prototype.doOpen = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">this</span>.poll();
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108"></a>
</div>
<div class="dox">
<div class="summary">
<p>Pauses polling.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
<span class="dox_type">Function</span>
<span>upon buffers are flushed and transport is paused
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Polling.prototype.pause = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">onPause</span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

	  <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">'pausing'</span>;

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pause</span>(<span class="hljs-params"></span>) </span>{
	    debug(<span class="hljs-string">'paused'</span>);
	    self.readyState = <span class="hljs-string">'paused'</span>;
	    onPause();
	  }

	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.polling || !<span class="hljs-keyword">this</span>.writable) {
	    <span class="hljs-keyword">var</span> total = <span class="hljs-number">0</span>;

	    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.polling) {
	      debug(<span class="hljs-string">'we are currently polling - waiting to pause'</span>);
	      total++;
	      <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'pollComplete'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	        debug(<span class="hljs-string">'pre-pause polling complete'</span>);
	        --total || pause();
	      });
	    }

	    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.writable) {
	      debug(<span class="hljs-string">'we are currently writing - waiting to pause'</span>);
	      total++;
	      <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'drain'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	        debug(<span class="hljs-string">'pre-pause writing complete'</span>);
	        --total || pause();
	      });
	    }
	  } <span class="hljs-keyword">else</span> {
	    pause();
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109"></a>
</div>
<div class="dox">
<div class="summary">
<p>Starts polling cycle.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Polling.prototype.poll = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  debug(<span class="hljs-string">'polling'</span>);
	  <span class="hljs-keyword">this</span>.polling = <span class="hljs-literal">true</span>;
	  <span class="hljs-keyword">this</span>.doPoll();
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'poll'</span>);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110"></a>
</div>
<div class="dox">
<div class="summary">
<p>Overloads onData to detect payloads.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Polling.prototype.onData = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  debug(<span class="hljs-string">'polling got data %s'</span>, data);
	  <span class="hljs-keyword">var</span> callback = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callback</span>(<span class="hljs-params">packet, index, total</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111"></a>
</div>
<p>if its the first message we consider the transport open</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'opening'</span> === self.readyState) {
	      self.onOpen();
	    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112"></a>
</div>
<p>if its a close packet, we close the ongoing requests</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'close'</span> === packet.type) {
	      self.onClose();
	      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113"></a>
</div>
<p>otherwise bypass onData and handle the message</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    self.onPacket(packet);
	  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-114" id="section-114"></a>
</div>
<p>decode payload</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  parser.decodePayload(data, <span class="hljs-keyword">this</span>.socket.binaryType, callback);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-115" id="section-115"></a>
</div>
<p>if an event did not trigger closing</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'closed'</span> !== <span class="hljs-keyword">this</span>.readyState) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-116" id="section-116"></a>
</div>
<p>if we got data we're not polling</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">this</span>.polling = <span class="hljs-literal">false</span>;
	    <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'pollComplete'</span>);

	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'open'</span> === <span class="hljs-keyword">this</span>.readyState) {
	      <span class="hljs-keyword">this</span>.poll();
	    } <span class="hljs-keyword">else</span> {
	      debug(<span class="hljs-string">'ignoring poll - transport state "%s"'</span>, <span class="hljs-keyword">this</span>.readyState);
	    }
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-117" id="section-117"></a>
</div>
<div class="dox">
<div class="summary">
<p>For polling, send a close packet.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Polling.prototype.doClose = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span>(<span class="hljs-params"></span>) </span>{
	    debug(<span class="hljs-string">'writing close packet'</span>);
	    self.write([{ <span class="hljs-attr">type</span>: <span class="hljs-string">'close'</span> }]);
	  }

	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'open'</span> === <span class="hljs-keyword">this</span>.readyState) {
	    debug(<span class="hljs-string">'transport open - closing'</span>);
	    close();
	  } <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-118" id="section-118"></a>
</div>
<p>in case we're trying to close while
handshaking is in progress (GH-164)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    debug(<span class="hljs-string">'transport not open - deferring close'</span>);
	    <span class="hljs-keyword">this</span>.once(<span class="hljs-string">'open'</span>, close);
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-119" id="section-119"></a>
</div>
<div class="dox">
<div class="summary">
<p>Writes a packets payload.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">Array</span>
<span>packets
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">drain</span>
<span class="dox_type">Function</span>
<span>callback
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Polling.prototype.write = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">packets</span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  <span class="hljs-keyword">this</span>.writable = <span class="hljs-literal">false</span>;
	  <span class="hljs-keyword">var</span> callbackfn = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callbackfn</span>(<span class="hljs-params"></span>) </span>{
	    self.writable = <span class="hljs-literal">true</span>;
	    self.emit(<span class="hljs-string">'drain'</span>);
	  };

	  parser.encodePayload(packets, <span class="hljs-keyword">this</span>.supportsBinary, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
	    self.doWrite(data, callbackfn);
	  });
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-120" id="section-120"></a>
</div>
<div class="dox">
<div class="summary">
<p>Generates uri for connection.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Polling.prototype.uri = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> query = <span class="hljs-keyword">this</span>.query || {};
	  <span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">this</span>.secure ? <span class="hljs-string">'https'</span> : <span class="hljs-string">'http'</span>;
	  <span class="hljs-keyword">var</span> port = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121"></a>
</div>
<p>cache busting is forced</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-literal">false</span> !== <span class="hljs-keyword">this</span>.timestampRequests) {
	    query[<span class="hljs-keyword">this</span>.timestampParam] = yeast();
	  }

	  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.supportsBinary &amp;&amp; !query.sid) {
	    query.b64 = <span class="hljs-number">1</span>;
	  }

	  query = parseqs.encode(query);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122"></a>
</div>
<p>avoid port if default for schema</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.port &amp;&amp; (<span class="hljs-string">'https'</span> === schema &amp;&amp; <span class="hljs-built_in">Number</span>(<span class="hljs-keyword">this</span>.port) !== <span class="hljs-number">443</span> || <span class="hljs-string">'http'</span> === schema &amp;&amp; <span class="hljs-built_in">Number</span>(<span class="hljs-keyword">this</span>.port) !== <span class="hljs-number">80</span>)) {
	    port = <span class="hljs-string">':'</span> + <span class="hljs-keyword">this</span>.port;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123"></a>
</div>
<p>prepend ? to query</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (query.length) {
	    query = <span class="hljs-string">'?'</span> + query;
	  }

	  <span class="hljs-keyword">var</span> ipv6 = <span class="hljs-keyword">this</span>.hostname.indexOf(<span class="hljs-string">':'</span>) !== <span class="hljs-number">-1</span>;
	  <span class="hljs-keyword">return</span> schema + <span class="hljs-string">'://'</span> + (ipv6 ? <span class="hljs-string">'['</span> + <span class="hljs-keyword">this</span>.hostname + <span class="hljs-string">']'</span> : <span class="hljs-keyword">this</span>.hostname) + port + <span class="hljs-keyword">this</span>.path + query;
	};

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 7 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{
<span class="hljs-meta">
	'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module dependencies.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> parser = __webpack_require__(<span class="hljs-number">8</span>);
	<span class="hljs-keyword">var</span> Emitter = __webpack_require__(<span class="hljs-number">18</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module exports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = Transport;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-126" id="section-126"></a>
</div>
<div class="dox">
<div class="summary">
<p>Transport abstract constructor.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options.</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Transport</span>(<span class="hljs-params">opts</span>) </span>{
	  <span class="hljs-keyword">this</span>.path = opts.path;
	  <span class="hljs-keyword">this</span>.hostname = opts.hostname;
	  <span class="hljs-keyword">this</span>.port = opts.port;
	  <span class="hljs-keyword">this</span>.secure = opts.secure;
	  <span class="hljs-keyword">this</span>.query = opts.query;
	  <span class="hljs-keyword">this</span>.timestampParam = opts.timestampParam;
	  <span class="hljs-keyword">this</span>.timestampRequests = opts.timestampRequests;
	  <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">''</span>;
	  <span class="hljs-keyword">this</span>.agent = opts.agent || <span class="hljs-literal">false</span>;
	  <span class="hljs-keyword">this</span>.socket = opts.socket;
	  <span class="hljs-keyword">this</span>.enablesXDR = opts.enablesXDR;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127"></a>
</div>
<p>SSL options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.pfx = opts.pfx;
	  <span class="hljs-keyword">this</span>.key = opts.key;
	  <span class="hljs-keyword">this</span>.passphrase = opts.passphrase;
	  <span class="hljs-keyword">this</span>.cert = opts.cert;
	  <span class="hljs-keyword">this</span>.ca = opts.ca;
	  <span class="hljs-keyword">this</span>.ciphers = opts.ciphers;
	  <span class="hljs-keyword">this</span>.rejectUnauthorized = opts.rejectUnauthorized;
	  <span class="hljs-keyword">this</span>.forceNode = opts.forceNode;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-128" id="section-128"></a>
</div>
<p>other options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.extraHeaders = opts.extraHeaders;
	  <span class="hljs-keyword">this</span>.localAddress = opts.localAddress;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-129" id="section-129"></a>
</div>
<div class="dox">
<div class="summary">
<p>Mix in <code>Emitter</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Emitter(Transport.prototype);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-130" id="section-130"></a>
</div>
<div class="dox">
<div class="summary">
<p>Emits an error.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">str</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Transport</span>
<span>for chaining
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Transport.prototype.onError = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">msg, desc</span>) </span>{
	  <span class="hljs-keyword">var</span> err = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(msg);
	  err.type = <span class="hljs-string">'TransportError'</span>;
	  err.description = desc;
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'error'</span>, err);
	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-131" id="section-131"></a>
</div>
<div class="dox">
<div class="summary">
<p>Opens the transport.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Transport.prototype.open = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'closed'</span> === <span class="hljs-keyword">this</span>.readyState || <span class="hljs-string">''</span> === <span class="hljs-keyword">this</span>.readyState) {
	    <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">'opening'</span>;
	    <span class="hljs-keyword">this</span>.doOpen();
	  }

	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-132" id="section-132"></a>
</div>
<div class="dox">
<div class="summary">
<p>Closes the transport.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Transport.prototype.close = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'opening'</span> === <span class="hljs-keyword">this</span>.readyState || <span class="hljs-string">'open'</span> === <span class="hljs-keyword">this</span>.readyState) {
	    <span class="hljs-keyword">this</span>.doClose();
	    <span class="hljs-keyword">this</span>.onClose();
	  }

	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-133" id="section-133"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sends multiple packets.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">packets</span>
<span class="dox_type">Array</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Transport.prototype.send = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">packets</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'open'</span> === <span class="hljs-keyword">this</span>.readyState) {
	    <span class="hljs-keyword">this</span>.write(packets);
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Transport not open'</span>);
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-134" id="section-134"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called upon open</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Transport.prototype.onOpen = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">'open'</span>;
	  <span class="hljs-keyword">this</span>.writable = <span class="hljs-literal">true</span>;
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'open'</span>);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-135" id="section-135"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called with data.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Transport.prototype.onData = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
	  <span class="hljs-keyword">var</span> packet = parser.decodePacket(data, <span class="hljs-keyword">this</span>.socket.binaryType);
	  <span class="hljs-keyword">this</span>.onPacket(packet);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-136" id="section-136"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called with a decoded packet.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Transport.prototype.onPacket = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">packet</span>) </span>{
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'packet'</span>, packet);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-137" id="section-137"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called upon close.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Transport.prototype.onClose = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">this</span>.readyState = <span class="hljs-string">'closed'</span>;
	  <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'close'</span>);
	};

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 8 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-comment">/**
	 * Module dependencies.
	 */</span>

	<span class="hljs-keyword">var</span> keys = __webpack_require__(<span class="hljs-number">9</span>);
	<span class="hljs-keyword">var</span> hasBinary = __webpack_require__(<span class="hljs-number">10</span>);
	<span class="hljs-keyword">var</span> sliceBuffer = __webpack_require__(<span class="hljs-number">12</span>);
	<span class="hljs-keyword">var</span> after = __webpack_require__(<span class="hljs-number">13</span>);
	<span class="hljs-keyword">var</span> utf8 = __webpack_require__(<span class="hljs-number">14</span>);

	<span class="hljs-keyword">var</span> base64encoder;
	<span class="hljs-keyword">if</span> (global &amp;&amp; global.ArrayBuffer) {
	  base64encoder = __webpack_require__(<span class="hljs-number">16</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-138" id="section-138"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if we are running an android browser. That requires us to use
ArrayBuffer with polling transports...</p>
</div>
<div class="body">
<p>http://ghinda.net/jpeg-blob-ajax-android/</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> isAndroid = <span class="hljs-keyword">typeof</span> navigator !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-regexp">/Android/i</span>.test(navigator.userAgent);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-139" id="section-139"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if we are running in PhantomJS.
Uploading a Blob with PhantomJS does not work correctly, as reported here:
https://github.com/ariya/phantomjs/issues/11395</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Type</div>
<div class="dox_tag_detail">
<span class="dox_type">oolea</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">var</span> isPhantomJS = <span class="hljs-keyword">typeof</span> navigator !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-regexp">/PhantomJS/i</span>.test(navigator.userAgent);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-140" id="section-140"></a>
</div>
<div class="dox">
<div class="summary">
<p>When true, avoids using Blobs to encode payloads.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Type</div>
<div class="dox_tag_detail">
<span class="dox_type">oolea</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">var</span> dontSendBlobs = isAndroid || isPhantomJS;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-141" id="section-141"></a>
</div>
<div class="dox">
<div class="summary">
<p>Current protocol version.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.protocol = <span class="hljs-number">3</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-142" id="section-142"></a>
</div>
<div class="dox">
<div class="summary">
<p>Packet types.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> packets = exports.packets = {
	    <span class="hljs-attr">open</span>:     <span class="hljs-number">0</span>    <span class="hljs-comment">// non-ws</span>
	  , <span class="hljs-attr">close</span>:    <span class="hljs-number">1</span>    <span class="hljs-comment">// non-ws</span>
	  , <span class="hljs-attr">ping</span>:     <span class="hljs-number">2</span>
	  , <span class="hljs-attr">pong</span>:     <span class="hljs-number">3</span>
	  , <span class="hljs-attr">message</span>:  <span class="hljs-number">4</span>
	  , <span class="hljs-attr">upgrade</span>:  <span class="hljs-number">5</span>
	  , <span class="hljs-attr">noop</span>:     <span class="hljs-number">6</span>
	};

	<span class="hljs-keyword">var</span> packetslist = keys(packets);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-143" id="section-143"></a>
</div>
<div class="dox">
<div class="summary">
<p>Premade error packet.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> err = { <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>, <span class="hljs-attr">data</span>: <span class="hljs-string">'parser error'</span> };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-144" id="section-144"></a>
</div>
<div class="dox">
<div class="summary">
<p>Create a blob api even for blob builder when vendor prefixes exist</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> Blob = __webpack_require__(<span class="hljs-number">17</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-145" id="section-145"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encodes a packet.</p>
</div>
<div class="body">
<p><packet type id> [ <data> ]</p>
<p>Example:</p>
<pre><code>5hello world
3
4
</code></pre>
<p>Binary is encoded in an identical principle</p>
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.encodePacket = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">packet, supportsBinary, utf8encode, callback</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> supportsBinary === <span class="hljs-string">'function'</span>) {
	    callback = supportsBinary;
	    supportsBinary = <span class="hljs-literal">false</span>;
	  }

	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> utf8encode === <span class="hljs-string">'function'</span>) {
	    callback = utf8encode;
	    utf8encode = <span class="hljs-literal">null</span>;
	  }

	  <span class="hljs-keyword">var</span> data = (packet.data === <span class="hljs-literal">undefined</span>)
	    ? <span class="hljs-literal">undefined</span>
	    : packet.data.buffer || packet.data;

	  <span class="hljs-keyword">if</span> (global.ArrayBuffer &amp;&amp; data <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span>) {
	    <span class="hljs-keyword">return</span> encodeArrayBuffer(packet, supportsBinary, callback);
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Blob &amp;&amp; data <span class="hljs-keyword">instanceof</span> global.Blob) {
	    <span class="hljs-keyword">return</span> encodeBlob(packet, supportsBinary, callback);
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-146" id="section-146"></a>
</div>
<p>might be an object with { base64: true, data: dataAsBase64String }</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (data &amp;&amp; data.base64) {
	    <span class="hljs-keyword">return</span> encodeBase64Object(packet, callback);
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-147" id="section-147"></a>
</div>
<p>Sending data as a utf-8 string</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> encoded = packets[packet.type];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-148" id="section-148"></a>
</div>
<p>data fragment is optional</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-literal">undefined</span> !== packet.data) {
	    encoded += utf8encode ? utf8.encode(<span class="hljs-built_in">String</span>(packet.data), { <span class="hljs-attr">strict</span>: <span class="hljs-literal">false</span> }) : <span class="hljs-built_in">String</span>(packet.data);
	  }

	  <span class="hljs-keyword">return</span> callback(<span class="hljs-string">''</span> + encoded);

	};

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeBase64Object</span>(<span class="hljs-params">packet, callback</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-149" id="section-149"></a>
</div>
<p>packet data is an object { base64: true, data: dataAsBase64String }</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> message = <span class="hljs-string">'b'</span> + exports.packets[packet.type] + packet.data.data;
	  <span class="hljs-keyword">return</span> callback(message);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-150" id="section-150"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encode packet helpers for binary types</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeArrayBuffer</span>(<span class="hljs-params">packet, supportsBinary, callback</span>) </span>{
	  <span class="hljs-keyword">if</span> (!supportsBinary) {
	    <span class="hljs-keyword">return</span> exports.encodeBase64Packet(packet, callback);
	  }

	  <span class="hljs-keyword">var</span> data = packet.data;
	  <span class="hljs-keyword">var</span> contentArray = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(data);
	  <span class="hljs-keyword">var</span> resultBuffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-number">1</span> + data.byteLength);

	  resultBuffer[<span class="hljs-number">0</span>] = packets[packet.type];
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; contentArray.length; i++) {
	    resultBuffer[i+<span class="hljs-number">1</span>] = contentArray[i];
	  }

	  <span class="hljs-keyword">return</span> callback(resultBuffer.buffer);
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeBlobAsArrayBuffer</span>(<span class="hljs-params">packet, supportsBinary, callback</span>) </span>{
	  <span class="hljs-keyword">if</span> (!supportsBinary) {
	    <span class="hljs-keyword">return</span> exports.encodeBase64Packet(packet, callback);
	  }

	  <span class="hljs-keyword">var</span> fr = <span class="hljs-keyword">new</span> FileReader();
	  fr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	    packet.data = fr.result;
	    exports.encodePacket(packet, supportsBinary, <span class="hljs-literal">true</span>, callback);
	  };
	  <span class="hljs-keyword">return</span> fr.readAsArrayBuffer(packet.data);
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeBlob</span>(<span class="hljs-params">packet, supportsBinary, callback</span>) </span>{
	  <span class="hljs-keyword">if</span> (!supportsBinary) {
	    <span class="hljs-keyword">return</span> exports.encodeBase64Packet(packet, callback);
	  }

	  <span class="hljs-keyword">if</span> (dontSendBlobs) {
	    <span class="hljs-keyword">return</span> encodeBlobAsArrayBuffer(packet, supportsBinary, callback);
	  }

	  <span class="hljs-keyword">var</span> length = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-number">1</span>);
	  length[<span class="hljs-number">0</span>] = packets[packet.type];
	  <span class="hljs-keyword">var</span> blob = <span class="hljs-keyword">new</span> Blob([length.buffer, packet.data]);

	  <span class="hljs-keyword">return</span> callback(blob);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-151" id="section-151"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encodes a packet with binary data in a base64 string</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">packet,</span>
<span class="dox_type">Object</span>
<span>has <code>type</code> and <code>data</code>
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">String</span>
<span>base64 encoded message
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.encodeBase64Packet = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">packet, callback</span>) </span>{
	  <span class="hljs-keyword">var</span> message = <span class="hljs-string">'b'</span> + exports.packets[packet.type];
	  <span class="hljs-keyword">if</span> (Blob &amp;&amp; packet.data <span class="hljs-keyword">instanceof</span> global.Blob) {
	    <span class="hljs-keyword">var</span> fr = <span class="hljs-keyword">new</span> FileReader();
	    fr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	      <span class="hljs-keyword">var</span> b64 = fr.result.split(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
	      callback(message + b64);
	    };
	    <span class="hljs-keyword">return</span> fr.readAsDataURL(packet.data);
	  }

	  <span class="hljs-keyword">var</span> b64data;
	  <span class="hljs-keyword">try</span> {
	    b64data = <span class="hljs-built_in">String</span>.fromCharCode.apply(<span class="hljs-literal">null</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(packet.data));
	  } <span class="hljs-keyword">catch</span> (e) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-152" id="section-152"></a>
</div>
<p>iPhone Safari doesn't let you apply with typed arrays</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">var</span> typed = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(packet.data);
	    <span class="hljs-keyword">var</span> basic = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(typed.length);
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; typed.length; i++) {
	      basic[i] = typed[i];
	    }
	    b64data = <span class="hljs-built_in">String</span>.fromCharCode.apply(<span class="hljs-literal">null</span>, basic);
	  }
	  message += global.btoa(b64data);
	  <span class="hljs-keyword">return</span> callback(message);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-153" id="section-153"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decodes a packet. Changes format to Blob if requested.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
<span>with <code>type</code> and <code>data</code> (if any)
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.decodePacket = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data, binaryType, utf8decode</span>) </span>{
	  <span class="hljs-keyword">if</span> (data === <span class="hljs-literal">undefined</span>) {
	    <span class="hljs-keyword">return</span> err;
	  }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-154" id="section-154"></a>
</div>
<p>String data</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'string'</span>) {
	    <span class="hljs-keyword">if</span> (data.charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'b'</span>) {
	      <span class="hljs-keyword">return</span> exports.decodeBase64Packet(data.substr(<span class="hljs-number">1</span>), binaryType);
	    }

	    <span class="hljs-keyword">if</span> (utf8decode) {
	      data = tryDecode(data);
	      <span class="hljs-keyword">if</span> (data === <span class="hljs-literal">false</span>) {
	        <span class="hljs-keyword">return</span> err;
	      }
	    }
	    <span class="hljs-keyword">var</span> type = data.charAt(<span class="hljs-number">0</span>);

	    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Number</span>(type) != type || !packetslist[type]) {
	      <span class="hljs-keyword">return</span> err;
	    }

	    <span class="hljs-keyword">if</span> (data.length &gt; <span class="hljs-number">1</span>) {
	      <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: packetslist[type], <span class="hljs-attr">data</span>: data.substring(<span class="hljs-number">1</span>) };
	    } <span class="hljs-keyword">else</span> {
	      <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: packetslist[type] };
	    }
	  }

	  <span class="hljs-keyword">var</span> asArray = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(data);
	  <span class="hljs-keyword">var</span> type = asArray[<span class="hljs-number">0</span>];
	  <span class="hljs-keyword">var</span> rest = sliceBuffer(data, <span class="hljs-number">1</span>);
	  <span class="hljs-keyword">if</span> (Blob &amp;&amp; binaryType === <span class="hljs-string">'blob'</span>) {
	    rest = <span class="hljs-keyword">new</span> Blob([rest]);
	  }
	  <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: packetslist[type], <span class="hljs-attr">data</span>: rest };
	};

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tryDecode</span>(<span class="hljs-params">data</span>) </span>{
	  <span class="hljs-keyword">try</span> {
	    data = utf8.decode(data, { <span class="hljs-attr">strict</span>: <span class="hljs-literal">false</span> });
	  } <span class="hljs-keyword">catch</span> (e) {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	  }
	  <span class="hljs-keyword">return</span> data;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-155" id="section-155"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decodes a packet encoded in a base64 string</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">base64</span>
<span class="dox_type">String</span>
<span>encoded message
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
<span>with <code>type</code> and <code>data</code> (if any)
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.decodeBase64Packet = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg, binaryType</span>) </span>{
	  <span class="hljs-keyword">var</span> type = packetslist[msg.charAt(<span class="hljs-number">0</span>)];
	  <span class="hljs-keyword">if</span> (!base64encoder) {
	    <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: type, <span class="hljs-attr">data</span>: { <span class="hljs-attr">base64</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">data</span>: msg.substr(<span class="hljs-number">1</span>) } };
	  }

	  <span class="hljs-keyword">var</span> data = base64encoder.decode(msg.substr(<span class="hljs-number">1</span>));

	  <span class="hljs-keyword">if</span> (binaryType === <span class="hljs-string">'blob'</span> &amp;&amp; Blob) {
	    data = <span class="hljs-keyword">new</span> Blob([data]);
	  }

	  <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: type, <span class="hljs-attr">data</span>: data };
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-156" id="section-156"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encodes multiple messages (payload).</p>
</div>
<div class="body">
<p><length>:data</p>
<p>Example:</p>
<pre><code>11:hello world2:hi
</code></pre>
<p>If any contents are binary, they will be encoded as base64 strings. Base64
encoded strings are marked with a b before the length specifier</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">packets</span>
<span class="dox_type">Array</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.encodePayload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">packets, supportsBinary, callback</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> supportsBinary === <span class="hljs-string">'function'</span>) {
	    callback = supportsBinary;
	    supportsBinary = <span class="hljs-literal">null</span>;
	  }

	  <span class="hljs-keyword">var</span> isBinary = hasBinary(packets);

	  <span class="hljs-keyword">if</span> (supportsBinary &amp;&amp; isBinary) {
	    <span class="hljs-keyword">if</span> (Blob &amp;&amp; !dontSendBlobs) {
	      <span class="hljs-keyword">return</span> exports.encodePayloadAsBlob(packets, callback);
	    }

	    <span class="hljs-keyword">return</span> exports.encodePayloadAsArrayBuffer(packets, callback);
	  }

	  <span class="hljs-keyword">if</span> (!packets.length) {
	    <span class="hljs-keyword">return</span> callback(<span class="hljs-string">'0:'</span>);
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setLengthHeader</span>(<span class="hljs-params">message</span>) </span>{
	    <span class="hljs-keyword">return</span> message.length + <span class="hljs-string">':'</span> + message;
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeOne</span>(<span class="hljs-params">packet, doneCallback</span>) </span>{
	    exports.encodePacket(packet, !isBinary ? <span class="hljs-literal">false</span> : supportsBinary, <span class="hljs-literal">false</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) </span>{
	      doneCallback(<span class="hljs-literal">null</span>, setLengthHeader(message));
	    });
	  }

	  map(packets, encodeOne, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, results</span>) </span>{
	    <span class="hljs-keyword">return</span> callback(results.join(<span class="hljs-string">''</span>));
	  });
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-157" id="section-157"></a>
</div>
<div class="dox">
<div class="summary">
<p>Async array map using after</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map</span>(<span class="hljs-params">ary, each, done</span>) </span>{
	  <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(ary.length);
	  <span class="hljs-keyword">var</span> next = after(ary.length, done);

	  <span class="hljs-keyword">var</span> eachWithIndex = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i, el, cb</span>) </span>{
	    each(el, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, msg</span>) </span>{
	      result[i] = msg;
	      cb(error, result);
	    });
	  };

	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; ary.length; i++) {
	    eachWithIndex(i, ary[i], next);
	  }
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-158" id="section-158"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decodes data when a payload is maybe expected. Possible binary contents are
decoded from their base64 representation</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data,</span>
<span class="dox_type">String</span>
<span>callback method
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.decodePayload = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data, binaryType, callback</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">'string'</span>) {
	    <span class="hljs-keyword">return</span> exports.decodePayloadAsBinary(data, binaryType, callback);
	  }

	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> binaryType === <span class="hljs-string">'function'</span>) {
	    callback = binaryType;
	    binaryType = <span class="hljs-literal">null</span>;
	  }

	  <span class="hljs-keyword">var</span> packet;
	  <span class="hljs-keyword">if</span> (data === <span class="hljs-string">''</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-159" id="section-159"></a>
</div>
<p>parser error - ignoring payload</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">return</span> callback(err, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
	  }

	  <span class="hljs-keyword">var</span> length = <span class="hljs-string">''</span>, n, msg;

	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = data.length; i &lt; l; i++) {
	    <span class="hljs-keyword">var</span> chr = data.charAt(i);

	    <span class="hljs-keyword">if</span> (chr !== <span class="hljs-string">':'</span>) {
	      length += chr;
	      <span class="hljs-keyword">continue</span>;
	    }

	    <span class="hljs-keyword">if</span> (length === <span class="hljs-string">''</span> || (length != (n = <span class="hljs-built_in">Number</span>(length)))) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-160" id="section-160"></a>
</div>
<p>parser error - ignoring payload</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	      <span class="hljs-keyword">return</span> callback(err, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
	    }

	    msg = data.substr(i + <span class="hljs-number">1</span>, n);

	    <span class="hljs-keyword">if</span> (length != msg.length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-161" id="section-161"></a>
</div>
<p>parser error - ignoring payload</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	      <span class="hljs-keyword">return</span> callback(err, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
	    }

	    <span class="hljs-keyword">if</span> (msg.length) {
	      packet = exports.decodePacket(msg, binaryType, <span class="hljs-literal">false</span>);

	      <span class="hljs-keyword">if</span> (err.type === packet.type &amp;&amp; err.data === packet.data) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-162" id="section-162"></a>
</div>
<p>parser error in individual packet - ignoring payload</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	        <span class="hljs-keyword">return</span> callback(err, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
	      }

	      <span class="hljs-keyword">var</span> ret = callback(packet, i + n, l);
	      <span class="hljs-keyword">if</span> (<span class="hljs-literal">false</span> === ret) <span class="hljs-keyword">return</span>;
	    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-163" id="section-163"></a>
</div>
<p>advance cursor</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    i += n;
	    length = <span class="hljs-string">''</span>;
	  }

	  <span class="hljs-keyword">if</span> (length !== <span class="hljs-string">''</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-164" id="section-164"></a>
</div>
<p>parser error - ignoring payload</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">return</span> callback(err, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
	  }

	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-165" id="section-165"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encodes multiple messages (payload) as binary.</p>
</div>
<div class="body">
<p>&lt;1 = binary, 0 = string&gt;&lt;number from 0-9&gt;&lt;number from 0-9&gt;[...]&lt;number
255&gt;<data></p>
<p>Example:
1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">packets</span>
<span class="dox_type">Array</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">ArrayBuffer</span>
<span>encoded payload
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.encodePayloadAsArrayBuffer = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">packets, callback</span>) </span>{
	  <span class="hljs-keyword">if</span> (!packets.length) {
	    <span class="hljs-keyword">return</span> callback(<span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(<span class="hljs-number">0</span>));
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeOne</span>(<span class="hljs-params">packet, doneCallback</span>) </span>{
	    exports.encodePacket(packet, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
	      <span class="hljs-keyword">return</span> doneCallback(<span class="hljs-literal">null</span>, data);
	    });
	  }

	  map(packets, encodeOne, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, encodedPackets</span>) </span>{
	    <span class="hljs-keyword">var</span> totalLength = encodedPackets.reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">acc, p</span>) </span>{
	      <span class="hljs-keyword">var</span> len;
	      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> p === <span class="hljs-string">'string'</span>){
	        len = p.length;
	      } <span class="hljs-keyword">else</span> {
	        len = p.byteLength;
	      }
	      <span class="hljs-keyword">return</span> acc + len.toString().length + len + <span class="hljs-number">2</span>; <span class="hljs-comment">// string/binary identifier + separator = 2</span>
	    }, <span class="hljs-number">0</span>);

	    <span class="hljs-keyword">var</span> resultArray = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(totalLength);

	    <span class="hljs-keyword">var</span> bufferIndex = <span class="hljs-number">0</span>;
	    encodedPackets.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p</span>) </span>{
	      <span class="hljs-keyword">var</span> isString = <span class="hljs-keyword">typeof</span> p === <span class="hljs-string">'string'</span>;
	      <span class="hljs-keyword">var</span> ab = p;
	      <span class="hljs-keyword">if</span> (isString) {
	        <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(p.length);
	        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; p.length; i++) {
	          view[i] = p.charCodeAt(i);
	        }
	        ab = view.buffer;
	      }

	      <span class="hljs-keyword">if</span> (isString) { <span class="hljs-comment">// not true binary</span>
	        resultArray[bufferIndex++] = <span class="hljs-number">0</span>;
	      } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// true binary</span>
	        resultArray[bufferIndex++] = <span class="hljs-number">1</span>;
	      }

	      <span class="hljs-keyword">var</span> lenStr = ab.byteLength.toString();
	      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; lenStr.length; i++) {
	        resultArray[bufferIndex++] = <span class="hljs-built_in">parseInt</span>(lenStr[i]);
	      }
	      resultArray[bufferIndex++] = <span class="hljs-number">255</span>;

	      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(ab);
	      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; view.length; i++) {
	        resultArray[bufferIndex++] = view[i];
	      }
	    });

	    <span class="hljs-keyword">return</span> callback(resultArray.buffer);
	  });
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-166" id="section-166"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encode as Blob</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.encodePayloadAsBlob = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">packets, callback</span>) </span>{
	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeOne</span>(<span class="hljs-params">packet, doneCallback</span>) </span>{
	    exports.encodePacket(packet, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">encoded</span>) </span>{
	      <span class="hljs-keyword">var</span> binaryIdentifier = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-number">1</span>);
	      binaryIdentifier[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;
	      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> encoded === <span class="hljs-string">'string'</span>) {
	        <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(encoded.length);
	        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; encoded.length; i++) {
	          view[i] = encoded.charCodeAt(i);
	        }
	        encoded = view.buffer;
	        binaryIdentifier[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
	      }

	      <span class="hljs-keyword">var</span> len = (encoded <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span>)
	        ? encoded.byteLength
	        : encoded.size;

	      <span class="hljs-keyword">var</span> lenStr = len.toString();
	      <span class="hljs-keyword">var</span> lengthAry = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(lenStr.length + <span class="hljs-number">1</span>);
	      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; lenStr.length; i++) {
	        lengthAry[i] = <span class="hljs-built_in">parseInt</span>(lenStr[i]);
	      }
	      lengthAry[lenStr.length] = <span class="hljs-number">255</span>;

	      <span class="hljs-keyword">if</span> (Blob) {
	        <span class="hljs-keyword">var</span> blob = <span class="hljs-keyword">new</span> Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);
	        doneCallback(<span class="hljs-literal">null</span>, blob);
	      }
	    });
	  }

	  map(packets, encodeOne, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, results</span>) </span>{
	    <span class="hljs-keyword">return</span> callback(<span class="hljs-keyword">new</span> Blob(results));
	  });
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-167" id="section-167"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decodes data when a payload is maybe expected. Strings are decoded by
interpreting each byte as a key code for entries marked to start with 0. See
description of encodePayloadAsBinary</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data,</span>
<span class="dox_type">ArrayBuffer</span>
<span>callback method
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.decodePayloadAsBinary = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data, binaryType, callback</span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> binaryType === <span class="hljs-string">'function'</span>) {
	    callback = binaryType;
	    binaryType = <span class="hljs-literal">null</span>;
	  }

	  <span class="hljs-keyword">var</span> bufferTail = data;
	  <span class="hljs-keyword">var</span> buffers = [];

	  <span class="hljs-keyword">while</span> (bufferTail.byteLength &gt; <span class="hljs-number">0</span>) {
	    <span class="hljs-keyword">var</span> tailArray = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(bufferTail);
	    <span class="hljs-keyword">var</span> isString = tailArray[<span class="hljs-number">0</span>] === <span class="hljs-number">0</span>;
	    <span class="hljs-keyword">var</span> msgLength = <span class="hljs-string">''</span>;

	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; ; i++) {
	      <span class="hljs-keyword">if</span> (tailArray[i] === <span class="hljs-number">255</span>) <span class="hljs-keyword">break</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-168" id="section-168"></a>
</div>
<p>310 = char length of Number.MAX_VALUE</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	      <span class="hljs-keyword">if</span> (msgLength.length &gt; <span class="hljs-number">310</span>) {
	        <span class="hljs-keyword">return</span> callback(err, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
	      }

	      msgLength += tailArray[i];
	    }

	    bufferTail = sliceBuffer(bufferTail, <span class="hljs-number">2</span> + msgLength.length);
	    msgLength = <span class="hljs-built_in">parseInt</span>(msgLength);

	    <span class="hljs-keyword">var</span> msg = sliceBuffer(bufferTail, <span class="hljs-number">0</span>, msgLength);
	    <span class="hljs-keyword">if</span> (isString) {
	      <span class="hljs-keyword">try</span> {
	        msg = <span class="hljs-built_in">String</span>.fromCharCode.apply(<span class="hljs-literal">null</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(msg));
	      } <span class="hljs-keyword">catch</span> (e) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-169" id="section-169"></a>
</div>
<p>iPhone Safari doesn't let you apply to typed arrays</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	        <span class="hljs-keyword">var</span> typed = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(msg);
	        msg = <span class="hljs-string">''</span>;
	        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; typed.length; i++) {
	          msg += <span class="hljs-built_in">String</span>.fromCharCode(typed[i]);
	        }
	      }
	    }

	    buffers.push(msg);
	    bufferTail = sliceBuffer(bufferTail, msgLength);
	  }

	  <span class="hljs-keyword">var</span> total = buffers.length;
	  buffers.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">buffer, i</span>) </span>{
	    callback(exports.decodePacket(buffer, binaryType, <span class="hljs-literal">true</span>), i, total);
	  });
	};

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 9 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

	
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-170" id="section-170"></a>
</div>
<div class="dox">
<div class="summary">
<p>Gets the keys for an object.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Array</span>
<span>keys
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = <span class="hljs-built_in">Object</span>.keys || <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">keys</span> (<span class="hljs-params">obj</span>)</span>{
	  <span class="hljs-keyword">var</span> arr = [];
	  <span class="hljs-keyword">var</span> has = <span class="hljs-built_in">Object</span>.prototype.hasOwnProperty;

	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> obj) {
	    <span class="hljs-keyword">if</span> (has.call(obj, i)) {
	      arr.push(i);
	    }
	  }
	  <span class="hljs-keyword">return</span> arr;
	};


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 10 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-comment">/* global Blob File */</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-171" id="section-171"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module requirements.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> isArray = __webpack_require__(<span class="hljs-number">11</span>);

	<span class="hljs-keyword">var</span> toString = <span class="hljs-built_in">Object</span>.prototype.toString;
	<span class="hljs-keyword">var</span> withNativeBlob = <span class="hljs-keyword">typeof</span> global.Blob === <span class="hljs-string">'function'</span> || toString.call(global.Blob) === <span class="hljs-string">'[object BlobConstructor]'</span>;
	<span class="hljs-keyword">var</span> withNativeFile = <span class="hljs-keyword">typeof</span> global.File === <span class="hljs-string">'function'</span> || toString.call(global.File) === <span class="hljs-string">'[object FileConstructor]'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-172" id="section-172"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module exports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = hasBinary;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-173" id="section-173"></a>
</div>
<div class="dox">
<div class="summary">
<p>Checks for binary data.</p>
</div>
<div class="body">
<p>Supports Buffer, ArrayBuffer, Blob and File.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">anything</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasBinary</span> (<span class="hljs-params">obj</span>) </span>{
	  <span class="hljs-keyword">if</span> (!obj || <span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span>) {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	  }

	  <span class="hljs-keyword">if</span> (isArray(obj)) {
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = obj.length; i &lt; l; i++) {
	      <span class="hljs-keyword">if</span> (hasBinary(obj[i])) {
	        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	      }
	    }
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	  }

	  <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> global.Buffer === <span class="hljs-string">'function'</span> &amp;&amp; global.Buffer.isBuffer &amp;&amp; global.Buffer.isBuffer(obj)) ||
	     (<span class="hljs-keyword">typeof</span> global.ArrayBuffer === <span class="hljs-string">'function'</span> &amp;&amp; obj <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span>) ||
	     (withNativeBlob &amp;&amp; obj <span class="hljs-keyword">instanceof</span> Blob) ||
	     (withNativeFile &amp;&amp; obj <span class="hljs-keyword">instanceof</span> File)
	    ) {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-174" id="section-174"></a>
</div>
<p>see: https://github.com/Automattic/has-binary/pull/4</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (obj.toJSON &amp;&amp; <span class="hljs-keyword">typeof</span> obj.toJSON === <span class="hljs-string">'function'</span> &amp;&amp; <span class="hljs-built_in">arguments</span>.length === <span class="hljs-number">1</span>) {
	    <span class="hljs-keyword">return</span> hasBinary(obj.toJSON(), <span class="hljs-literal">true</span>);
	  }

	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
	    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.prototype.hasOwnProperty.call(obj, key) &amp;&amp; hasBinary(obj[key])) {
	      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	    }
	  }

	  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 11 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

	<span class="hljs-keyword">var</span> toString = {}.toString;

	<span class="hljs-built_in">module</span>.exports = <span class="hljs-built_in">Array</span>.isArray || <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">arr</span>) </span>{
	  <span class="hljs-keyword">return</span> toString.call(arr) == <span class="hljs-string">'[object Array]'</span>;
	};


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 12 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-175" id="section-175"></a>
</div>
<div class="dox">
<div class="summary">
<p>An abstraction for slicing an arraybuffer even when
ArrayBuffer.prototype.slice is not supported</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arraybuffer, start, end</span>) </span>{
	  <span class="hljs-keyword">var</span> bytes = arraybuffer.byteLength;
	  start = start || <span class="hljs-number">0</span>;
	  end = end || bytes;

	  <span class="hljs-keyword">if</span> (arraybuffer.slice) { <span class="hljs-keyword">return</span> arraybuffer.slice(start, end); }

	  <span class="hljs-keyword">if</span> (start &lt; <span class="hljs-number">0</span>) { start += bytes; }
	  <span class="hljs-keyword">if</span> (end &lt; <span class="hljs-number">0</span>) { end += bytes; }
	  <span class="hljs-keyword">if</span> (end &gt; bytes) { end = bytes; }

	  <span class="hljs-keyword">if</span> (start &gt;= bytes || start &gt;= end || bytes === <span class="hljs-number">0</span>) {
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(<span class="hljs-number">0</span>);
	  }

	  <span class="hljs-keyword">var</span> abv = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(arraybuffer);
	  <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(end - start);
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = start, ii = <span class="hljs-number">0</span>; i &lt; end; i++, ii++) {
	    result[ii] = abv[i];
	  }
	  <span class="hljs-keyword">return</span> result.buffer;
	};


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 13 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

	<span class="hljs-built_in">module</span>.exports = after

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">after</span>(<span class="hljs-params">count, callback, err_cb</span>) </span>{
	    <span class="hljs-keyword">var</span> bail = <span class="hljs-literal">false</span>
	    err_cb = err_cb || noop
	    proxy.count = count

	    <span class="hljs-keyword">return</span> (count === <span class="hljs-number">0</span>) ? callback() : proxy

	    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">proxy</span>(<span class="hljs-params">err, result</span>) </span>{
	        <span class="hljs-keyword">if</span> (proxy.count &lt;= <span class="hljs-number">0</span>) {
	            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'after called too many times'</span>)
	        }
	        --proxy.count

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-176" id="section-176"></a>
</div>
<p>after first error, rest are passed to err_cb</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	        <span class="hljs-keyword">if</span> (err) {
	            bail = <span class="hljs-literal">true</span>
	            callback(err)
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-177" id="section-177"></a>
</div>
<p>future error callbacks will go to error handler</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	            callback = err_cb
	        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (proxy.count === <span class="hljs-number">0</span> &amp;&amp; !bail) {
	            callback(<span class="hljs-literal">null</span>, result)
	        }
	    }
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">noop</span>(<span class="hljs-params"></span>) </span>{}


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 14 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-keyword">var</span> __WEBPACK_AMD_DEFINE_RESULT__;<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, global</span>) </span>{<span class="hljs-comment">/*! https://mths.be/utf8js v2.1.2 by @mathias */</span>
	;(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-178" id="section-178"></a>
</div>
<p>Detect free variables <code>exports</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> freeExports = <span class="hljs-keyword">typeof</span> exports == <span class="hljs-string">'object'</span> &amp;&amp; exports;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-179" id="section-179"></a>
</div>
<p>Detect free variable <code>module</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> freeModule = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> == <span class="hljs-string">'object'</span> &amp;&amp; <span class="hljs-built_in">module</span> &amp;&amp;
			<span class="hljs-built_in">module</span>.exports == freeExports &amp;&amp; <span class="hljs-built_in">module</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-180" id="section-180"></a>
</div>
<p>Detect free variable <code>global</code>, from Node.js or Browserified code,
and use it as <code>root</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">var</span> freeGlobal = <span class="hljs-keyword">typeof</span> global == <span class="hljs-string">'object'</span> &amp;&amp; global;
		<span class="hljs-keyword">if</span> (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {
			root = freeGlobal;
		}

		<span class="hljs-comment">/*--------------------------------------------------------------------------*/</span>

		<span class="hljs-keyword">var</span> stringFromCharCode = <span class="hljs-built_in">String</span>.fromCharCode;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-181" id="section-181"></a>
</div>
<p>Taken from https://mths.be/punycode</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ucs2decode</span>(<span class="hljs-params">string</span>) </span>{
			<span class="hljs-keyword">var</span> output = [];
			<span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>;
			<span class="hljs-keyword">var</span> length = string.length;
			<span class="hljs-keyword">var</span> value;
			<span class="hljs-keyword">var</span> extra;
			<span class="hljs-keyword">while</span> (counter &lt; length) {
				value = string.charCodeAt(counter++);
				<span class="hljs-keyword">if</span> (value &gt;= <span class="hljs-number">0xD800</span> &amp;&amp; value &lt;= <span class="hljs-number">0xDBFF</span> &amp;&amp; counter &lt; length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-182" id="section-182"></a>
</div>
<p>high surrogate, and there is a next character</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">					extra = string.charCodeAt(counter++);
					<span class="hljs-keyword">if</span> ((extra &amp; <span class="hljs-number">0xFC00</span>) == <span class="hljs-number">0xDC00</span>) { <span class="hljs-comment">// low surrogate</span>
						output.push(((value &amp; <span class="hljs-number">0x3FF</span>) &lt;&lt; <span class="hljs-number">10</span>) + (extra &amp; <span class="hljs-number">0x3FF</span>) + <span class="hljs-number">0x10000</span>);
					} <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-183" id="section-183"></a>
</div>
<p>unmatched surrogate; only append this code unit, in case the next
code unit is the high surrogate of a surrogate pair</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">						output.push(value);
						counter--;
					}
				} <span class="hljs-keyword">else</span> {
					output.push(value);
				}
			}
			<span class="hljs-keyword">return</span> output;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-184" id="section-184"></a>
</div>
<p>Taken from https://mths.be/punycode</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ucs2encode</span>(<span class="hljs-params">array</span>) </span>{
			<span class="hljs-keyword">var</span> length = array.length;
			<span class="hljs-keyword">var</span> index = <span class="hljs-number">-1</span>;
			<span class="hljs-keyword">var</span> value;
			<span class="hljs-keyword">var</span> output = <span class="hljs-string">''</span>;
			<span class="hljs-keyword">while</span> (++index &lt; length) {
				value = array[index];
				<span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">0xFFFF</span>) {
					value -= <span class="hljs-number">0x10000</span>;
					output += stringFromCharCode(value &gt;&gt;&gt; <span class="hljs-number">10</span> &amp; <span class="hljs-number">0x3FF</span> | <span class="hljs-number">0xD800</span>);
					value = <span class="hljs-number">0xDC00</span> | value &amp; <span class="hljs-number">0x3FF</span>;
				}
				output += stringFromCharCode(value);
			}
			<span class="hljs-keyword">return</span> output;
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkScalarValue</span>(<span class="hljs-params">codePoint, strict</span>) </span>{
			<span class="hljs-keyword">if</span> (codePoint &gt;= <span class="hljs-number">0xD800</span> &amp;&amp; codePoint &lt;= <span class="hljs-number">0xDFFF</span>) {
				<span class="hljs-keyword">if</span> (strict) {
					<span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(
						<span class="hljs-string">'Lone surrogate U+'</span> + codePoint.toString(<span class="hljs-number">16</span>).toUpperCase() +
						<span class="hljs-string">' is not a scalar value'</span>
					);
				}
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}
			<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
		}
		<span class="hljs-comment">/*--------------------------------------------------------------------------*/</span>

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createByte</span>(<span class="hljs-params">codePoint, shift</span>) </span>{
			<span class="hljs-keyword">return</span> stringFromCharCode(((codePoint &gt;&gt; shift) &amp; <span class="hljs-number">0x3F</span>) | <span class="hljs-number">0x80</span>);
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encodeCodePoint</span>(<span class="hljs-params">codePoint, strict</span>) </span>{
			<span class="hljs-keyword">if</span> ((codePoint &amp; <span class="hljs-number">0xFFFFFF80</span>) == <span class="hljs-number">0</span>) { <span class="hljs-comment">// 1-byte sequence</span>
				<span class="hljs-keyword">return</span> stringFromCharCode(codePoint);
			}
			<span class="hljs-keyword">var</span> symbol = <span class="hljs-string">''</span>;
			<span class="hljs-keyword">if</span> ((codePoint &amp; <span class="hljs-number">0xFFFFF800</span>) == <span class="hljs-number">0</span>) { <span class="hljs-comment">// 2-byte sequence</span>
				symbol = stringFromCharCode(((codePoint &gt;&gt; <span class="hljs-number">6</span>) &amp; <span class="hljs-number">0x1F</span>) | <span class="hljs-number">0xC0</span>);
			}
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((codePoint &amp; <span class="hljs-number">0xFFFF0000</span>) == <span class="hljs-number">0</span>) { <span class="hljs-comment">// 3-byte sequence</span>
				<span class="hljs-keyword">if</span> (!checkScalarValue(codePoint, strict)) {
					codePoint = <span class="hljs-number">0xFFFD</span>;
				}
				symbol = stringFromCharCode(((codePoint &gt;&gt; <span class="hljs-number">12</span>) &amp; <span class="hljs-number">0x0F</span>) | <span class="hljs-number">0xE0</span>);
				symbol += createByte(codePoint, <span class="hljs-number">6</span>);
			}
			<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((codePoint &amp; <span class="hljs-number">0xFFE00000</span>) == <span class="hljs-number">0</span>) { <span class="hljs-comment">// 4-byte sequence</span>
				symbol = stringFromCharCode(((codePoint &gt;&gt; <span class="hljs-number">18</span>) &amp; <span class="hljs-number">0x07</span>) | <span class="hljs-number">0xF0</span>);
				symbol += createByte(codePoint, <span class="hljs-number">12</span>);
				symbol += createByte(codePoint, <span class="hljs-number">6</span>);
			}
			symbol += stringFromCharCode((codePoint &amp; <span class="hljs-number">0x3F</span>) | <span class="hljs-number">0x80</span>);
			<span class="hljs-keyword">return</span> symbol;
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf8encode</span>(<span class="hljs-params">string, opts</span>) </span>{
			opts = opts || {};
			<span class="hljs-keyword">var</span> strict = <span class="hljs-literal">false</span> !== opts.strict;

			<span class="hljs-keyword">var</span> codePoints = ucs2decode(string);
			<span class="hljs-keyword">var</span> length = codePoints.length;
			<span class="hljs-keyword">var</span> index = <span class="hljs-number">-1</span>;
			<span class="hljs-keyword">var</span> codePoint;
			<span class="hljs-keyword">var</span> byteString = <span class="hljs-string">''</span>;
			<span class="hljs-keyword">while</span> (++index &lt; length) {
				codePoint = codePoints[index];
				byteString += encodeCodePoint(codePoint, strict);
			}
			<span class="hljs-keyword">return</span> byteString;
		}

		<span class="hljs-comment">/*--------------------------------------------------------------------------*/</span>

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readContinuationByte</span>(<span class="hljs-params"></span>) </span>{
			<span class="hljs-keyword">if</span> (byteIndex &gt;= byteCount) {
				<span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid byte index'</span>);
			}

			<span class="hljs-keyword">var</span> continuationByte = byteArray[byteIndex] &amp; <span class="hljs-number">0xFF</span>;
			byteIndex++;

			<span class="hljs-keyword">if</span> ((continuationByte &amp; <span class="hljs-number">0xC0</span>) == <span class="hljs-number">0x80</span>) {
				<span class="hljs-keyword">return</span> continuationByte &amp; <span class="hljs-number">0x3F</span>;
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-185" id="section-185"></a>
</div>
<p>If we end up here, it’s not a continuation byte</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid continuation byte'</span>);
		}

		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decodeSymbol</span>(<span class="hljs-params">strict</span>) </span>{
			<span class="hljs-keyword">var</span> byte1;
			<span class="hljs-keyword">var</span> byte2;
			<span class="hljs-keyword">var</span> byte3;
			<span class="hljs-keyword">var</span> byte4;
			<span class="hljs-keyword">var</span> codePoint;

			<span class="hljs-keyword">if</span> (byteIndex &gt; byteCount) {
				<span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid byte index'</span>);
			}

			<span class="hljs-keyword">if</span> (byteIndex == byteCount) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-186" id="section-186"></a>
</div>
<p>Read first byte</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			byte1 = byteArray[byteIndex] &amp; <span class="hljs-number">0xFF</span>;
			byteIndex++;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-187" id="section-187"></a>
</div>
<p>1-byte sequence (no continuation bytes)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">if</span> ((byte1 &amp; <span class="hljs-number">0x80</span>) == <span class="hljs-number">0</span>) {
				<span class="hljs-keyword">return</span> byte1;
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-188" id="section-188"></a>
</div>
<p>2-byte sequence</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">if</span> ((byte1 &amp; <span class="hljs-number">0xE0</span>) == <span class="hljs-number">0xC0</span>) {
				byte2 = readContinuationByte();
				codePoint = ((byte1 &amp; <span class="hljs-number">0x1F</span>) &lt;&lt; <span class="hljs-number">6</span>) | byte2;
				<span class="hljs-keyword">if</span> (codePoint &gt;= <span class="hljs-number">0x80</span>) {
					<span class="hljs-keyword">return</span> codePoint;
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid continuation byte'</span>);
				}
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-189" id="section-189"></a>
</div>
<p>3-byte sequence (may include unpaired surrogates)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">if</span> ((byte1 &amp; <span class="hljs-number">0xF0</span>) == <span class="hljs-number">0xE0</span>) {
				byte2 = readContinuationByte();
				byte3 = readContinuationByte();
				codePoint = ((byte1 &amp; <span class="hljs-number">0x0F</span>) &lt;&lt; <span class="hljs-number">12</span>) | (byte2 &lt;&lt; <span class="hljs-number">6</span>) | byte3;
				<span class="hljs-keyword">if</span> (codePoint &gt;= <span class="hljs-number">0x0800</span>) {
					<span class="hljs-keyword">return</span> checkScalarValue(codePoint, strict) ? codePoint : <span class="hljs-number">0xFFFD</span>;
				} <span class="hljs-keyword">else</span> {
					<span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid continuation byte'</span>);
				}
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-190" id="section-190"></a>
</div>
<p>4-byte sequence</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-keyword">if</span> ((byte1 &amp; <span class="hljs-number">0xF8</span>) == <span class="hljs-number">0xF0</span>) {
				byte2 = readContinuationByte();
				byte3 = readContinuationByte();
				byte4 = readContinuationByte();
				codePoint = ((byte1 &amp; <span class="hljs-number">0x07</span>) &lt;&lt; <span class="hljs-number">0x12</span>) | (byte2 &lt;&lt; <span class="hljs-number">0x0C</span>) |
					(byte3 &lt;&lt; <span class="hljs-number">0x06</span>) | byte4;
				<span class="hljs-keyword">if</span> (codePoint &gt;= <span class="hljs-number">0x010000</span> &amp;&amp; codePoint &lt;= <span class="hljs-number">0x10FFFF</span>) {
					<span class="hljs-keyword">return</span> codePoint;
				}
			}

			<span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Invalid UTF-8 detected'</span>);
		}

		<span class="hljs-keyword">var</span> byteArray;
		<span class="hljs-keyword">var</span> byteCount;
		<span class="hljs-keyword">var</span> byteIndex;
		<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">utf8decode</span>(<span class="hljs-params">byteString, opts</span>) </span>{
			opts = opts || {};
			<span class="hljs-keyword">var</span> strict = <span class="hljs-literal">false</span> !== opts.strict;

			byteArray = ucs2decode(byteString);
			byteCount = byteArray.length;
			byteIndex = <span class="hljs-number">0</span>;
			<span class="hljs-keyword">var</span> codePoints = [];
			<span class="hljs-keyword">var</span> tmp;
			<span class="hljs-keyword">while</span> ((tmp = decodeSymbol(strict)) !== <span class="hljs-literal">false</span>) {
				codePoints.push(tmp);
			}
			<span class="hljs-keyword">return</span> ucs2encode(codePoints);
		}

		<span class="hljs-comment">/*--------------------------------------------------------------------------*/</span>

		<span class="hljs-keyword">var</span> utf8 = {
			<span class="hljs-string">'version'</span>: <span class="hljs-string">'2.1.2'</span>,
			<span class="hljs-string">'encode'</span>: utf8encode,
			<span class="hljs-string">'decode'</span>: utf8decode
		};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-191" id="section-191"></a>
</div>
<p>Some AMD build optimizers, like r.js, check for specific condition patterns
like the following:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">		<span class="hljs-keyword">if</span> (
			<span class="hljs-literal">true</span>
		) {
			!(__WEBPACK_AMD_DEFINE_RESULT__ = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
				<span class="hljs-keyword">return</span> utf8;
			}.call(exports, __webpack_require__, exports, <span class="hljs-built_in">module</span>), __WEBPACK_AMD_DEFINE_RESULT__ !== <span class="hljs-literal">undefined</span> &amp;&amp; (<span class="hljs-built_in">module</span>.exports = __WEBPACK_AMD_DEFINE_RESULT__));
		}	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (freeExports &amp;&amp; !freeExports.nodeType) {
			<span class="hljs-keyword">if</span> (freeModule) { <span class="hljs-comment">// in Node.js or RingoJS v0.8.0+</span>
				freeModule.exports = utf8;
			} <span class="hljs-keyword">else</span> { <span class="hljs-comment">// in Narwhal or RingoJS v0.7.0-</span>
				<span class="hljs-keyword">var</span> object = {};
				<span class="hljs-keyword">var</span> hasOwnProperty = object.hasOwnProperty;
				<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> utf8) {
					hasOwnProperty.call(utf8, key) &amp;&amp; (freeExports[key] = utf8[key]);
				}
			}
		} <span class="hljs-keyword">else</span> { <span class="hljs-comment">// in Rhino or a web browser</span>
			root.utf8 = utf8;
		}

	}(<span class="hljs-keyword">this</span>));

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, __webpack_require__(<span class="hljs-number">15</span>)(<span class="hljs-built_in">module</span>), (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 15 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

	<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module</span>) </span>{
		<span class="hljs-keyword">if</span>(!<span class="hljs-built_in">module</span>.webpackPolyfill) {
			<span class="hljs-built_in">module</span>.deprecate = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{};
			<span class="hljs-built_in">module</span>.paths = [];
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-192" id="section-192"></a>
</div>
<p>module.parent = undefined by default</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">			<span class="hljs-built_in">module</span>.children = [];
			<span class="hljs-built_in">module</span>.webpackPolyfill = <span class="hljs-number">1</span>;
		}
		<span class="hljs-keyword">return</span> <span class="hljs-built_in">module</span>;
	}


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 16 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-193" id="section-193"></a>
</div>
<div class="dox">
<div class="summary">
<p>base64-arraybuffer
https://github.com/niklasvh/base64-arraybuffer</p>
</div>
<div class="body">
<p>Copyright (c) 2012 Niklas von Hertzen
Licensed under the MIT license.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
<span class="hljs-meta">	  "use strict"</span>;

	  <span class="hljs-keyword">var</span> chars = <span class="hljs-string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-194" id="section-194"></a>
</div>
<p>Use a lookup table to find the index.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> lookup = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-number">256</span>);
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; chars.length; i++) {
	    lookup[chars.charCodeAt(i)] = i;
	  }

	  exports.encode = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arraybuffer</span>) </span>{
	    <span class="hljs-keyword">var</span> bytes = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(arraybuffer),
	    i, len = bytes.length, base64 = <span class="hljs-string">""</span>;

	    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i+=<span class="hljs-number">3</span>) {
	      base64 += chars[bytes[i] &gt;&gt; <span class="hljs-number">2</span>];
	      base64 += chars[((bytes[i] &amp; <span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-number">4</span>) | (bytes[i + <span class="hljs-number">1</span>] &gt;&gt; <span class="hljs-number">4</span>)];
	      base64 += chars[((bytes[i + <span class="hljs-number">1</span>] &amp; <span class="hljs-number">15</span>) &lt;&lt; <span class="hljs-number">2</span>) | (bytes[i + <span class="hljs-number">2</span>] &gt;&gt; <span class="hljs-number">6</span>)];
	      base64 += chars[bytes[i + <span class="hljs-number">2</span>] &amp; <span class="hljs-number">63</span>];
	    }

	    <span class="hljs-keyword">if</span> ((len % <span class="hljs-number">3</span>) === <span class="hljs-number">2</span>) {
	      base64 = base64.substring(<span class="hljs-number">0</span>, base64.length - <span class="hljs-number">1</span>) + <span class="hljs-string">"="</span>;
	    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (len % <span class="hljs-number">3</span> === <span class="hljs-number">1</span>) {
	      base64 = base64.substring(<span class="hljs-number">0</span>, base64.length - <span class="hljs-number">2</span>) + <span class="hljs-string">"=="</span>;
	    }

	    <span class="hljs-keyword">return</span> base64;
	  };

	  exports.decode =  <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">base64</span>) </span>{
	    <span class="hljs-keyword">var</span> bufferLength = base64.length * <span class="hljs-number">0.75</span>,
	    len = base64.length, i, p = <span class="hljs-number">0</span>,
	    encoded1, encoded2, encoded3, encoded4;

	    <span class="hljs-keyword">if</span> (base64[base64.length - <span class="hljs-number">1</span>] === <span class="hljs-string">"="</span>) {
	      bufferLength--;
	      <span class="hljs-keyword">if</span> (base64[base64.length - <span class="hljs-number">2</span>] === <span class="hljs-string">"="</span>) {
	        bufferLength--;
	      }
	    }

	    <span class="hljs-keyword">var</span> arraybuffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(bufferLength),
	    bytes = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(arraybuffer);

	    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i+=<span class="hljs-number">4</span>) {
	      encoded1 = lookup[base64.charCodeAt(i)];
	      encoded2 = lookup[base64.charCodeAt(i+<span class="hljs-number">1</span>)];
	      encoded3 = lookup[base64.charCodeAt(i+<span class="hljs-number">2</span>)];
	      encoded4 = lookup[base64.charCodeAt(i+<span class="hljs-number">3</span>)];

	      bytes[p++] = (encoded1 &lt;&lt; <span class="hljs-number">2</span>) | (encoded2 &gt;&gt; <span class="hljs-number">4</span>);
	      bytes[p++] = ((encoded2 &amp; <span class="hljs-number">15</span>) &lt;&lt; <span class="hljs-number">4</span>) | (encoded3 &gt;&gt; <span class="hljs-number">2</span>);
	      bytes[p++] = ((encoded3 &amp; <span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-number">6</span>) | (encoded4 &amp; <span class="hljs-number">63</span>);
	    }

	    <span class="hljs-keyword">return</span> arraybuffer;
	  };
	})();


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 17 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-comment">/**
	 * Create a blob builder even when vendor prefixes exist
	 */</span>

	<span class="hljs-keyword">var</span> BlobBuilder = global.BlobBuilder
	  || global.WebKitBlobBuilder
	  || global.MSBlobBuilder
	  || global.MozBlobBuilder;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-195" id="section-195"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if Blob constructor is supported</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> blobSupported = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">var</span> a = <span class="hljs-keyword">new</span> Blob([<span class="hljs-string">'hi'</span>]);
	    <span class="hljs-keyword">return</span> a.size === <span class="hljs-number">2</span>;
	  } <span class="hljs-keyword">catch</span>(e) {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	  }
	})();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-196" id="section-196"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if Blob constructor supports ArrayBufferViews
Fails in Safari 6, so we need to map to ArrayBuffers there.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> blobSupportsArrayBufferView = blobSupported &amp;&amp; (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">var</span> b = <span class="hljs-keyword">new</span> Blob([<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])]);
	    <span class="hljs-keyword">return</span> b.size === <span class="hljs-number">2</span>;
	  } <span class="hljs-keyword">catch</span>(e) {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	  }
	})();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-197" id="section-197"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if BlobBuilder is supported</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> blobBuilderSupported = BlobBuilder
	  &amp;&amp; BlobBuilder.prototype.append
	  &amp;&amp; BlobBuilder.prototype.getBlob;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-198" id="section-198"></a>
</div>
<div class="dox">
<div class="summary">
<p>Helper function that maps ArrayBufferViews to ArrayBuffers
Used by BlobBuilder constructor and old browsers that didn't
support it in the Blob constructor.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mapArrayBufferViews</span>(<span class="hljs-params">ary</span>) </span>{
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; ary.length; i++) {
	    <span class="hljs-keyword">var</span> chunk = ary[i];
	    <span class="hljs-keyword">if</span> (chunk.buffer <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">ArrayBuffer</span>) {
	      <span class="hljs-keyword">var</span> buf = chunk.buffer;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-199" id="section-199"></a>
</div>
<p>if this is a subarray, make a copy so we only
include the subarray region from the underlying buffer</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	      <span class="hljs-keyword">if</span> (chunk.byteLength !== buf.byteLength) {
	        <span class="hljs-keyword">var</span> copy = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(chunk.byteLength);
	        copy.set(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(buf, chunk.byteOffset, chunk.byteLength));
	        buf = copy.buffer;
	      }

	      ary[i] = buf;
	    }
	  }
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BlobBuilderConstructor</span>(<span class="hljs-params">ary, options</span>) </span>{
	  options = options || {};

	  <span class="hljs-keyword">var</span> bb = <span class="hljs-keyword">new</span> BlobBuilder();
	  mapArrayBufferViews(ary);

	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; ary.length; i++) {
	    bb.append(ary[i]);
	  }

	  <span class="hljs-keyword">return</span> (options.type) ? bb.getBlob(options.type) : bb.getBlob();
	};

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">BlobConstructor</span>(<span class="hljs-params">ary, options</span>) </span>{
	  mapArrayBufferViews(ary);
	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Blob(ary, options || {});
	};

	<span class="hljs-built_in">module</span>.exports = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">if</span> (blobSupported) {
	    <span class="hljs-keyword">return</span> blobSupportsArrayBufferView ? global.Blob : BlobConstructor;
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (blobBuilderSupported) {
	    <span class="hljs-keyword">return</span> BlobBuilderConstructor;
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
	  }
	})();

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 18 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-200" id="section-200"></a>
</div>
<div class="dox">
<div class="summary">
<p>Expose <code>Emitter</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
	  <span class="hljs-built_in">module</span>.exports = Emitter;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-201" id="section-201"></a>
</div>
<div class="dox">
<div class="summary">
<p>Initialize a new <code>Emitter</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Emitter</span>(<span class="hljs-params">obj</span>) </span>{
	  <span class="hljs-keyword">if</span> (obj) <span class="hljs-keyword">return</span> mixin(obj);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-202" id="section-202"></a>
</div>
<div class="dox">
<div class="summary">
<p>Mixin the emitter properties.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">obj</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mixin</span>(<span class="hljs-params">obj</span>) </span>{
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> Emitter.prototype) {
	    obj[key] = Emitter.prototype[key];
	  }
	  <span class="hljs-keyword">return</span> obj;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-203" id="section-203"></a>
</div>
<div class="dox">
<div class="summary">
<p>Listen on the given <code>event</code> with <code>fn</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">event</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">fn</span>
<span class="dox_type">Function</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Emitter</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Emitter.prototype.on =
	Emitter.prototype.addEventListener = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, fn</span>)</span>{
	  <span class="hljs-keyword">this</span>._callbacks = <span class="hljs-keyword">this</span>._callbacks || {};
	  (<span class="hljs-keyword">this</span>._callbacks[<span class="hljs-string">'$'</span> + event] = <span class="hljs-keyword">this</span>._callbacks[<span class="hljs-string">'$'</span> + event] || [])
	    .push(fn);
	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-204" id="section-204"></a>
</div>
<div class="dox">
<div class="summary">
<p>Adds an <code>event</code> listener that will be invoked a single
time then automatically removed.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">event</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">fn</span>
<span class="dox_type">Function</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Emitter</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Emitter.prototype.once = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, fn</span>)</span>{
	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">on</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>.off(event, on);
	    fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
	  }

	  on.fn = fn;
	  <span class="hljs-keyword">this</span>.on(event, on);
	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-205" id="section-205"></a>
</div>
<div class="dox">
<div class="summary">
<p>Remove the given callback for <code>event</code> or all
registered callbacks.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">event</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">fn</span>
<span class="dox_type">Function</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Emitter</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Emitter.prototype.off =
	Emitter.prototype.removeListener =
	Emitter.prototype.removeAllListeners =
	Emitter.prototype.removeEventListener = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, fn</span>)</span>{
	  <span class="hljs-keyword">this</span>._callbacks = <span class="hljs-keyword">this</span>._callbacks || {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-206" id="section-206"></a>
</div>
<p>all</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> == <span class="hljs-built_in">arguments</span>.length) {
	    <span class="hljs-keyword">this</span>._callbacks = {};
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-207" id="section-207"></a>
</div>
<p>specific event</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> callbacks = <span class="hljs-keyword">this</span>._callbacks[<span class="hljs-string">'$'</span> + event];
	  <span class="hljs-keyword">if</span> (!callbacks) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-208" id="section-208"></a>
</div>
<p>remove all handlers</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-number">1</span> == <span class="hljs-built_in">arguments</span>.length) {
	    <span class="hljs-keyword">delete</span> <span class="hljs-keyword">this</span>._callbacks[<span class="hljs-string">'$'</span> + event];
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-209" id="section-209"></a>
</div>
<p>remove specific handler</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> cb;
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; callbacks.length; i++) {
	    cb = callbacks[i];
	    <span class="hljs-keyword">if</span> (cb === fn || cb.fn === fn) {
	      callbacks.splice(i, <span class="hljs-number">1</span>);
	      <span class="hljs-keyword">break</span>;
	    }
	  }
	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-210" id="section-210"></a>
</div>
<div class="dox">
<div class="summary">
<p>Emit <code>event</code> with the given args.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">event</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">...</span>
<span class="dox_type">Mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Emitter</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Emitter.prototype.emit = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
	  <span class="hljs-keyword">this</span>._callbacks = <span class="hljs-keyword">this</span>._callbacks || {};
	  <span class="hljs-keyword">var</span> args = [].slice.call(<span class="hljs-built_in">arguments</span>, <span class="hljs-number">1</span>)
	    , callbacks = <span class="hljs-keyword">this</span>._callbacks[<span class="hljs-string">'$'</span> + event];

	  <span class="hljs-keyword">if</span> (callbacks) {
	    callbacks = callbacks.slice(<span class="hljs-number">0</span>);
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = callbacks.length; i &lt; len; ++i) {
	      callbacks[i].apply(<span class="hljs-keyword">this</span>, args);
	    }
	  }

	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-211" id="section-211"></a>
</div>
<div class="dox">
<div class="summary">
<p>Return array of callbacks for <code>event</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">event</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Array</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Emitter.prototype.listeners = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
	  <span class="hljs-keyword">this</span>._callbacks = <span class="hljs-keyword">this</span>._callbacks || {};
	  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._callbacks[<span class="hljs-string">'$'</span> + event] || [];
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-212" id="section-212"></a>
</div>
<div class="dox">
<div class="summary">
<p>Check if this emitter has <code>event</code> handlers.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">event</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Boolean</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	Emitter.prototype.hasListeners = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
	  <span class="hljs-keyword">return</span> !! <span class="hljs-keyword">this</span>.listeners(event).length;
	};


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 19 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-213" id="section-213"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compiles a querystring
Returns string representation of the object</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.encode = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
	  <span class="hljs-keyword">var</span> str = <span class="hljs-string">''</span>;

	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> obj) {
	    <span class="hljs-keyword">if</span> (obj.hasOwnProperty(i)) {
	      <span class="hljs-keyword">if</span> (str.length) str += <span class="hljs-string">'&amp;'</span>;
	      str += <span class="hljs-built_in">encodeURIComponent</span>(i) + <span class="hljs-string">'='</span> + <span class="hljs-built_in">encodeURIComponent</span>(obj[i]);
	    }
	  }

	  <span class="hljs-keyword">return</span> str;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-214" id="section-214"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parses a simple querystring into an object</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">qs</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.decode = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">qs</span>)</span>{
	  <span class="hljs-keyword">var</span> qry = {};
	  <span class="hljs-keyword">var</span> pairs = qs.split(<span class="hljs-string">'&amp;'</span>);
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = pairs.length; i &lt; l; i++) {
	    <span class="hljs-keyword">var</span> pair = pairs[i].split(<span class="hljs-string">'='</span>);
	    qry[<span class="hljs-built_in">decodeURIComponent</span>(pair[<span class="hljs-number">0</span>])] = <span class="hljs-built_in">decodeURIComponent</span>(pair[<span class="hljs-number">1</span>]);
	  }
	  <span class="hljs-keyword">return</span> qry;
	};


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 20 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

	
	<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>)</span>{
	  <span class="hljs-keyword">var</span> fn = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{};
	  fn.prototype = b.prototype;
	  a.prototype = <span class="hljs-keyword">new</span> fn;
	  a.prototype.constructor = a;
	};

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 21 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{
<span class="hljs-meta">
	'use strict'</span>;

	<span class="hljs-keyword">var</span> alphabet = <span class="hljs-string">'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'</span>.split(<span class="hljs-string">''</span>)
	  , length = <span class="hljs-number">64</span>
	  , map = {}
	  , seed = <span class="hljs-number">0</span>
	  , i = <span class="hljs-number">0</span>
	  , prev;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-215" id="section-215"></a>
</div>
<div class="dox">
<div class="summary">
<p>Return a string representing the specified number.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">num</span>
<span class="dox_type">Number</span>
<span>The number to convert.
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">encode</span>(<span class="hljs-params">num</span>) </span>{
	  <span class="hljs-keyword">var</span> encoded = <span class="hljs-string">''</span>;

	  <span class="hljs-keyword">do</span> {
	    encoded = alphabet[num % length] + encoded;
	    num = <span class="hljs-built_in">Math</span>.floor(num / length);
	  } <span class="hljs-keyword">while</span> (num &gt; <span class="hljs-number">0</span>);

	  <span class="hljs-keyword">return</span> encoded;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-216" id="section-216"></a>
</div>
<div class="dox">
<div class="summary">
<p>Return the integer value specified by the given string.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">str</span>
<span class="dox_type">String</span>
<span>The string to convert.
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decode</span>(<span class="hljs-params">str</span>) </span>{
	  <span class="hljs-keyword">var</span> decoded = <span class="hljs-number">0</span>;

	  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; str.length; i++) {
	    decoded = decoded * length + map[str.charAt(i)];
	  }

	  <span class="hljs-keyword">return</span> decoded;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-217" id="section-217"></a>
</div>
<div class="dox">
<div class="summary">
<p>Yeast: A tiny growing id generator.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">yeast</span>(<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> now = encode(+<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());

	  <span class="hljs-keyword">if</span> (now !== prev) <span class="hljs-keyword">return</span> seed = <span class="hljs-number">0</span>, prev = now;
	  <span class="hljs-keyword">return</span> now +<span class="hljs-string">'.'</span>+ encode(seed++);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-218" id="section-218"></a>
</div>
<p>Map each character to its index.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">for</span> (; i &lt; length; i++) map[alphabet[i]] = i;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-219" id="section-219"></a>
</div>
<p>Expose the <code>yeast</code>, <code>encode</code> and <code>decode</code> functions.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	yeast.encode = encode;
	yeast.decode = decode;
	<span class="hljs-built_in">module</span>.exports = yeast;


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 22 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">process</span>) </span>{<span class="hljs-comment">/**
	 * This is the web browser implementation of `debug()`.
	 *
	 * Expose `debug()` as the module.
	 */</span>

	exports = <span class="hljs-built_in">module</span>.exports = __webpack_require__(<span class="hljs-number">24</span>);
	exports.log = log;
	exports.formatArgs = formatArgs;
	exports.save = save;
	exports.load = load;
	exports.useColors = useColors;
	exports.storage = <span class="hljs-string">'undefined'</span> != <span class="hljs-keyword">typeof</span> chrome
	               &amp;&amp; <span class="hljs-string">'undefined'</span> != <span class="hljs-keyword">typeof</span> chrome.storage
	                  ? chrome.storage.local
	                  : localstorage();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-220" id="section-220"></a>
</div>
<div class="dox">
<div class="summary">
<p>Colors.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.colors = [
	  <span class="hljs-string">'#0000CC'</span>, <span class="hljs-string">'#0000FF'</span>, <span class="hljs-string">'#0033CC'</span>, <span class="hljs-string">'#0033FF'</span>, <span class="hljs-string">'#0066CC'</span>, <span class="hljs-string">'#0066FF'</span>, <span class="hljs-string">'#0099CC'</span>,
	  <span class="hljs-string">'#0099FF'</span>, <span class="hljs-string">'#00CC00'</span>, <span class="hljs-string">'#00CC33'</span>, <span class="hljs-string">'#00CC66'</span>, <span class="hljs-string">'#00CC99'</span>, <span class="hljs-string">'#00CCCC'</span>, <span class="hljs-string">'#00CCFF'</span>,
	  <span class="hljs-string">'#3300CC'</span>, <span class="hljs-string">'#3300FF'</span>, <span class="hljs-string">'#3333CC'</span>, <span class="hljs-string">'#3333FF'</span>, <span class="hljs-string">'#3366CC'</span>, <span class="hljs-string">'#3366FF'</span>, <span class="hljs-string">'#3399CC'</span>,
	  <span class="hljs-string">'#3399FF'</span>, <span class="hljs-string">'#33CC00'</span>, <span class="hljs-string">'#33CC33'</span>, <span class="hljs-string">'#33CC66'</span>, <span class="hljs-string">'#33CC99'</span>, <span class="hljs-string">'#33CCCC'</span>, <span class="hljs-string">'#33CCFF'</span>,
	  <span class="hljs-string">'#6600CC'</span>, <span class="hljs-string">'#6600FF'</span>, <span class="hljs-string">'#6633CC'</span>, <span class="hljs-string">'#6633FF'</span>, <span class="hljs-string">'#66CC00'</span>, <span class="hljs-string">'#66CC33'</span>, <span class="hljs-string">'#9900CC'</span>,
	  <span class="hljs-string">'#9900FF'</span>, <span class="hljs-string">'#9933CC'</span>, <span class="hljs-string">'#9933FF'</span>, <span class="hljs-string">'#99CC00'</span>, <span class="hljs-string">'#99CC33'</span>, <span class="hljs-string">'#CC0000'</span>, <span class="hljs-string">'#CC0033'</span>,
	  <span class="hljs-string">'#CC0066'</span>, <span class="hljs-string">'#CC0099'</span>, <span class="hljs-string">'#CC00CC'</span>, <span class="hljs-string">'#CC00FF'</span>, <span class="hljs-string">'#CC3300'</span>, <span class="hljs-string">'#CC3333'</span>, <span class="hljs-string">'#CC3366'</span>,
	  <span class="hljs-string">'#CC3399'</span>, <span class="hljs-string">'#CC33CC'</span>, <span class="hljs-string">'#CC33FF'</span>, <span class="hljs-string">'#CC6600'</span>, <span class="hljs-string">'#CC6633'</span>, <span class="hljs-string">'#CC9900'</span>, <span class="hljs-string">'#CC9933'</span>,
	  <span class="hljs-string">'#CCCC00'</span>, <span class="hljs-string">'#CCCC33'</span>, <span class="hljs-string">'#FF0000'</span>, <span class="hljs-string">'#FF0033'</span>, <span class="hljs-string">'#FF0066'</span>, <span class="hljs-string">'#FF0099'</span>, <span class="hljs-string">'#FF00CC'</span>,
	  <span class="hljs-string">'#FF00FF'</span>, <span class="hljs-string">'#FF3300'</span>, <span class="hljs-string">'#FF3333'</span>, <span class="hljs-string">'#FF3366'</span>, <span class="hljs-string">'#FF3399'</span>, <span class="hljs-string">'#FF33CC'</span>, <span class="hljs-string">'#FF33FF'</span>,
	  <span class="hljs-string">'#FF6600'</span>, <span class="hljs-string">'#FF6633'</span>, <span class="hljs-string">'#FF9900'</span>, <span class="hljs-string">'#FF9933'</span>, <span class="hljs-string">'#FFCC00'</span>, <span class="hljs-string">'#FFCC33'</span>
	];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-221" id="section-221"></a>
</div>
<div class="dox">
<div class="summary">
<p>Currently only WebKit-based Web Inspectors, Firefox &gt;= v31,
and the Firebug extension (any Firefox version) are known
to support &quot;%c&quot; CSS customizations.</p>
</div>
<div class="body">
<p>TODO: add a <code>localStorage</code> variable to explicitly enable/disable colors</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">useColors</span>(<span class="hljs-params"></span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-222" id="section-222"></a>
</div>
<p>NB: In an Electron preload script, document will be defined but not fully
initialized. Since we know we're in Chrome, we'll just detect this case
explicitly</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">window</span>.process &amp;&amp; <span class="hljs-built_in">window</span>.process.type === <span class="hljs-string">'renderer'</span>) {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-223" id="section-223"></a>
</div>
<p>Internet Explorer and Edge do not support colors.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> navigator !== <span class="hljs-string">'undefined'</span> &amp;&amp; navigator.userAgent &amp;&amp; navigator.userAgent.toLowerCase().match(<span class="hljs-regexp">/(edge|trident)\/(\d+)/</span>)) {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-224" id="section-224"></a>
</div>
<p>is webkit? http://stackoverflow.com/a/16459606/376773
document is undefined in react-native: https://github.com/facebook/react-native/pull/1632</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">return</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">document</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">document</span>.documentElement &amp;&amp; <span class="hljs-built_in">document</span>.documentElement.style &amp;&amp; <span class="hljs-built_in">document</span>.documentElement.style.WebkitAppearance) ||
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-225" id="section-225"></a>
</div>
<p>is firebug? http://stackoverflow.com/a/398120/376773</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">window</span>.console &amp;&amp; (<span class="hljs-built_in">window</span>.console.firebug || (<span class="hljs-built_in">window</span>.console.exception &amp;&amp; <span class="hljs-built_in">window</span>.console.table))) ||
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-226" id="section-226"></a>
</div>
<p>is firefox &gt;= v31?
https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    (<span class="hljs-keyword">typeof</span> navigator !== <span class="hljs-string">'undefined'</span> &amp;&amp; navigator.userAgent &amp;&amp; navigator.userAgent.toLowerCase().match(<span class="hljs-regexp">/firefox\/(\d+)/</span>) &amp;&amp; <span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">RegExp</span>.$<span class="hljs-number">1</span>, <span class="hljs-number">10</span>) &gt;= <span class="hljs-number">31</span>) ||
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-227" id="section-227"></a>
</div>
<p>double check webkit in userAgent just in case we are in a worker</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    (<span class="hljs-keyword">typeof</span> navigator !== <span class="hljs-string">'undefined'</span> &amp;&amp; navigator.userAgent &amp;&amp; navigator.userAgent.toLowerCase().match(<span class="hljs-regexp">/applewebkit\/(\d+)/</span>));
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-228" id="section-228"></a>
</div>
<div class="dox">
<div class="summary">
<p>Map %j to <code>JSON.stringify()</code>, since no Web Inspectors do that by default.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.formatters.j = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">return</span> <span class="hljs-built_in">JSON</span>.stringify(v);
	  } <span class="hljs-keyword">catch</span> (err) {
	    <span class="hljs-keyword">return</span> <span class="hljs-string">'[UnexpectedJSONParseError]: '</span> + err.message;
	  }
	};


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-229" id="section-229"></a>
</div>
<div class="dox">
<div class="summary">
<p>Colorize log arguments if enabled.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatArgs</span>(<span class="hljs-params">args</span>) </span>{
	  <span class="hljs-keyword">var</span> useColors = <span class="hljs-keyword">this</span>.useColors;

	  args[<span class="hljs-number">0</span>] = (useColors ? <span class="hljs-string">'%c'</span> : <span class="hljs-string">''</span>)
	    + <span class="hljs-keyword">this</span>.namespace
	    + (useColors ? <span class="hljs-string">' %c'</span> : <span class="hljs-string">' '</span>)
	    + args[<span class="hljs-number">0</span>]
	    + (useColors ? <span class="hljs-string">'%c '</span> : <span class="hljs-string">' '</span>)
	    + <span class="hljs-string">'+'</span> + exports.humanize(<span class="hljs-keyword">this</span>.diff);

	  <span class="hljs-keyword">if</span> (!useColors) <span class="hljs-keyword">return</span>;

	  <span class="hljs-keyword">var</span> c = <span class="hljs-string">'color: '</span> + <span class="hljs-keyword">this</span>.color;
	  args.splice(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, c, <span class="hljs-string">'color: inherit'</span>)

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-230" id="section-230"></a>
</div>
<p>the final &quot;%c&quot; is somewhat tricky, because there could be other
arguments passed either before or after the %c, so we need to
figure out the correct index to insert the CSS into</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>;
	  <span class="hljs-keyword">var</span> lastC = <span class="hljs-number">0</span>;
	  args[<span class="hljs-number">0</span>].replace(<span class="hljs-regexp">/%[a-zA-Z%]/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">match</span>) </span>{
	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'%%'</span> === match) <span class="hljs-keyword">return</span>;
	    index++;
	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'%c'</span> === match) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-231" id="section-231"></a>
</div>
<p>we only are interested in the <em>last</em> %c
(the user may have provided their own)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	      lastC = index;
	    }
	  });

	  args.splice(lastC, <span class="hljs-number">0</span>, c);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-232" id="section-232"></a>
</div>
<div class="dox">
<div class="summary">
<p>Invokes <code>console.log()</code> when available.
No-op when <code>console.log</code> is not a &quot;function&quot;.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">log</span>(<span class="hljs-params"></span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-233" id="section-233"></a>
</div>
<p>this hackery is required for IE8/9, where
the <code>console.log</code> function doesn't have 'apply'</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">return</span> <span class="hljs-string">'object'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">console</span>
	    &amp;&amp; <span class="hljs-built_in">console</span>.log
	    &amp;&amp; <span class="hljs-built_in">Function</span>.prototype.apply.call(<span class="hljs-built_in">console</span>.log, <span class="hljs-built_in">console</span>, <span class="hljs-built_in">arguments</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-234" id="section-234"></a>
</div>
<div class="dox">
<div class="summary">
<p>Save <code>namespaces</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">namespaces</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">save</span>(<span class="hljs-params">namespaces</span>) </span>{
	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == namespaces) {
	      exports.storage.removeItem(<span class="hljs-string">'debug'</span>);
	    } <span class="hljs-keyword">else</span> {
	      exports.storage.debug = namespaces;
	    }
	  } <span class="hljs-keyword">catch</span>(e) {}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-235" id="section-235"></a>
</div>
<div class="dox">
<div class="summary">
<p>Load <code>namespaces</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">String</span>
<span>returns the previously persisted debug modes
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">load</span>(<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> r;
	  <span class="hljs-keyword">try</span> {
	    r = exports.storage.debug;
	  } <span class="hljs-keyword">catch</span>(e) {}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-236" id="section-236"></a>
</div>
<p>If debug isn't set in LS, and we're in Electron, try to load $DEBUG</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (!r &amp;&amp; <span class="hljs-keyword">typeof</span> process !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-string">'env'</span> <span class="hljs-keyword">in</span> process) {
	    r = process.env.DEBUG;
	  }

	  <span class="hljs-keyword">return</span> r;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-237" id="section-237"></a>
</div>
<div class="dox">
<div class="summary">
<p>Enable namespaces listed in <code>localStorage.debug</code> initially.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.enable(load());

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-238" id="section-238"></a>
</div>
<div class="dox">
<div class="summary">
<p>Localstorage attempts to return the localstorage.</p>
</div>
<div class="body">
<p>This is necessary because safari throws
when a user disables cookies/localstorage
and you attempt to access it.</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">LocalStorage</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">localstorage</span>(<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">return</span> <span class="hljs-built_in">window</span>.localStorage;
	  } <span class="hljs-keyword">catch</span> (e) {}
	}

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, __webpack_require__(<span class="hljs-number">23</span>)))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 23 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-239" id="section-239"></a>
</div>
<p>shim for using process in browser</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-keyword">var</span> process = <span class="hljs-built_in">module</span>.exports = {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-240" id="section-240"></a>
</div>
<p>cached from whatever global is present so that test runners that stub it
don't break things.  But we need to wrap it in a try catch in case it is
wrapped in strict mode code which doesn't define any globals.  It's inside a
function because try/catches deoptimize in certain engines.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> cachedSetTimeout;
	<span class="hljs-keyword">var</span> cachedClearTimeout;

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultSetTimout</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'setTimeout has not been defined'</span>);
	}
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultClearTimeout</span> (<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'clearTimeout has not been defined'</span>);
	}
	(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">try</span> {
	        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> setTimeout === <span class="hljs-string">'function'</span>) {
	            cachedSetTimeout = setTimeout;
	        } <span class="hljs-keyword">else</span> {
	            cachedSetTimeout = defaultSetTimout;
	        }
	    } <span class="hljs-keyword">catch</span> (e) {
	        cachedSetTimeout = defaultSetTimout;
	    }
	    <span class="hljs-keyword">try</span> {
	        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> clearTimeout === <span class="hljs-string">'function'</span>) {
	            cachedClearTimeout = clearTimeout;
	        } <span class="hljs-keyword">else</span> {
	            cachedClearTimeout = defaultClearTimeout;
	        }
	    } <span class="hljs-keyword">catch</span> (e) {
	        cachedClearTimeout = defaultClearTimeout;
	    }
	} ())
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">runTimeout</span>(<span class="hljs-params">fun</span>) </span>{
	    <span class="hljs-keyword">if</span> (cachedSetTimeout === setTimeout) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-241" id="section-241"></a>
</div>
<p>normal enviroments in sane situations</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	        <span class="hljs-keyword">return</span> setTimeout(fun, <span class="hljs-number">0</span>);
	    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-242" id="section-242"></a>
</div>
<p>if setTimeout wasn't available but was latter defined</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">if</span> ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) &amp;&amp; setTimeout) {
	        cachedSetTimeout = setTimeout;
	        <span class="hljs-keyword">return</span> setTimeout(fun, <span class="hljs-number">0</span>);
	    }
	    <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-243" id="section-243"></a>
</div>
<p>when when somebody has screwed with setTimeout but no I.E. maddness</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	        <span class="hljs-keyword">return</span> cachedSetTimeout(fun, <span class="hljs-number">0</span>);
	    } <span class="hljs-keyword">catch</span>(e){
	        <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-244" id="section-244"></a>
</div>
<p>When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	            <span class="hljs-keyword">return</span> cachedSetTimeout.call(<span class="hljs-literal">null</span>, fun, <span class="hljs-number">0</span>);
	        } <span class="hljs-keyword">catch</span>(e){
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-245" id="section-245"></a>
</div>
<p>same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	            <span class="hljs-keyword">return</span> cachedSetTimeout.call(<span class="hljs-keyword">this</span>, fun, <span class="hljs-number">0</span>);
	        }
	    }


	}
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">runClearTimeout</span>(<span class="hljs-params">marker</span>) </span>{
	    <span class="hljs-keyword">if</span> (cachedClearTimeout === clearTimeout) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-246" id="section-246"></a>
</div>
<p>normal enviroments in sane situations</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	        <span class="hljs-keyword">return</span> clearTimeout(marker);
	    }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-247" id="section-247"></a>
</div>
<p>if clearTimeout wasn't available but was latter defined</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">if</span> ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) &amp;&amp; clearTimeout) {
	        cachedClearTimeout = clearTimeout;
	        <span class="hljs-keyword">return</span> clearTimeout(marker);
	    }
	    <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-248" id="section-248"></a>
</div>
<p>when when somebody has screwed with setTimeout but no I.E. maddness</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	        <span class="hljs-keyword">return</span> cachedClearTimeout(marker);
	    } <span class="hljs-keyword">catch</span> (e){
	        <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-249" id="section-249"></a>
</div>
<p>When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	            <span class="hljs-keyword">return</span> cachedClearTimeout.call(<span class="hljs-literal">null</span>, marker);
	        } <span class="hljs-keyword">catch</span> (e){
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-250" id="section-250"></a>
</div>
<p>same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
Some versions of I.E. have different rules for clearTimeout vs setTimeout</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	            <span class="hljs-keyword">return</span> cachedClearTimeout.call(<span class="hljs-keyword">this</span>, marker);
	        }
	    }



	}
	<span class="hljs-keyword">var</span> queue = [];
	<span class="hljs-keyword">var</span> draining = <span class="hljs-literal">false</span>;
	<span class="hljs-keyword">var</span> currentQueue;
	<span class="hljs-keyword">var</span> queueIndex = <span class="hljs-number">-1</span>;

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cleanUpNextTick</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (!draining || !currentQueue) {
	        <span class="hljs-keyword">return</span>;
	    }
	    draining = <span class="hljs-literal">false</span>;
	    <span class="hljs-keyword">if</span> (currentQueue.length) {
	        queue = currentQueue.concat(queue);
	    } <span class="hljs-keyword">else</span> {
	        queueIndex = <span class="hljs-number">-1</span>;
	    }
	    <span class="hljs-keyword">if</span> (queue.length) {
	        drainQueue();
	    }
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">drainQueue</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (draining) {
	        <span class="hljs-keyword">return</span>;
	    }
	    <span class="hljs-keyword">var</span> timeout = runTimeout(cleanUpNextTick);
	    draining = <span class="hljs-literal">true</span>;

	    <span class="hljs-keyword">var</span> len = queue.length;
	    <span class="hljs-keyword">while</span>(len) {
	        currentQueue = queue;
	        queue = [];
	        <span class="hljs-keyword">while</span> (++queueIndex &lt; len) {
	            <span class="hljs-keyword">if</span> (currentQueue) {
	                currentQueue[queueIndex].run();
	            }
	        }
	        queueIndex = <span class="hljs-number">-1</span>;
	        len = queue.length;
	    }
	    currentQueue = <span class="hljs-literal">null</span>;
	    draining = <span class="hljs-literal">false</span>;
	    runClearTimeout(timeout);
	}

	process.nextTick = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fun</span>) </span>{
	    <span class="hljs-keyword">var</span> args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-built_in">arguments</span>.length - <span class="hljs-number">1</span>);
	    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length &gt; <span class="hljs-number">1</span>) {
	        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) {
	            args[i - <span class="hljs-number">1</span>] = <span class="hljs-built_in">arguments</span>[i];
	        }
	    }
	    queue.push(<span class="hljs-keyword">new</span> Item(fun, args));
	    <span class="hljs-keyword">if</span> (queue.length === <span class="hljs-number">1</span> &amp;&amp; !draining) {
	        runTimeout(drainQueue);
	    }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-251" id="section-251"></a>
</div>
<p>v8 likes predictible objects</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Item</span>(<span class="hljs-params">fun, array</span>) </span>{
	    <span class="hljs-keyword">this</span>.fun = fun;
	    <span class="hljs-keyword">this</span>.array = array;
	}
	Item.prototype.run = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">this</span>.fun.apply(<span class="hljs-literal">null</span>, <span class="hljs-keyword">this</span>.array);
	};
	process.title = <span class="hljs-string">'browser'</span>;
	process.browser = <span class="hljs-literal">true</span>;
	process.env = {};
	process.argv = [];
	process.version = <span class="hljs-string">''</span>; <span class="hljs-comment">// empty string to avoid regexp issues</span>
	process.versions = {};

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">noop</span>(<span class="hljs-params"></span>) </span>{}

	process.on = noop;
	process.addListener = noop;
	process.once = noop;
	process.off = noop;
	process.removeListener = noop;
	process.removeAllListeners = noop;
	process.emit = noop;
	process.prependListener = noop;
	process.prependOnceListener = noop;

	process.listeners = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{ <span class="hljs-keyword">return</span> [] }

	process.binding = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name</span>) </span>{
	    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'process.binding is not supported'</span>);
	};

	process.cwd = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">'/'</span> };
	process.chdir = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">dir</span>) </span>{
	    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'process.chdir is not supported'</span>);
	};
	process.umask = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; };


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 24 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-252" id="section-252"></a>
</div>
<div class="dox">
<div class="summary">
<p>This is the common logic for both the Node.js and web browser
implementations of <code>debug()</code>.</p>
</div>
<div class="body">
<p>Expose <code>debug()</code> as the module.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports = <span class="hljs-built_in">module</span>.exports = createDebug.debug = createDebug[<span class="hljs-string">'default'</span>] = createDebug;
	exports.coerce = coerce;
	exports.disable = disable;
	exports.enable = enable;
	exports.enabled = enabled;
	exports.humanize = __webpack_require__(<span class="hljs-number">25</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-253" id="section-253"></a>
</div>
<div class="dox">
<div class="summary">
<p>Active <code>debug</code> instances.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">	exports.instances = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-254" id="section-254"></a>
</div>
<div class="dox">
<div class="summary">
<p>The currently active debug mode names, and names to skip.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.names = [];
	exports.skips = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-255" id="section-255"></a>
</div>
<div class="dox">
<div class="summary">
<p>Map of special &quot;%n&quot; handling functions, for the debug &quot;format&quot; argument.</p>
</div>
<div class="body">
<p>Valid key names are a single, lower or upper-case letter, i.e. &quot;n&quot; and &quot;N&quot;.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	exports.formatters = {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-256" id="section-256"></a>
</div>
<div class="dox">
<div class="summary">
<p>Select a color.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">namespace</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Number</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selectColor</span>(<span class="hljs-params">namespace</span>) </span>{
	  <span class="hljs-keyword">var</span> hash = <span class="hljs-number">0</span>, i;

	  <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> namespace) {
	    hash  = ((hash &lt;&lt; <span class="hljs-number">5</span>) - hash) + namespace.charCodeAt(i);
	    hash |= <span class="hljs-number">0</span>; <span class="hljs-comment">// Convert to 32bit integer</span>
	  }

	  <span class="hljs-keyword">return</span> exports.colors[<span class="hljs-built_in">Math</span>.abs(hash) % exports.colors.length];
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-257" id="section-257"></a>
</div>
<div class="dox">
<div class="summary">
<p>Create a debugger with the given <code>namespace</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">namespace</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Function</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createDebug</span>(<span class="hljs-params">namespace</span>) </span>{

	  <span class="hljs-keyword">var</span> prevTime;

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">debug</span>(<span class="hljs-params"></span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-258" id="section-258"></a>
</div>
<p>disabled?</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">if</span> (!debug.enabled) <span class="hljs-keyword">return</span>;

	    <span class="hljs-keyword">var</span> self = debug;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-259" id="section-259"></a>
</div>
<p>set <code>diff</code> timestamp</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">var</span> curr = +<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
	    <span class="hljs-keyword">var</span> ms = curr - (prevTime || curr);
	    self.diff = ms;
	    self.prev = prevTime;
	    self.curr = curr;
	    prevTime = curr;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-260" id="section-260"></a>
</div>
<p>turn the <code>arguments</code> into a proper Array</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">var</span> args = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(<span class="hljs-built_in">arguments</span>.length);
	    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; args.length; i++) {
	      args[i] = <span class="hljs-built_in">arguments</span>[i];
	    }

	    args[<span class="hljs-number">0</span>] = exports.coerce(args[<span class="hljs-number">0</span>]);

	    <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> !== <span class="hljs-keyword">typeof</span> args[<span class="hljs-number">0</span>]) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-261" id="section-261"></a>
</div>
<p>anything else let's inspect with %O</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	      args.unshift(<span class="hljs-string">'%O'</span>);
	    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-262" id="section-262"></a>
</div>
<p>apply any <code>formatters</code> transformations</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>;
	    args[<span class="hljs-number">0</span>] = args[<span class="hljs-number">0</span>].replace(<span class="hljs-regexp">/%([a-zA-Z%])/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">match, format</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-263" id="section-263"></a>
</div>
<p>if we encounter an escaped % then don't increase the array index</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	      <span class="hljs-keyword">if</span> (match === <span class="hljs-string">'%%'</span>) <span class="hljs-keyword">return</span> match;
	      index++;
	      <span class="hljs-keyword">var</span> formatter = exports.formatters[format];
	      <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> === <span class="hljs-keyword">typeof</span> formatter) {
	        <span class="hljs-keyword">var</span> val = args[index];
	        match = formatter.call(self, val);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-264" id="section-264"></a>
</div>
<p>now we need to remove <code>args[index]</code> since it's inlined in the <code>format</code></p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	        args.splice(index, <span class="hljs-number">1</span>);
	        index--;
	      }
	      <span class="hljs-keyword">return</span> match;
	    });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-265" id="section-265"></a>
</div>
<p>apply env-specific formatting (colors, etc.)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    exports.formatArgs.call(self, args);

	    <span class="hljs-keyword">var</span> logFn = debug.log || exports.log || <span class="hljs-built_in">console</span>.log.bind(<span class="hljs-built_in">console</span>);
	    logFn.apply(self, args);
	  }

	  debug.namespace = namespace;
	  debug.enabled = exports.enabled(namespace);
	  debug.useColors = exports.useColors();
	  debug.color = selectColor(namespace);
	  debug.destroy = destroy;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-266" id="section-266"></a>
</div>
<p>env-specific initialization logic for debug instances</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> === <span class="hljs-keyword">typeof</span> exports.init) {
	    exports.init(debug);
	  }

	  exports.instances.push(debug);

	  <span class="hljs-keyword">return</span> debug;
	}

	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">destroy</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> index = exports.instances.indexOf(<span class="hljs-keyword">this</span>);
	  <span class="hljs-keyword">if</span> (index !== <span class="hljs-number">-1</span>) {
	    exports.instances.splice(index, <span class="hljs-number">1</span>);
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	  }
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-267" id="section-267"></a>
</div>
<div class="dox">
<div class="summary">
<p>Enables a debug mode by namespaces. This can include modes
separated by a colon and wildcards.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">namespaces</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enable</span>(<span class="hljs-params">namespaces</span>) </span>{
	  exports.save(namespaces);

	  exports.names = [];
	  exports.skips = [];

	  <span class="hljs-keyword">var</span> i;
	  <span class="hljs-keyword">var</span> split = (<span class="hljs-keyword">typeof</span> namespaces === <span class="hljs-string">'string'</span> ? namespaces : <span class="hljs-string">''</span>).split(<span class="hljs-regexp">/[\s,]+/</span>);
	  <span class="hljs-keyword">var</span> len = split.length;

	  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i++) {
	    <span class="hljs-keyword">if</span> (!split[i]) <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// ignore empty strings</span>
	    namespaces = split[i].replace(<span class="hljs-regexp">/\*/g</span>, <span class="hljs-string">'.*?'</span>);
	    <span class="hljs-keyword">if</span> (namespaces[<span class="hljs-number">0</span>] === <span class="hljs-string">'-'</span>) {
	      exports.skips.push(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + namespaces.substr(<span class="hljs-number">1</span>) + <span class="hljs-string">'$'</span>));
	    } <span class="hljs-keyword">else</span> {
	      exports.names.push(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^'</span> + namespaces + <span class="hljs-string">'$'</span>));
	    }
	  }

	  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; exports.instances.length; i++) {
	    <span class="hljs-keyword">var</span> instance = exports.instances[i];
	    instance.enabled = exports.enabled(instance.namespace);
	  }
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-268" id="section-268"></a>
</div>
<div class="dox">
<div class="summary">
<p>Disable debug output.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">disable</span>(<span class="hljs-params"></span>) </span>{
	  exports.enable(<span class="hljs-string">''</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-269" id="section-269"></a>
</div>
<div class="dox">
<div class="summary">
<p>Returns true if the given mode name is enabled, false otherwise.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">name</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Boolean</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enabled</span>(<span class="hljs-params">name</span>) </span>{
	  <span class="hljs-keyword">if</span> (name[name.length - <span class="hljs-number">1</span>] === <span class="hljs-string">'*'</span>) {
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	  }
	  <span class="hljs-keyword">var</span> i, len;
	  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = exports.skips.length; i &lt; len; i++) {
	    <span class="hljs-keyword">if</span> (exports.skips[i].test(name)) {
	      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	    }
	  }
	  <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, len = exports.names.length; i &lt; len; i++) {
	    <span class="hljs-keyword">if</span> (exports.names[i].test(name)) {
	      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
	    }
	  }
	  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-270" id="section-270"></a>
</div>
<div class="dox">
<div class="summary">
<p>Coerce <code>val</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">val</span>
<span class="dox_type">Mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Mixed</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">coerce</span>(<span class="hljs-params">val</span>) </span>{
	  <span class="hljs-keyword">if</span> (val <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Error</span>) <span class="hljs-keyword">return</span> val.stack || val.message;
	  <span class="hljs-keyword">return</span> val;
	}


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 25 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-271" id="section-271"></a>
</div>
<div class="dox">
<div class="summary">
<p>Helpers.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> s = <span class="hljs-number">1000</span>;
	<span class="hljs-keyword">var</span> m = s * <span class="hljs-number">60</span>;
	<span class="hljs-keyword">var</span> h = m * <span class="hljs-number">60</span>;
	<span class="hljs-keyword">var</span> d = h * <span class="hljs-number">24</span>;
	<span class="hljs-keyword">var</span> y = d * <span class="hljs-number">365.25</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-272" id="section-272"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse or format the given <code>val</code>.</p>
</div>
<div class="body">
<p>Options:</p>
<ul>
<li><code>long</code> verbose formatting [false]</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">val</span>
<span class="dox_type">String</span>
<span class="dox_type">Number</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">[options]</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">String</span>
<span class="dox_type">Number</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">val, options</span>) </span>{
	  options = options || {};
	  <span class="hljs-keyword">var</span> type = <span class="hljs-keyword">typeof</span> val;
	  <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'string'</span> &amp;&amp; val.length &gt; <span class="hljs-number">0</span>) {
	    <span class="hljs-keyword">return</span> parse(val);
	  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'number'</span> &amp;&amp; <span class="hljs-built_in">isNaN</span>(val) === <span class="hljs-literal">false</span>) {
	    <span class="hljs-keyword">return</span> options.long ? fmtLong(val) : fmtShort(val);
	  }
	  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(
	    <span class="hljs-string">'val is not a non-empty string or a valid number. val='</span> +
	      <span class="hljs-built_in">JSON</span>.stringify(val)
	  );
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-273" id="section-273"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse the given <code>str</code> and return milliseconds.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">str</span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Number</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse</span>(<span class="hljs-params">str</span>) </span>{
	  str = <span class="hljs-built_in">String</span>(str);
	  <span class="hljs-keyword">if</span> (str.length &gt; <span class="hljs-number">100</span>) {
	    <span class="hljs-keyword">return</span>;
	  }
	  <span class="hljs-keyword">var</span> match = <span class="hljs-regexp">/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i</span>.exec(
	    str
	  );
	  <span class="hljs-keyword">if</span> (!match) {
	    <span class="hljs-keyword">return</span>;
	  }
	  <span class="hljs-keyword">var</span> n = <span class="hljs-built_in">parseFloat</span>(match[<span class="hljs-number">1</span>]);
	  <span class="hljs-keyword">var</span> type = (match[<span class="hljs-number">2</span>] || <span class="hljs-string">'ms'</span>).toLowerCase();
	  <span class="hljs-keyword">switch</span> (type) {
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'years'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'year'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'yrs'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'yr'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'y'</span>:
	      <span class="hljs-keyword">return</span> n * y;
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'days'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'day'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'d'</span>:
	      <span class="hljs-keyword">return</span> n * d;
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'hours'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'hour'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'hrs'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'hr'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'h'</span>:
	      <span class="hljs-keyword">return</span> n * h;
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'minutes'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'minute'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'mins'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'min'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'m'</span>:
	      <span class="hljs-keyword">return</span> n * m;
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'seconds'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'second'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'secs'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'sec'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'s'</span>:
	      <span class="hljs-keyword">return</span> n * s;
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'milliseconds'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'millisecond'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'msecs'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'msec'</span>:
	    <span class="hljs-keyword">case</span> <span class="hljs-string">'ms'</span>:
	      <span class="hljs-keyword">return</span> n;
	    <span class="hljs-keyword">default</span>:
	      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
	  }
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-274" id="section-274"></a>
</div>
<div class="dox">
<div class="summary">
<p>Short format for <code>ms</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">ms</span>
<span class="dox_type">Number</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fmtShort</span>(<span class="hljs-params">ms</span>) </span>{
	  <span class="hljs-keyword">if</span> (ms &gt;= d) {
	    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.round(ms / d) + <span class="hljs-string">'d'</span>;
	  }
	  <span class="hljs-keyword">if</span> (ms &gt;= h) {
	    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.round(ms / h) + <span class="hljs-string">'h'</span>;
	  }
	  <span class="hljs-keyword">if</span> (ms &gt;= m) {
	    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.round(ms / m) + <span class="hljs-string">'m'</span>;
	  }
	  <span class="hljs-keyword">if</span> (ms &gt;= s) {
	    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.round(ms / s) + <span class="hljs-string">'s'</span>;
	  }
	  <span class="hljs-keyword">return</span> ms + <span class="hljs-string">'ms'</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-275" id="section-275"></a>
</div>
<div class="dox">
<div class="summary">
<p>Long format for <code>ms</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">ms</span>
<span class="dox_type">Number</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">String</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fmtLong</span>(<span class="hljs-params">ms</span>) </span>{
	  <span class="hljs-keyword">return</span> plural(ms, d, <span class="hljs-string">'day'</span>) ||
	    plural(ms, h, <span class="hljs-string">'hour'</span>) ||
	    plural(ms, m, <span class="hljs-string">'minute'</span>) ||
	    plural(ms, s, <span class="hljs-string">'second'</span>) ||
	    ms + <span class="hljs-string">' ms'</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-276" id="section-276"></a>
</div>
<div class="dox">
<div class="summary">
<p>Pluralization helper.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">plural</span>(<span class="hljs-params">ms, n, name</span>) </span>{
	  <span class="hljs-keyword">if</span> (ms &lt; n) {
	    <span class="hljs-keyword">return</span>;
	  }
	  <span class="hljs-keyword">if</span> (ms &lt; n * <span class="hljs-number">1.5</span>) {
	    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(ms / n) + <span class="hljs-string">' '</span> + name;
	  }
	  <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.ceil(ms / n) + <span class="hljs-string">' '</span> + name + <span class="hljs-string">'s'</span>;
	}


<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 26 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-string">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-277" id="section-277"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module requirements.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> Polling = __webpack_require__(<span class="hljs-number">6</span>);
	<span class="hljs-keyword">var</span> inherit = __webpack_require__(<span class="hljs-number">20</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-278" id="section-278"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module exports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = JSONPPolling;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-279" id="section-279"></a>
</div>
<div class="dox">
<div class="summary">
<p>Cached regular expressions.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> rNewline = <span class="hljs-regexp">/\n/g</span>;
	<span class="hljs-keyword">var</span> rEscapedNewline = <span class="hljs-regexp">/\\n/g</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-280" id="section-280"></a>
</div>
<div class="dox">
<div class="summary">
<p>Global JSONP callbacks.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> callbacks;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-281" id="section-281"></a>
</div>
<div class="dox">
<div class="summary">
<p>Noop.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">empty</span>(<span class="hljs-params"></span>) </span>{}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-282" id="section-282"></a>
</div>
<div class="dox">
<div class="summary">
<p>JSONP Polling constructor.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts.</span>
<span class="dox_type">Object</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">JSONPPolling</span>(<span class="hljs-params">opts</span>) </span>{
	  Polling.call(<span class="hljs-keyword">this</span>, opts);

	  <span class="hljs-keyword">this</span>.query = <span class="hljs-keyword">this</span>.query || {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-283" id="section-283"></a>
</div>
<p>define global callbacks array if not present
we do this here (lazily) to avoid unneeded global pollution</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (!callbacks) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-284" id="section-284"></a>
</div>
<p>we need to consider multiple engines in the same page</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">if</span> (!global.___eio) global.___eio = [];
	    callbacks = global.___eio;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-285" id="section-285"></a>
</div>
<p>callback identifier</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.index = callbacks.length;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-286" id="section-286"></a>
</div>
<p>add callback to jsonp global</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  callbacks.push(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">msg</span>) </span>{
	    self.onData(msg);
	  });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-287" id="section-287"></a>
</div>
<p>append to query string</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">this</span>.query.j = <span class="hljs-keyword">this</span>.index;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-288" id="section-288"></a>
</div>
<p>prevent spurious errors from being emitted when the window is unloaded</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (global.document &amp;&amp; global.addEventListener) {
	    global.addEventListener(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	      <span class="hljs-keyword">if</span> (self.script) self.script.onerror = empty;
	    }, <span class="hljs-literal">false</span>);
	  }
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-289" id="section-289"></a>
</div>
<div class="dox">
<div class="summary">
<p>Inherits from Polling.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	inherit(JSONPPolling, Polling);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-290" id="section-290"></a>
</div>
<div class="dox">
<div class="summary">
<p>JSONP only supports binary as base64 encoded strings</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	JSONPPolling.prototype.supportsBinary = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-291" id="section-291"></a>
</div>
<div class="dox">
<div class="summary">
<p>Closes the socket.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	JSONPPolling.prototype.doClose = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.script) {
	    <span class="hljs-keyword">this</span>.script.parentNode.removeChild(<span class="hljs-keyword">this</span>.script);
	    <span class="hljs-keyword">this</span>.script = <span class="hljs-literal">null</span>;
	  }

	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.form) {
	    <span class="hljs-keyword">this</span>.form.parentNode.removeChild(<span class="hljs-keyword">this</span>.form);
	    <span class="hljs-keyword">this</span>.form = <span class="hljs-literal">null</span>;
	    <span class="hljs-keyword">this</span>.iframe = <span class="hljs-literal">null</span>;
	  }

	  Polling.prototype.doClose.call(<span class="hljs-keyword">this</span>);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-292" id="section-292"></a>
</div>
<div class="dox">
<div class="summary">
<p>Starts a poll cycle.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	JSONPPolling.prototype.doPoll = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  <span class="hljs-keyword">var</span> script = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);

	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.script) {
	    <span class="hljs-keyword">this</span>.script.parentNode.removeChild(<span class="hljs-keyword">this</span>.script);
	    <span class="hljs-keyword">this</span>.script = <span class="hljs-literal">null</span>;
	  }

	  script.async = <span class="hljs-literal">true</span>;
	  script.src = <span class="hljs-keyword">this</span>.uri();
	  script.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
	    self.onError(<span class="hljs-string">'jsonp poll error'</span>, e);
	  };

	  <span class="hljs-keyword">var</span> insertAt = <span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'script'</span>)[<span class="hljs-number">0</span>];
	  <span class="hljs-keyword">if</span> (insertAt) {
	    insertAt.parentNode.insertBefore(script, insertAt);
	  } <span class="hljs-keyword">else</span> {
	    (<span class="hljs-built_in">document</span>.head || <span class="hljs-built_in">document</span>.body).appendChild(script);
	  }
	  <span class="hljs-keyword">this</span>.script = script;

	  <span class="hljs-keyword">var</span> isUAgecko = <span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> navigator &amp;&amp; <span class="hljs-regexp">/gecko/i</span>.test(navigator.userAgent);

	  <span class="hljs-keyword">if</span> (isUAgecko) {
	    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	      <span class="hljs-keyword">var</span> iframe = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'iframe'</span>);
	      <span class="hljs-built_in">document</span>.body.appendChild(iframe);
	      <span class="hljs-built_in">document</span>.body.removeChild(iframe);
	    }, <span class="hljs-number">100</span>);
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-293" id="section-293"></a>
</div>
<div class="dox">
<div class="summary">
<p>Writes with a hidden iframe.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">data</span>
<span class="dox_type">String</span>
<span>to send
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">called</span>
<span class="dox_type">Function</span>
<span>upon flush.
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	JSONPPolling.prototype.doWrite = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data, fn</span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

	  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.form) {
	    <span class="hljs-keyword">var</span> form = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'form'</span>);
	    <span class="hljs-keyword">var</span> area = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'textarea'</span>);
	    <span class="hljs-keyword">var</span> id = <span class="hljs-keyword">this</span>.iframeId = <span class="hljs-string">'eio_iframe_'</span> + <span class="hljs-keyword">this</span>.index;
	    <span class="hljs-keyword">var</span> iframe;

	    form.className = <span class="hljs-string">'socketio'</span>;
	    form.style.position = <span class="hljs-string">'absolute'</span>;
	    form.style.top = <span class="hljs-string">'-1000px'</span>;
	    form.style.left = <span class="hljs-string">'-1000px'</span>;
	    form.target = id;
	    form.method = <span class="hljs-string">'POST'</span>;
	    form.setAttribute(<span class="hljs-string">'accept-charset'</span>, <span class="hljs-string">'utf-8'</span>);
	    area.name = <span class="hljs-string">'d'</span>;
	    form.appendChild(area);
	    <span class="hljs-built_in">document</span>.body.appendChild(form);

	    <span class="hljs-keyword">this</span>.form = form;
	    <span class="hljs-keyword">this</span>.area = area;
	  }

	  <span class="hljs-keyword">this</span>.form.action = <span class="hljs-keyword">this</span>.uri();

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">complete</span>(<span class="hljs-params"></span>) </span>{
	    initIframe();
	    fn();
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initIframe</span>(<span class="hljs-params"></span>) </span>{
	    <span class="hljs-keyword">if</span> (self.iframe) {
	      <span class="hljs-keyword">try</span> {
	        self.form.removeChild(self.iframe);
	      } <span class="hljs-keyword">catch</span> (e) {
	        self.onError(<span class="hljs-string">'jsonp polling iframe removal error'</span>, e);
	      }
	    }

	    <span class="hljs-keyword">try</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-294" id="section-294"></a>
</div>
<p>ie6 dynamic iframes with target=&quot;&quot; support (thanks Chris Lambacher)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	      <span class="hljs-keyword">var</span> html = <span class="hljs-string">'&lt;iframe src="javascript:0" name="'</span> + self.iframeId + <span class="hljs-string">'"&gt;'</span>;
	      iframe = <span class="hljs-built_in">document</span>.createElement(html);
	    } <span class="hljs-keyword">catch</span> (e) {
	      iframe = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'iframe'</span>);
	      iframe.name = self.iframeId;
	      iframe.src = <span class="hljs-string">'javascript:0'</span>;
	    }

	    iframe.id = self.iframeId;

	    self.form.appendChild(iframe);
	    self.iframe = iframe;
	  }

	  initIframe();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-295" id="section-295"></a>
</div>
<p>escape \n to prevent it from being converted into \r\n by some UAs
double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  data = data.replace(rEscapedNewline, <span class="hljs-string">'\\\n'</span>);
	  <span class="hljs-keyword">this</span>.area.value = data.replace(rNewline, <span class="hljs-string">'\\n'</span>);

	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">this</span>.form.submit();
	  } <span class="hljs-keyword">catch</span> (e) {}

	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.iframe.attachEvent) {
	    <span class="hljs-keyword">this</span>.iframe.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	      <span class="hljs-keyword">if</span> (self.iframe.readyState === <span class="hljs-string">'complete'</span>) {
	        complete();
	      }
	    };
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">this</span>.iframe.onload = complete;
	  }
	};
	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 27 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports, __webpack_require__</span>) </span>{

	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">global</span>) </span>{<span class="hljs-string">'use strict'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-296" id="section-296"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module dependencies.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> Transport = __webpack_require__(<span class="hljs-number">7</span>);
	<span class="hljs-keyword">var</span> parser = __webpack_require__(<span class="hljs-number">8</span>);
	<span class="hljs-keyword">var</span> parseqs = __webpack_require__(<span class="hljs-number">19</span>);
	<span class="hljs-keyword">var</span> inherit = __webpack_require__(<span class="hljs-number">20</span>);
	<span class="hljs-keyword">var</span> yeast = __webpack_require__(<span class="hljs-number">21</span>);
	<span class="hljs-keyword">var</span> debug = __webpack_require__(<span class="hljs-number">22</span>)(<span class="hljs-string">'engine.io-client:websocket'</span>);
	<span class="hljs-keyword">var</span> BrowserWebSocket = global.WebSocket || global.MozWebSocket;
	<span class="hljs-keyword">var</span> NodeWebSocket;
	<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> === <span class="hljs-string">'undefined'</span>) {
	  <span class="hljs-keyword">try</span> {
	    NodeWebSocket = __webpack_require__(<span class="hljs-number">28</span>);
	  } <span class="hljs-keyword">catch</span> (e) {}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-297" id="section-297"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get either the <code>WebSocket</code> or <code>MozWebSocket</code> globals
in the browser or try to resolve WebSocket-compatible
interface exposed by <code>ws</code> for Node-like environment.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> WebSocket = BrowserWebSocket;
	<span class="hljs-keyword">if</span> (!WebSocket &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">window</span> === <span class="hljs-string">'undefined'</span>) {
	  WebSocket = NodeWebSocket;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-298" id="section-298"></a>
</div>
<div class="dox">
<div class="summary">
<p>Module exports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-built_in">module</span>.exports = WS;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-299" id="section-299"></a>
</div>
<div class="dox">
<div class="summary">
<p>WebSocket transport constructor.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">{Object}</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">WS</span>(<span class="hljs-params">opts</span>) </span>{
	  <span class="hljs-keyword">var</span> forceBase64 = opts &amp;&amp; opts.forceBase64;
	  <span class="hljs-keyword">if</span> (forceBase64) {
	    <span class="hljs-keyword">this</span>.supportsBinary = <span class="hljs-literal">false</span>;
	  }
	  <span class="hljs-keyword">this</span>.perMessageDeflate = opts.perMessageDeflate;
	  <span class="hljs-keyword">this</span>.usingBrowserWebSocket = BrowserWebSocket &amp;&amp; !opts.forceNode;
	  <span class="hljs-keyword">this</span>.protocols = opts.protocols;
	  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.usingBrowserWebSocket) {
	    WebSocket = NodeWebSocket;
	  }
	  Transport.call(<span class="hljs-keyword">this</span>, opts);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-300" id="section-300"></a>
</div>
<div class="dox">
<div class="summary">
<p>Inherits from Transport.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	inherit(WS, Transport);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-301" id="section-301"></a>
</div>
<div class="dox">
<div class="summary">
<p>Transport name.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	WS.prototype.name = <span class="hljs-string">'websocket'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-302" id="section-302"></a>
</div>
<div class="dox">
<div class="summary">
<p>WebSockets support binary</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	WS.prototype.supportsBinary = <span class="hljs-literal">true</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-303" id="section-303"></a>
</div>
<div class="dox">
<div class="summary">
<p>Opens socket.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	WS.prototype.doOpen = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.check()) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-304" id="section-304"></a>
</div>
<p>let probe timeout</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    <span class="hljs-keyword">return</span>;
	  }

	  <span class="hljs-keyword">var</span> uri = <span class="hljs-keyword">this</span>.uri();
	  <span class="hljs-keyword">var</span> protocols = <span class="hljs-keyword">this</span>.protocols;
	  <span class="hljs-keyword">var</span> opts = {
	    <span class="hljs-attr">agent</span>: <span class="hljs-keyword">this</span>.agent,
	    <span class="hljs-attr">perMessageDeflate</span>: <span class="hljs-keyword">this</span>.perMessageDeflate
	  };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-305" id="section-305"></a>
</div>
<p>SSL options for Node.js client</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  opts.pfx = <span class="hljs-keyword">this</span>.pfx;
	  opts.key = <span class="hljs-keyword">this</span>.key;
	  opts.passphrase = <span class="hljs-keyword">this</span>.passphrase;
	  opts.cert = <span class="hljs-keyword">this</span>.cert;
	  opts.ca = <span class="hljs-keyword">this</span>.ca;
	  opts.ciphers = <span class="hljs-keyword">this</span>.ciphers;
	  opts.rejectUnauthorized = <span class="hljs-keyword">this</span>.rejectUnauthorized;
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.extraHeaders) {
	    opts.headers = <span class="hljs-keyword">this</span>.extraHeaders;
	  }
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.localAddress) {
	    opts.localAddress = <span class="hljs-keyword">this</span>.localAddress;
	  }

	  <span class="hljs-keyword">try</span> {
	    <span class="hljs-keyword">this</span>.ws = <span class="hljs-keyword">this</span>.usingBrowserWebSocket ? protocols ? <span class="hljs-keyword">new</span> WebSocket(uri, protocols) : <span class="hljs-keyword">new</span> WebSocket(uri) : <span class="hljs-keyword">new</span> WebSocket(uri, protocols, opts);
	  } <span class="hljs-keyword">catch</span> (err) {
	    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'error'</span>, err);
	  }

	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ws.binaryType === <span class="hljs-literal">undefined</span>) {
	    <span class="hljs-keyword">this</span>.supportsBinary = <span class="hljs-literal">false</span>;
	  }

	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.ws.supports &amp;&amp; <span class="hljs-keyword">this</span>.ws.supports.binary) {
	    <span class="hljs-keyword">this</span>.supportsBinary = <span class="hljs-literal">true</span>;
	    <span class="hljs-keyword">this</span>.ws.binaryType = <span class="hljs-string">'nodebuffer'</span>;
	  } <span class="hljs-keyword">else</span> {
	    <span class="hljs-keyword">this</span>.ws.binaryType = <span class="hljs-string">'arraybuffer'</span>;
	  }

	  <span class="hljs-keyword">this</span>.addEventListeners();
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-306" id="section-306"></a>
</div>
<div class="dox">
<div class="summary">
<p>Adds event listeners to the socket</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	WS.prototype.addEventListeners = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;

	  <span class="hljs-keyword">this</span>.ws.onopen = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    self.onOpen();
	  };
	  <span class="hljs-keyword">this</span>.ws.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	    self.onClose();
	  };
	  <span class="hljs-keyword">this</span>.ws.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">ev</span>) </span>{
	    self.onData(ev.data);
	  };
	  <span class="hljs-keyword">this</span>.ws.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
	    self.onError(<span class="hljs-string">'websocket error'</span>, e);
	  };
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-307" id="section-307"></a>
</div>
<div class="dox">
<div class="summary">
<p>Writes data to socket.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span class="dox_type">Array</span>
<span>of packets.
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	WS.prototype.write = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">packets</span>) </span>{
	  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
	  <span class="hljs-keyword">this</span>.writable = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-308" id="section-308"></a>
</div>
<p>encodePacket efficient as it uses WS framing
no need for encodePayload</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">var</span> total = packets.length;
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = total; i &lt; l; i++) {
	    (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">packet</span>) </span>{
	      parser.encodePacket(packet, self.supportsBinary, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
	        <span class="hljs-keyword">if</span> (!self.usingBrowserWebSocket) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-309" id="section-309"></a>
</div>
<p>always create a new object (GH-437)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	          <span class="hljs-keyword">var</span> opts = {};
	          <span class="hljs-keyword">if</span> (packet.options) {
	            opts.compress = packet.options.compress;
	          }

	          <span class="hljs-keyword">if</span> (self.perMessageDeflate) {
	            <span class="hljs-keyword">var</span> len = <span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> data ? global.Buffer.byteLength(data) : data.length;
	            <span class="hljs-keyword">if</span> (len &lt; self.perMessageDeflate.threshold) {
	              opts.compress = <span class="hljs-literal">false</span>;
	            }
	          }
	        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-310" id="section-310"></a>
</div>
<p>Sometimes the websocket has already been closed but the browser didn't
have a chance of informing us about it yet, in that case send will
throw an error</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	        <span class="hljs-keyword">try</span> {
	          <span class="hljs-keyword">if</span> (self.usingBrowserWebSocket) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-311" id="section-311"></a>
</div>
<p>TypeError is thrown when passing the second argument on Safari</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	            self.ws.send(data);
	          } <span class="hljs-keyword">else</span> {
	            self.ws.send(data, opts);
	          }
	        } <span class="hljs-keyword">catch</span> (e) {
	          debug(<span class="hljs-string">'websocket closed before onclose event'</span>);
	        }

	        --total || done();
	      });
	    })(packets[i]);
	  }

	  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">done</span>(<span class="hljs-params"></span>) </span>{
	    self.emit(<span class="hljs-string">'flush'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-312" id="section-312"></a>
</div>
<p>fake drain
defer to next tick to allow Socket to clear writeBuffer</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	      self.writable = <span class="hljs-literal">true</span>;
	      self.emit(<span class="hljs-string">'drain'</span>);
	    }, <span class="hljs-number">0</span>);
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-313" id="section-313"></a>
</div>
<div class="dox">
<div class="summary">
<p>Called upon close</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	WS.prototype.onClose = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  Transport.prototype.onClose.call(<span class="hljs-keyword">this</span>);
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-314" id="section-314"></a>
</div>
<div class="dox">
<div class="summary">
<p>Closes socket.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	WS.prototype.doClose = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.ws !== <span class="hljs-string">'undefined'</span>) {
	    <span class="hljs-keyword">this</span>.ws.close();
	  }
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-315" id="section-315"></a>
</div>
<div class="dox">
<div class="summary">
<p>Generates uri for connection.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	WS.prototype.uri = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">var</span> query = <span class="hljs-keyword">this</span>.query || {};
	  <span class="hljs-keyword">var</span> schema = <span class="hljs-keyword">this</span>.secure ? <span class="hljs-string">'wss'</span> : <span class="hljs-string">'ws'</span>;
	  <span class="hljs-keyword">var</span> port = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-316" id="section-316"></a>
</div>
<p>avoid port if default for schema</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.port &amp;&amp; (<span class="hljs-string">'wss'</span> === schema &amp;&amp; <span class="hljs-built_in">Number</span>(<span class="hljs-keyword">this</span>.port) !== <span class="hljs-number">443</span> || <span class="hljs-string">'ws'</span> === schema &amp;&amp; <span class="hljs-built_in">Number</span>(<span class="hljs-keyword">this</span>.port) !== <span class="hljs-number">80</span>)) {
	    port = <span class="hljs-string">':'</span> + <span class="hljs-keyword">this</span>.port;
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-317" id="section-317"></a>
</div>
<p>append timestamp to URI</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.timestampRequests) {
	    query[<span class="hljs-keyword">this</span>.timestampParam] = yeast();
	  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-318" id="section-318"></a>
</div>
<p>communicate binary support capabilities</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.supportsBinary) {
	    query.b64 = <span class="hljs-number">1</span>;
	  }

	  query = parseqs.encode(query);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-319" id="section-319"></a>
</div>
<p>prepend ? to query</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">	  <span class="hljs-keyword">if</span> (query.length) {
	    query = <span class="hljs-string">'?'</span> + query;
	  }

	  <span class="hljs-keyword">var</span> ipv6 = <span class="hljs-keyword">this</span>.hostname.indexOf(<span class="hljs-string">':'</span>) !== <span class="hljs-number">-1</span>;
	  <span class="hljs-keyword">return</span> schema + <span class="hljs-string">'://'</span> + (ipv6 ? <span class="hljs-string">'['</span> + <span class="hljs-keyword">this</span>.hostname + <span class="hljs-string">']'</span> : <span class="hljs-keyword">this</span>.hostname) + port + <span class="hljs-keyword">this</span>.path + query;
	};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-320" id="section-320"></a>
</div>
<div class="dox">
<div class="summary">
<p>Feature detection for WebSocket.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Boolean</span>
<span>whether this transport is available.
</span>
</div>
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">public</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	WS.prototype.check = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
	  <span class="hljs-keyword">return</span> !!WebSocket &amp;&amp; !(<span class="hljs-string">'__initialize'</span> <span class="hljs-keyword">in</span> WebSocket &amp;&amp; <span class="hljs-keyword">this</span>.name === WS.prototype.name);
	};
	<span class="hljs-comment">/* WEBPACK VAR INJECTION */</span>}.call(exports, (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; }())))

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 28 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

	<span class="hljs-comment">/* (ignored) */</span>

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 29 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

	
	<span class="hljs-keyword">var</span> indexOf = [].indexOf;

	<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">arr, obj</span>)</span>{
	  <span class="hljs-keyword">if</span> (indexOf) <span class="hljs-keyword">return</span> arr.indexOf(obj);
	  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; ++i) {
	    <span class="hljs-keyword">if</span> (arr[i] === obj) <span class="hljs-keyword">return</span> i;
	  }
	  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
	};

<span class="hljs-comment">/***/</span> },
<span class="hljs-comment">/* 30 */</span>
<span class="hljs-comment">/***/</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, exports</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-321" id="section-321"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parses an URI</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">API</div>
<div class="dox_tag_detail">
<span class="dox_type">private</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
	<span class="hljs-keyword">var</span> re = <span class="hljs-regexp">/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/</span>;

	<span class="hljs-keyword">var</span> parts = [
	    <span class="hljs-string">'source'</span>, <span class="hljs-string">'protocol'</span>, <span class="hljs-string">'authority'</span>, <span class="hljs-string">'userInfo'</span>, <span class="hljs-string">'user'</span>, <span class="hljs-string">'password'</span>, <span class="hljs-string">'host'</span>, <span class="hljs-string">'port'</span>, <span class="hljs-string">'relative'</span>, <span class="hljs-string">'path'</span>, <span class="hljs-string">'directory'</span>, <span class="hljs-string">'file'</span>, <span class="hljs-string">'query'</span>, <span class="hljs-string">'anchor'</span>
	];

	<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseuri</span>(<span class="hljs-params">str</span>) </span>{
	    <span class="hljs-keyword">var</span> src = str,
	        b = str.indexOf(<span class="hljs-string">'['</span>),
	        e = str.indexOf(<span class="hljs-string">']'</span>);

	    <span class="hljs-keyword">if</span> (b != <span class="hljs-number">-1</span> &amp;&amp; e != <span class="hljs-number">-1</span>) {
	        str = str.substring(<span class="hljs-number">0</span>, b) + str.substring(b, e).replace(<span class="hljs-regexp">/:/g</span>, <span class="hljs-string">';'</span>) + str.substring(e, str.length);
	    }

	    <span class="hljs-keyword">var</span> m = re.exec(str || <span class="hljs-string">''</span>),
	        uri = {},
	        i = <span class="hljs-number">14</span>;

	    <span class="hljs-keyword">while</span> (i--) {
	        uri[parts[i]] = m[i] || <span class="hljs-string">''</span>;
	    }

	    <span class="hljs-keyword">if</span> (b != <span class="hljs-number">-1</span> &amp;&amp; e != <span class="hljs-number">-1</span>) {
	        uri.source = src;
	        uri.host = uri.host.substring(<span class="hljs-number">1</span>, uri.host.length - <span class="hljs-number">1</span>).replace(<span class="hljs-regexp">/;/g</span>, <span class="hljs-string">':'</span>);
	        uri.authority = uri.authority.replace(<span class="hljs-string">'['</span>, <span class="hljs-string">''</span>).replace(<span class="hljs-string">']'</span>, <span class="hljs-string">''</span>).replace(<span class="hljs-regexp">/;/g</span>, <span class="hljs-string">':'</span>);
	        uri.ipv6uri = <span class="hljs-literal">true</span>;
	    }

	    <span class="hljs-keyword">return</span> uri;
	};


<span class="hljs-comment">/***/</span> }
<span class="hljs-comment">/******/</span> ])
});
;
</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
