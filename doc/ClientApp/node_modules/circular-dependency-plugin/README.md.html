<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "ClientApp\\node_modules\\circular-dependency-plugin\\README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h2">
        <a href="#circular-dependency-plugin">Circular Dependency Plugin</a>
      </div>

      <div class="heading h3">
        <a href="#basic-usage">Basic Usage</a>
      </div>

      <div class="heading h3">
        <a href="#advanced-usage">Advanced Usage</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="circular-dependency-plugin">
  <h2>
    <a href="#circular-dependency-plugin" name="circular-dependency-plugin" class="pilcrow"></a>
Circular Dependency Plugin
  </h2>
</div>
<p>Detect modules with circular dependencies when bundling with webpack.</p>
<p>Circular dependencies are often a necessity in complex software, the presence of a circular dependency doesn't always imply a bug, but in the case where you believe a bug exists, this module may help find it.</p>
<div class="pilwrap" id="basic-usage">
  <h3>
    <a href="#basic-usage" name="basic-usage" class="pilcrow"></a>
Basic Usage
  </h3>
</div>
<pre><code class="js"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-keyword">const</span> CircularDependencyPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'circular-dependency-plugin'</span>)

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index"</span>,
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> CircularDependencyPlugin({
      <span class="hljs-comment">// exclude detection of files based on a RegExp</span>
      exclude: <span class="hljs-regexp">/a\.js|node_modules/</span>,
      <span class="hljs-comment">// add errors to webpack instead of warnings</span>
      failOnError: <span class="hljs-literal">true</span>,
      <span class="hljs-comment">// set the current working directory for displaying module paths</span>
      cwd: process.cwd(),
    })
  ]
}
</code></pre>
<div class="pilwrap" id="advanced-usage">
  <h3>
    <a href="#advanced-usage" name="advanced-usage" class="pilcrow"></a>
Advanced Usage
  </h3>
</div>
<pre><code class="js"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-keyword">const</span> CircularDependencyPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'circular-dependency-plugin'</span>)

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index"</span>,
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> CircularDependencyPlugin({
      <span class="hljs-comment">// `onStart` is called before the cycle detection starts</span>
      onStart({ compilation }) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'start detecting webpack modules cycles'</span>);
      },
      <span class="hljs-comment">// `onDetected` is called for each module that is cyclical</span>
      onDetected({ <span class="hljs-attr">module</span>: webpackModuleRecord, paths, compilation }) {
        <span class="hljs-comment">// `paths` will be an Array of the relative module paths that make up the cycle</span>
        <span class="hljs-comment">// `module` will be the module record generated by webpack that caused the cycle</span>
        compilation.errors.push(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(paths.join(<span class="hljs-string">' -&gt; '</span>)))
      },
      <span class="hljs-comment">// `onEnd` is called before the cycle detection ends</span>
      onEnd({ compilation }) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'end detecting webpack modules cycles'</span>);
      },
    })
  ]
}
</code></pre>
<p>If you have some number of cycles and want to fail if any new ones are
introduced, you can use the life cycle methods to count and fail when the
count is exceeded. (Note if you care about detecting a cycle being replaced by
another, this won't catch that.)</p>
<pre><code class="js"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-keyword">const</span> CircularDependencyPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'circular-dependency-plugin'</span>)

<span class="hljs-keyword">const</span> MAX_CYCLES = <span class="hljs-number">5</span>;
<span class="hljs-keyword">let</span> numCyclesDetected = <span class="hljs-number">0</span>;

<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">"./src/index"</span>,
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> CircularDependencyPlugin({
      onStart({ compilation }) {
        numCyclesDetected = <span class="hljs-number">0</span>;
      },
      onDetected({ <span class="hljs-attr">module</span>: webpackModuleRecord, paths, compilation }) {
        numCyclesDetected++;
        compilation.warnings.push(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(paths.join(<span class="hljs-string">' -&gt; '</span>)))
      },
      onEnd({ compilation }) {
        <span class="hljs-keyword">if</span> (numCyclesDetected &gt; MAX_CYCLES) {
          compilation.errors.push(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(
            <span class="hljs-string">`Detected <span class="hljs-subst">${numCyclesDetected}</span> cycles which exceeds configured limit of <span class="hljs-subst">${MAX_CYCLES}</span>`</span>
          ));
        }
      },
    })
  ]
}
</code></pre>
<pre><code></code></pre>
</div>
  </div>
</body>
</html>
