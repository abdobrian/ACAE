<!DOCTYPE html>
<html>
<head>
  <title>adm-zip.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "ClientApp\\node_modules\\adm-zip\\adm-zip.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>adm-zip.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript"><span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>),
    pth = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);

fs.existsSync = fs.existsSync || pth.existsSync;

<span class="hljs-keyword">var</span> ZipEntry = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./zipEntry"</span>),
    ZipFile =  <span class="hljs-built_in">require</span>(<span class="hljs-string">"./zipFile"</span>),
    Utils = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./util"</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*String*/i</span>nput</span>) </span>{
    <span class="hljs-keyword">var</span> _zip = <span class="hljs-literal">undefined</span>,
        _filename = <span class="hljs-string">""</span>;

    <span class="hljs-keyword">if</span> (input &amp;&amp; <span class="hljs-keyword">typeof</span> input === <span class="hljs-string">"string"</span>) { <span class="hljs-comment">// load zip file</span>
        <span class="hljs-keyword">if</span> (fs.existsSync(input)) {
            _filename = input;
            _zip = <span class="hljs-keyword">new</span> ZipFile(input, Utils.Constants.FILE);
        } <span class="hljs-keyword">else</span> {
           <span class="hljs-keyword">throw</span> Utils.Errors.INVALID_FILENAME;
        }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(input &amp;&amp; Buffer.isBuffer(input)) { <span class="hljs-comment">// load buffer</span>
        _zip = <span class="hljs-keyword">new</span> ZipFile(input, Utils.Constants.BUFFER);
    } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// create new zip file</span>
        _zip = <span class="hljs-keyword">new</span> ZipFile(<span class="hljs-literal">null</span>, Utils.Constants.NONE);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEntry</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry</span>) </span>{
        <span class="hljs-keyword">if</span> (entry &amp;&amp; _zip) {
            <span class="hljs-keyword">var</span> item;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<p>If entry was given as a file name</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> entry === <span class="hljs-string">"string"</span>)
                item = _zip.getEntry(entry);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<p>if entry was given as a ZipEntry object</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> entry === <span class="hljs-string">"object"</span> &amp;&amp; entry.entryName != <span class="hljs-literal">undefined</span> &amp;&amp; entry.header != <span class="hljs-literal">undefined</span>)
                item =  _zip.getEntry(entry.entryName);

            <span class="hljs-keyword">if</span> (item) {
                <span class="hljs-keyword">return</span> item;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">return</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>Extracts the given entry from the archive and returns the content as a Buffer object</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entry</span>
<span>ZipEntry object or String with the full path of the entry
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>Buffer or Null in case of error
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        readFile : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry</span>) </span>{
            <span class="hljs-keyword">var</span> item = getEntry(entry);
            <span class="hljs-keyword">return</span> item &amp;&amp; item.getData() || <span class="hljs-literal">null</span>;
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>Asynchronous readFile</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entry</span>
<span>ZipEntry object or String with the full path of the entry
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>Buffer or Null in case of error
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        readFileAsync : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry, <span class="hljs-regexp">/*Function*/</span>callback</span>) </span>{
            <span class="hljs-keyword">var</span> item = getEntry(entry);
            <span class="hljs-keyword">if</span> (item) {
                item.getDataAsync(callback);
            } <span class="hljs-keyword">else</span> {
                callback(<span class="hljs-literal">null</span>,<span class="hljs-string">"getEntry failed for:"</span> + entry)
            }
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>Extracts the given entry from the archive and returns the content as plain text in the given encoding</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entry</span>
<span>ZipEntry object or String with the full path of the entry
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">encoding</span>
<span>Optional. If no encoding is specified utf8 is used
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>String
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        readAsText : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry, <span class="hljs-regexp">/*String - Optional*/</span>encoding</span>) </span>{
            <span class="hljs-keyword">var</span> item = getEntry(entry);
            <span class="hljs-keyword">if</span> (item) {
                <span class="hljs-keyword">var</span> data = item.getData();
                <span class="hljs-keyword">if</span> (data &amp;&amp; data.length) {
                    <span class="hljs-keyword">return</span> data.toString(encoding || <span class="hljs-string">"utf8"</span>);
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>Asynchronous readAsText</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entry</span>
<span>ZipEntry object or String with the full path of the entry
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">encoding</span>
<span>Optional. If no encoding is specified utf8 is used
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>String
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        readAsTextAsync : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry, <span class="hljs-regexp">/*Function*/</span>callback, <span class="hljs-regexp">/*String - Optional*/</span>encoding</span>) </span>{
            <span class="hljs-keyword">var</span> item = getEntry(entry);
            <span class="hljs-keyword">if</span> (item) {
                item.getDataAsync(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
                    <span class="hljs-keyword">if</span> (data &amp;&amp; data.length) {
                        callback(data.toString(encoding || <span class="hljs-string">"utf8"</span>));
                    } <span class="hljs-keyword">else</span> {
                        callback(<span class="hljs-string">""</span>);
                    }
                })
            } <span class="hljs-keyword">else</span> {
                callback(<span class="hljs-string">""</span>);
            }
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
<p>Remove the entry from the file or the entry and all it's nested directories and files if the given entry is a directory</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entry</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        deleteFile : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry</span>) </span>{ <span class="hljs-comment">// @<span class="hljs-doctag">TODO:</span> test deleteFile</span>
            <span class="hljs-keyword">var</span> item = getEntry(entry);
            <span class="hljs-keyword">if</span> (item) {
                _zip.deleteEntry(item.entryName);
            }
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>Adds a comment to the zip. The zip must be rewritten after adding the comment.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">comment</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        addZipComment : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*String*/</span>comment</span>) </span>{ <span class="hljs-comment">// @<span class="hljs-doctag">TODO:</span> test addZipComment</span>
            _zip.comment = comment;
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<div class="dox">
<div class="summary">
<p>Returns the zip comment</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>String
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        getZipComment : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> _zip.comment || <span class="hljs-string">''</span>;
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>Adds a comment to a specified zipEntry. The zip must be rewritten after adding the comment
The comment cannot exceed 65535 characters in length</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entry</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">comment</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        addZipEntryComment : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry,<span class="hljs-regexp">/*String*/</span>comment</span>) </span>{
            <span class="hljs-keyword">var</span> item = getEntry(entry);
            <span class="hljs-keyword">if</span> (item) {
                item.comment = comment;
            }
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
<p>Returns the comment of the specified entry</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entry</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>String
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        getZipEntryComment : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry</span>) </span>{
            <span class="hljs-keyword">var</span> item = getEntry(entry);
            <span class="hljs-keyword">if</span> (item) {
                <span class="hljs-keyword">return</span> item.comment || <span class="hljs-string">''</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>Updates the content of an existing entry inside the archive. The zip must be rewritten after updating the content</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entry</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">content</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        updateFile : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry, <span class="hljs-regexp">/*Buffer*/</span>content</span>) </span>{
            <span class="hljs-keyword">var</span> item = getEntry(entry);
            <span class="hljs-keyword">if</span> (item) {
                item.setData(content);
            }
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>Adds a file from the disk to the archive</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">localPath</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        addLocalFile : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*String*/</span>localPath, <span class="hljs-regexp">/*String*/</span>zipPath, <span class="hljs-regexp">/*String*/</span>zipName</span>) </span>{
             <span class="hljs-keyword">if</span> (fs.existsSync(localPath)) {
                <span class="hljs-keyword">if</span>(zipPath){
                    zipPath=zipPath.split(<span class="hljs-string">"\\"</span>).join(<span class="hljs-string">"/"</span>);
                    <span class="hljs-keyword">if</span>(zipPath.charAt(zipPath.length - <span class="hljs-number">1</span>) != <span class="hljs-string">"/"</span>){
                        zipPath += <span class="hljs-string">"/"</span>;
                    }
                }<span class="hljs-keyword">else</span>{
                    zipPath=<span class="hljs-string">""</span>;
                }
                 <span class="hljs-keyword">var</span> p = localPath.split(<span class="hljs-string">"\\"</span>).join(<span class="hljs-string">"/"</span>).split(<span class="hljs-string">"/"</span>).pop();
                
                 <span class="hljs-keyword">if</span>(zipName){
                    <span class="hljs-keyword">this</span>.addFile(zipPath+zipName, fs.readFileSync(localPath), <span class="hljs-string">""</span>, <span class="hljs-number">0</span>)
                 }<span class="hljs-keyword">else</span>{
                    <span class="hljs-keyword">this</span>.addFile(zipPath+p, fs.readFileSync(localPath), <span class="hljs-string">""</span>, <span class="hljs-number">0</span>)
                 }
             } <span class="hljs-keyword">else</span> {
                 <span class="hljs-keyword">throw</span> Utils.Errors.FILE_NOT_FOUND.replace(<span class="hljs-string">"%s"</span>, localPath);
             }
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
<p>Adds a local directory and all its nested files and directories to the archive</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">localPath</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">zipPath</span>
<span>optional path inside zip
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">filter</span>
<span>optional RegExp or Function if files match will               be included.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        addLocalFolder : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*String*/</span>localPath, <span class="hljs-regexp">/*String*/</span>zipPath, <span class="hljs-regexp">/*RegExp|Function*/</span>filter</span>) </span>{
            <span class="hljs-keyword">if</span> (filter === <span class="hljs-literal">undefined</span>) {
              filter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; };
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (filter <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">RegExp</span>) {
              filter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filter</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">filename</span>) </span>{
                  <span class="hljs-keyword">return</span> filter.test(filename);
                }
              }(filter);
            }

            <span class="hljs-keyword">if</span>(zipPath){
                zipPath=zipPath.split(<span class="hljs-string">"\\"</span>).join(<span class="hljs-string">"/"</span>);
                <span class="hljs-keyword">if</span>(zipPath.charAt(zipPath.length - <span class="hljs-number">1</span>) != <span class="hljs-string">"/"</span>){
                    zipPath += <span class="hljs-string">"/"</span>;
                }
            }<span class="hljs-keyword">else</span>{
                zipPath=<span class="hljs-string">""</span>;
            }
			localPath = localPath.split(<span class="hljs-string">"\\"</span>).join(<span class="hljs-string">"/"</span>); <span class="hljs-comment">//windows fix</span>
            localPath = pth.normalize(localPath);
            <span class="hljs-keyword">if</span> (localPath.charAt(localPath.length - <span class="hljs-number">1</span>) != <span class="hljs-string">"/"</span>)
                localPath += <span class="hljs-string">"/"</span>;

            <span class="hljs-keyword">if</span> (fs.existsSync(localPath)) {

                <span class="hljs-keyword">var</span> items = Utils.findFiles(localPath),
                    self = <span class="hljs-keyword">this</span>;

                <span class="hljs-keyword">if</span> (items.length) {
                    items.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">path</span>) </span>{
						<span class="hljs-keyword">var</span> p = path.split(<span class="hljs-string">"\\"</span>).join(<span class="hljs-string">"/"</span>).replace( <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(localPath, <span class="hljs-string">'i'</span>), <span class="hljs-string">""</span>); <span class="hljs-comment">//windows fix</span>
                        <span class="hljs-keyword">if</span> (filter(p)) {
                            <span class="hljs-keyword">if</span> (p.charAt(p.length - <span class="hljs-number">1</span>) !== <span class="hljs-string">"/"</span>) {
                                self.addFile(zipPath+p, fs.readFileSync(path), <span class="hljs-string">""</span>, <span class="hljs-number">0</span>)
                            } <span class="hljs-keyword">else</span> {
                                self.addFile(zipPath+p, <span class="hljs-keyword">new</span> Buffer(<span class="hljs-number">0</span>), <span class="hljs-string">""</span>, <span class="hljs-number">0</span>)
                            }
                        }
                    });
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> Utils.Errors.FILE_NOT_FOUND.replace(<span class="hljs-string">"%s"</span>, localPath);
            }
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<div class="dox">
<div class="summary">
<p>Allows you to create a entry (file or directory) in the zip file.
If you want to create a directory the entryName must end in / and a null buffer should be provided.
Comment and attributes are optional</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entryName</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">content</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">comment</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">attr</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        addFile : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*String*/</span>entryName, <span class="hljs-regexp">/*Buffer*/</span>content, <span class="hljs-regexp">/*String*/</span>comment, <span class="hljs-regexp">/*Number*/</span>attr</span>) </span>{
            <span class="hljs-keyword">var</span> entry = <span class="hljs-keyword">new</span> ZipEntry();
            entry.entryName = entryName;
            entry.comment = comment || <span class="hljs-string">""</span>;
            entry.attr = attr || <span class="hljs-number">438</span>; <span class="hljs-comment">//0666;</span>
            <span class="hljs-keyword">if</span> (entry.isDirectory &amp;&amp; content.length) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>throw Utils.Errors.DIRECTORY_CONTENT_ERROR;</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            }
            entry.setData(content);
            _zip.setEntry(entry);
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<div class="dox">
<div class="summary">
<p>Returns an array of ZipEntry objects representing the files and folders inside the archive</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>Array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        getEntries : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (_zip) {
               <span class="hljs-keyword">return</span> _zip.entries;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> [];
            }
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<div class="dox">
<div class="summary">
<p>Returns a ZipEntry object representing the file or folder specified by <code>name</code>.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">name</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>ZipEntry
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        getEntry : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*String*/</span>name</span>) </span>{
            <span class="hljs-keyword">return</span> getEntry(name);
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<div class="dox">
<div class="summary">
<p>Extracts the given entry to the given targetPath
If the entry is a directory inside the archive, the entire directory and it's subdirectories will be extracted</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">entry</span>
<span>ZipEntry object or String with the full path of the entry
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">targetPath</span>
<span>Target folder where to write the file
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">maintainEntryPath</span>
<span>If maintainEntryPath is true and the entry is inside a folder, the entry folder                          will be created in targetPath as well. Default is TRUE
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">overwrite</span>
<span>If the file already exists at the target path, the file will be overwriten if this is true.                  Default is FALSE
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>Boolean
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        extractEntryTo : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Object*/</span>entry, <span class="hljs-regexp">/*String*/</span>targetPath, <span class="hljs-regexp">/*Boolean*/m</span>aintainEntryPath, <span class="hljs-regexp">/*Boolean*/</span>overwrite</span>) </span>{
            overwrite = overwrite || <span class="hljs-literal">false</span>;
            maintainEntryPath = <span class="hljs-keyword">typeof</span> maintainEntryPath == <span class="hljs-string">"undefined"</span> ? <span class="hljs-literal">true</span> : maintainEntryPath;

            <span class="hljs-keyword">var</span> item = getEntry(entry);
            <span class="hljs-keyword">if</span> (!item) {
                <span class="hljs-keyword">throw</span> Utils.Errors.NO_ENTRY;
            }

            <span class="hljs-keyword">var</span> target = pth.resolve(targetPath, maintainEntryPath ? item.entryName : pth.basename(item.entryName));

            <span class="hljs-keyword">if</span> (item.isDirectory) {
                target = pth.resolve(target, <span class="hljs-string">".."</span>);
                <span class="hljs-keyword">var</span> children = _zip.getEntryChildren(item);
                children.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">child</span>) </span>{
                    <span class="hljs-keyword">if</span> (child.isDirectory) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">var</span> content = child.getData();
                    <span class="hljs-keyword">if</span> (!content) {
                        <span class="hljs-keyword">throw</span> Utils.Errors.CANT_EXTRACT_FILE;
                    }
                    Utils.writeFileTo(pth.resolve(targetPath, maintainEntryPath ? child.entryName : child.entryName.substr(item.entryName.length)), content, overwrite);
                });
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }

            <span class="hljs-keyword">var</span> content = item.getData();
            <span class="hljs-keyword">if</span> (!content) <span class="hljs-keyword">throw</span> Utils.Errors.CANT_EXTRACT_FILE;

            <span class="hljs-keyword">if</span> (fs.existsSync(target) &amp;&amp; !overwrite) {
                <span class="hljs-keyword">throw</span> Utils.Errors.CANT_OVERRIDE;
            }
            Utils.writeFileTo(target, content, overwrite);

            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<div class="dox">
<div class="summary">
<p>Extracts the entire archive to the given location</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">targetPath</span>
<span>Target location
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">overwrite</span>
<span>If the file already exists at the target path, the file will be overwriten if this is true.                  Default is FALSE
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        extractAllTo : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*String*/</span>targetPath, <span class="hljs-regexp">/*Boolean*/</span>overwrite</span>) </span>{
            overwrite = overwrite || <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (!_zip) {
                <span class="hljs-keyword">throw</span> Utils.Errors.NO_ZIP;
            }

            _zip.entries.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) </span>{
                <span class="hljs-keyword">if</span> (entry.isDirectory) {
                    Utils.makeDir(pth.resolve(targetPath, entry.entryName.toString()));
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">var</span> content = entry.getData();
                <span class="hljs-keyword">if</span> (!content) {
                    <span class="hljs-keyword">throw</span> Utils.Errors.CANT_EXTRACT_FILE + <span class="hljs-string">"2"</span>;
                }
                Utils.writeFileTo(pth.resolve(targetPath, entry.entryName.toString()), content, overwrite);
            })
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<div class="dox">
<div class="summary">
<p>Asynchronous extractAllTo</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">targetPath</span>
<span>Target location
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">overwrite</span>
<span>If the file already exists at the target path, the file will be overwriten if this is true.                  Default is FALSE
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        extractAllToAsync : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*String*/</span>targetPath, <span class="hljs-regexp">/*Boolean*/</span>overwrite, <span class="hljs-regexp">/*Function*/</span>callback</span>) </span>{
            overwrite = overwrite || <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (!_zip) {
                callback(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(Utils.Errors.NO_ZIP));
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-keyword">var</span> entries = _zip.entries;
            <span class="hljs-keyword">var</span> i = entries.length; 
            entries.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">entry</span>) </span>{
                <span class="hljs-keyword">if</span>(i &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// Had an error already</span>

                <span class="hljs-keyword">if</span> (entry.isDirectory) {
                    Utils.makeDir(pth.resolve(targetPath, entry.entryName.toString()));
                    <span class="hljs-keyword">if</span>(--i == <span class="hljs-number">0</span>)
                        callback(<span class="hljs-literal">undefined</span>);
                    <span class="hljs-keyword">return</span>;
                }
                entry.getDataAsync(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">content</span>) </span>{
                    <span class="hljs-keyword">if</span>(i &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
                    <span class="hljs-keyword">if</span> (!content) {
                        i = <span class="hljs-number">0</span>;
                        callback(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(Utils.Errors.CANT_EXTRACT_FILE + <span class="hljs-string">"2"</span>));
                        <span class="hljs-keyword">return</span>;
                    }
                    Utils.writeFileToAsync(pth.resolve(targetPath, entry.entryName.toString()), content, overwrite, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">succ</span>) </span>{
                        <span class="hljs-keyword">if</span>(i &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

                        <span class="hljs-keyword">if</span>(!succ) {
                            i = <span class="hljs-number">0</span>;
                            callback(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Unable to write'</span>));
                            <span class="hljs-keyword">return</span>;
                        }

                        <span class="hljs-keyword">if</span>(--i == <span class="hljs-number">0</span>)
                            callback(<span class="hljs-literal">undefined</span>);
                    });
                    
                });
            })
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<div class="dox">
<div class="summary">
<p>Writes the newly created zip file to disk at the specified location or if a zip was opened and no <code>targetFileName</code> is provided, it will overwrite the opened zip</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">targetFileName</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">callback</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        writeZip : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*String*/</span>targetFileName, <span class="hljs-regexp">/*Function*/</span>callback</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">arguments</span>.length == <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> targetFileName == <span class="hljs-string">"function"</span>) {
                    callback = targetFileName;
                    targetFileName = <span class="hljs-string">""</span>;
                }
            }

            <span class="hljs-keyword">if</span> (!targetFileName &amp;&amp; _filename) {
                targetFileName = _filename;
            }
            <span class="hljs-keyword">if</span> (!targetFileName) <span class="hljs-keyword">return</span>;

            <span class="hljs-keyword">var</span> zipData = _zip.compressToBuffer();
            <span class="hljs-keyword">if</span> (zipData) {
                <span class="hljs-keyword">var</span> ok = Utils.writeFileTo(targetFileName, zipData, <span class="hljs-literal">true</span>);
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback == <span class="hljs-string">'function'</span>) callback(!ok? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"failed"</span>): <span class="hljs-literal">null</span>, <span class="hljs-string">""</span>);
            }
        },

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<div class="dox">
<div class="summary">
<p>Returns the content of the entire zip file as a Buffer object</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>Buffer
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        toBuffer : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-regexp">/*Function*/</span>onSuccess,<span class="hljs-regexp">/*Function*/</span>onFail,<span class="hljs-regexp">/*Function*/</span>onItemStart,<span class="hljs-regexp">/*Function*/</span>onItemEnd</span>) </span>{
            <span class="hljs-keyword">this</span>.valueOf = <span class="hljs-number">2</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> onSuccess == <span class="hljs-string">"function"</span>) {
                _zip.toAsyncBuffer(onSuccess,onFail,onItemStart,onItemEnd);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            <span class="hljs-keyword">return</span> _zip.compressToBuffer()
        }
    }
};

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
