<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "ClientApp\\node_modules\\denodeify\\README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#denodeify">denodeify  </a>
      </div>

      <div class="heading h2">
        <a href="#installation">Installation</a>
      </div>

      <div class="heading h2">
        <a href="#examples">Examples</a>
      </div>

      <div class="heading h2">
        <a href="#advanced-usage">Advanced usage</a>
      </div>

      <div class="heading h2">
        <a href="#credits-and-collaboration">Credits and collaboration</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="denodeify">
  <h1>
    <a href="#denodeify" name="denodeify" class="pilcrow"></a>
denodeify <a href="https://codeship.io/projects/34622"> <img src="https://codeship.io/projects/02ac77d0-1a58-0132-bf86-4a07366ee29d/status" alt="Codeship Status for matthew-andrews/denodeify"></a>
  </h1>
</div>
<p>Tool to turn functions with Node-style callback APIs into functions that return <a href="https://github.com/jakearchibald/es6-promise">Promises</a>.</p>
<p>Inspired by and adapted from Q's <a href="https://github.com/kriskowal/q/wiki/API-Reference#qnfbindnodefunc-args"><code>Q.denodeify</code>/<code>Q.nfcall</code> function</a>.</p>
<p>Warning: This micro-library doesn't force you to use any particular Promise implementation by using whatever <code>Promise</code> has been defined as globally.  This is so that you may use any ES6 standard Promise compliant library - or, of course, native ES6 Promises.</p>
<p>If you're running the code on a browser or node version that doesn't include native promises you will need to include a polyfill.  The following polyfills are tested as part of this module's test suite:-</p>
<ul>
<li><a href="https://twitter.com/jaffathecake">Jake Archibald</a>'s <a href="https://github.com/jakearchibald/es6-promise">ES6 Promise library</a> (which is actually adapted from <a href="https://twitter.com/stefanpenner">Stefan Penner</a>'s <a href="https://github.com/tildeio/rsvp.js">RSVP.js</a>). -  <code>require('es6-promise').polyfill();</code></li>
<li><a href="https://twitter.com/getify">Getify</a>'s <a href="https://github.com/getify/native-promise-only">Native Promise Only library</a> - <code>require('native-promise-only');</code></li>
<li><a href="https://github.com/es-shims/es6-shim">ES6 Shim</a> - <code>require('es6-shim');</code></li>
<li><a href="https://twitter.com/CWMma">Calvin Metcalf</a>'s <a href="https://github.com/calvinmetcalf/lie">Lie</a> - <code>global.Promise = global.Promise || require('lie');</code></li>
</ul>
<p>Note: as of v1.2.0 you can use <strong>denodeify</strong> in the front end.  Pull it in via CommonJS, AMD or simply add to your webpage and it'll be available on <code>window.denodeify</code>.</p>
<div class="pilwrap" id="installation">
  <h2>
    <a href="#installation" name="installation" class="pilcrow"></a>
Installation
  </h2>
</div>
<pre><code>npm install denodeify --save
</code></pre>
<p>Or:-</p>
<pre><code>bower install denodeify --save
</code></pre>
<div class="pilwrap" id="examples">
  <h2>
    <a href="#examples" name="examples" class="pilcrow"></a>
Examples
  </h2>
</div>
<p>Simple example with <a href="https://www.npmjs.org/package/read-file"><code>readFile</code></a>:-</p>
<pre><code class="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'es6-promise'</span>).polyfill();

<span class="hljs-keyword">var</span> denodeify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'denodeify'</span>);
<span class="hljs-keyword">var</span> readFile = denodeify(<span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>).readFile);

readFile(<span class="hljs-string">'my-file.txt'</span>, { <span class="hljs-attr">encoding</span>: <span class="hljs-string">'UTF-8'</span> })
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"My file's contents is: "</span> + text);
  });
</code></pre>
<p>(Note: you will need to also install <a href="https://github.com/jakearchibald/es6-promise">es6-promise</a> with <code>npm install es6-promise</code> for this code sample to work within node versions that don't have <code>Promise</code> natively available)</p>
<p>More complex example with <code>exec</code>:-</p>
<div class="pilwrap" id="advanced-usage">
  <h2>
    <a href="#advanced-usage" name="advanced-usage" class="pilcrow"></a>
Advanced usage
  </h2>
</div>
<p>You can also pass in a function as a second argument of <code>denodeify</code> that allows you to manipulate the data returned by the wrapped function before it gets passed to the Promise's <code>reject</code> or <code>resolve</code> functions, for example:-</p>
<pre><code class="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'es6-promise'</span>).polyfill();

<span class="hljs-keyword">var</span> denodeify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'denodeify'</span>);
<span class="hljs-keyword">var</span> exec = denodeify(<span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>).exec, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, stdout, stderr</span>) </span>{

  <span class="hljs-comment">// Throw away stderr data</span>
  <span class="hljs-keyword">return</span> [err, stdout];
});

exec(<span class="hljs-string">'hostname'</span>)
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">host</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"My hostname is: "</span> + host.replace(<span class="hljs-string">'\n'</span>, <span class="hljs-string">''</span>));
  });
</code></pre>
<p>Or,</p>
<pre><code class="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'es6-promise'</span>).polyfill();

<span class="hljs-keyword">var</span> denodeify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'denodeify'</span>);
<span class="hljs-keyword">var</span> exec = denodeify(<span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>).exec, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, stdout, stderr</span>) </span>{
  <span class="hljs-keyword">return</span> [err, [stdout, stderr]];
});

exec(<span class="hljs-string">'my-command'</span>)
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">results</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"stdout is: "</span> + results[<span class="hljs-number">0</span>]);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"stderr is: "</span> + results[<span class="hljs-number">1</span>]);
  });
</code></pre>
<p>Useful for functions that return multiple arguments, for example <a href="http://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback"><code>child_process#exec</code></a>.</p>
<div class="pilwrap" id="credits-and-collaboration">
  <h2>
    <a href="#credits-and-collaboration" name="credits-and-collaboration" class="pilcrow"></a>
Credits and collaboration
  </h2>
</div>
<p>The lead developer of <strong>denodeify</strong> is <a href="http://twitter.com/andrewsmatt">Matt Andrews</a> at FT Labs with much help and support from <a href="https://twitter.com/pornelski">Kornel Lesi≈Ñski</a>. All open source code released by FT Labs is licenced under the MIT licence. We welcome comments, feedback and suggestions.  Please feel free to raise an issue or pull request.</p>
</div>
  </div>
</body>
</html>
