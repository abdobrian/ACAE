<!DOCTYPE html>
<html>
<head>
  <title>README.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "ClientApp\\node_modules\\fs-write-stream-atomic\\README.md";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#fs-write-stream-atomic">fs-write-stream-atomic</a>
      </div>

      <div class="heading h2">
        <a href="#usage">USAGE</a>
      </div>

      <div class="heading h3">
        <a href="#fswritestreamatomic-filename-options">fsWriteStreamAtomic(filename, [options])</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="fs-write-stream-atomic">
  <h1>
    <a href="#fs-write-stream-atomic" name="fs-write-stream-atomic" class="pilcrow"></a>
fs-write-stream-atomic
  </h1>
</div>
<p>Like <code>fs.createWriteStream(...)</code>, but atomic.</p>
<p>Writes to a tmp file and does an atomic <code>fs.rename</code> to move it into
place when it's done.</p>
<p>First rule of debugging: <strong>It's always a race condition.</strong></p>
<div class="pilwrap" id="usage">
  <h2>
    <a href="#usage" name="usage" class="pilcrow"></a>
USAGE
  </h2>
</div>
<pre><code class="javascript"><span class="hljs-keyword">var</span> fsWriteStreamAtomic = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs-write-stream-atomic'</span>)
<span class="hljs-comment">// options are optional.</span>
<span class="hljs-keyword">var</span> write = fsWriteStreamAtomic(<span class="hljs-string">'output.txt'</span>, options)
<span class="hljs-keyword">var</span> read = fs.createReadStream(<span class="hljs-string">'input.txt'</span>)
read.pipe(write)

<span class="hljs-comment">// When the write stream emits a 'finish' or 'close' event,</span>
<span class="hljs-comment">// you can be sure that it is moved into place, and contains</span>
<span class="hljs-comment">// all the bytes that were written to it, even if something else</span>
<span class="hljs-comment">// was writing to `output.txt` at the same time.</span>
</code></pre>
<div class="pilwrap" id="fswritestreamatomic-filename-options">
  <h3>
    <a href="#fswritestreamatomic-filename-options" name="fswritestreamatomic-filename-options" class="pilcrow"></a>
<code>fsWriteStreamAtomic(filename, [options])</code>
  </h3>
</div>
<ul>
<li><code>filename</code> {String} The file we want to write to</li>
<li><code>options</code> {Object}
<ul>
<li><code>chown</code> {Object} User and group to set ownership after write
<ul>
<li><code>uid</code> {Number}</li>
<li><code>gid</code> {Number}</li>
</ul>
</li>
<li><code>encoding</code> {String} default = 'utf8'</li>
<li><code>mode</code> {Number} default = <code>0666</code></li>
<li><code>flags</code> {String} default = <code>'w'</code></li>
</ul>
</li>
</ul>
</div>
  </div>
</body>
</html>
