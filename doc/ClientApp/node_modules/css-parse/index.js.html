<!DOCTYPE html>
<html>
<head>
  <title>index.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "ClientApp\\node_modules\\css-parse\\index.js";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>index.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">css, options</span>)</span>{
  options = options || {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>Positional.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-keyword">var</span> lineno = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">var</span> column = <span class="hljs-number">1</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>Update lineno and column based on <code>str</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updatePosition</span>(<span class="hljs-params">str</span>) </span>{
    <span class="hljs-keyword">var</span> lines = str.match(<span class="hljs-regexp">/\n/g</span>);
    <span class="hljs-keyword">if</span> (lines) lineno += lines.length;
    <span class="hljs-keyword">var</span> i = str.lastIndexOf(<span class="hljs-string">'\n'</span>);
    column = ~i ? str.length - i : column + str.length;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>Mark position and patch <code>node.position</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">position</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> start = { <span class="hljs-attr">line</span>: lineno, <span class="hljs-attr">column</span>: column };
    <span class="hljs-keyword">if</span> (!options.position) <span class="hljs-keyword">return</span> positionNoop;

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>)</span>{
      node.position = {
        <span class="hljs-attr">start</span>: start,
        <span class="hljs-attr">end</span>: { <span class="hljs-attr">line</span>: lineno, <span class="hljs-attr">column</span>: column },
        <span class="hljs-attr">source</span>: options.source
      };

      whitespace();
      <span class="hljs-keyword">return</span> node;
    }
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>Return <code>node</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">positionNoop</span>(<span class="hljs-params">node</span>) </span>{
    whitespace();
    <span class="hljs-keyword">return</span> node;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>Error <code>msg</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span>(<span class="hljs-params">msg</span>) </span>{
    <span class="hljs-keyword">var</span> err = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(msg + <span class="hljs-string">' near line '</span> + lineno + <span class="hljs-string">':'</span> + column);
    err.filename = options.source;
    err.line = lineno;
    err.column = column;
    err.source = css;
    <span class="hljs-keyword">throw</span> err;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse stylesheet.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stylesheet</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'stylesheet'</span>,
      <span class="hljs-attr">stylesheet</span>: {
        <span class="hljs-attr">rules</span>: rules()
      }
    };
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
<p>Opening brace.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">open</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> match(<span class="hljs-regexp">/^{\s*/</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>Closing brace.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> match(<span class="hljs-regexp">/^}/</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse ruleset.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rules</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> node;
    <span class="hljs-keyword">var</span> rules = [];
    whitespace();
    comments(rules);
    <span class="hljs-keyword">while</span> (css.charAt(<span class="hljs-number">0</span>) != <span class="hljs-string">'}'</span> &amp;&amp; (node = atrule() || rule())) {
      rules.push(node);
      comments(rules);
    }
    <span class="hljs-keyword">return</span> rules;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>Match <code>re</code> and return captures.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">match</span>(<span class="hljs-params">re</span>) </span>{
    <span class="hljs-keyword">var</span> m = re.exec(css);
    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> str = m[<span class="hljs-number">0</span>];
    updatePosition(str);
    css = css.slice(str.length);
    <span class="hljs-keyword">return</span> m;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse whitespace.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">whitespace</span>(<span class="hljs-params"></span>) </span>{
    match(<span class="hljs-regexp">/^\s*/</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse comments;</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">comments</span>(<span class="hljs-params">rules</span>) </span>{
    <span class="hljs-keyword">var</span> c;
    rules = rules || [];
    <span class="hljs-keyword">while</span> (c = comment()) rules.push(c);
    <span class="hljs-keyword">return</span> rules;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse comment.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">comment</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'/'</span> != css.charAt(<span class="hljs-number">0</span>) || <span class="hljs-string">'*'</span> != css.charAt(<span class="hljs-number">1</span>)) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">var</span> i = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">null</span> != css.charAt(i) &amp;&amp; (<span class="hljs-string">'*'</span> != css.charAt(i) || <span class="hljs-string">'/'</span> != css.charAt(i + <span class="hljs-number">1</span>))) ++i;
    i += <span class="hljs-number">2</span>;

    <span class="hljs-keyword">var</span> str = css.slice(<span class="hljs-number">2</span>, i - <span class="hljs-number">2</span>);
    column += <span class="hljs-number">2</span>;
    updatePosition(str);
    css = css.slice(i);
    column += <span class="hljs-number">2</span>;

    <span class="hljs-keyword">return</span> pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'comment'</span>,
      <span class="hljs-attr">comment</span>: str
    });
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse selector.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">selector</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> m = match(<span class="hljs-regexp">/^([^{]+)/</span>);
    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">return</span> trim(m[<span class="hljs-number">0</span>]).split(<span class="hljs-regexp">/\s*,\s*/</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse declaration.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">declaration</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>prop</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> prop = match(<span class="hljs-regexp">/^(\*?[-#\/\*\w]+(\[[0-9a-z_-]+\])?)\s*/</span>);
    <span class="hljs-keyword">if</span> (!prop) <span class="hljs-keyword">return</span>;
    prop = trim(prop[<span class="hljs-number">0</span>]);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>:</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">if</span> (!match(<span class="hljs-regexp">/^:\s*/</span>)) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"property missing ':'"</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>val</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> val = match(<span class="hljs-regexp">/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/</span>);
    <span class="hljs-keyword">if</span> (!val) <span class="hljs-keyword">return</span> error(<span class="hljs-string">'property missing value'</span>);

    <span class="hljs-keyword">var</span> ret = pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'declaration'</span>,
      <span class="hljs-attr">property</span>: prop,
      <span class="hljs-attr">value</span>: trim(val[<span class="hljs-number">0</span>])
    });

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>;</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    match(<span class="hljs-regexp">/^[;\s]*/</span>);

    <span class="hljs-keyword">return</span> ret;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse declarations.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">declarations</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> decls = [];

    <span class="hljs-keyword">if</span> (!open()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"missing '{'"</span>);
    comments(decls);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>declarations</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> decl;
    <span class="hljs-keyword">while</span> (decl = declaration()) {
      decls.push(decl);
      comments(decls);
    }

    <span class="hljs-keyword">if</span> (!close()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"missing '}'"</span>);
    <span class="hljs-keyword">return</span> decls;
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse keyframe.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">keyframe</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> m;
    <span class="hljs-keyword">var</span> vals = [];
    <span class="hljs-keyword">var</span> pos = position();

    <span class="hljs-keyword">while</span> (m = match(<span class="hljs-regexp">/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/</span>)) {
      vals.push(m[<span class="hljs-number">1</span>]);
      match(<span class="hljs-regexp">/^,\s*/</span>);
    }

    <span class="hljs-keyword">if</span> (!vals.length) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">return</span> pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'keyframe'</span>,
      <span class="hljs-attr">values</span>: vals,
      <span class="hljs-attr">declarations</span>: declarations()
    });
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse keyframes.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atkeyframes</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();
    <span class="hljs-keyword">var</span> m = match(<span class="hljs-regexp">/^@([-\w]+)?keyframes */</span>);

    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> vendor = m[<span class="hljs-number">1</span>];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>identifier</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> m = match(<span class="hljs-regexp">/^([-\w]+)\s*/</span>);
    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@keyframes missing name"</span>);
    <span class="hljs-keyword">var</span> name = m[<span class="hljs-number">1</span>];

    <span class="hljs-keyword">if</span> (!open()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@keyframes missing '{'"</span>);

    <span class="hljs-keyword">var</span> frame;
    <span class="hljs-keyword">var</span> frames = comments();
    <span class="hljs-keyword">while</span> (frame = keyframe()) {
      frames.push(frame);
      frames = frames.concat(comments());
    }

    <span class="hljs-keyword">if</span> (!close()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@keyframes missing '}'"</span>);

    <span class="hljs-keyword">return</span> pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'keyframes'</span>,
      <span class="hljs-attr">name</span>: name,
      <span class="hljs-attr">vendor</span>: vendor,
      <span class="hljs-attr">keyframes</span>: frames
    });
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse supports.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atsupports</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();
    <span class="hljs-keyword">var</span> m = match(<span class="hljs-regexp">/^@supports *([^{]+)/</span>);

    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> supports = trim(m[<span class="hljs-number">1</span>]);

    <span class="hljs-keyword">if</span> (!open()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@supports missing '{'"</span>);

    <span class="hljs-keyword">var</span> style = comments().concat(rules());

    <span class="hljs-keyword">if</span> (!close()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@supports missing '}'"</span>);

    <span class="hljs-keyword">return</span> pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'supports'</span>,
      <span class="hljs-attr">supports</span>: supports,
      <span class="hljs-attr">rules</span>: style
    });
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse host.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">athost</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();
    <span class="hljs-keyword">var</span> m = match(<span class="hljs-regexp">/^@host */</span>);

    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">if</span> (!open()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@host missing '{'"</span>);

    <span class="hljs-keyword">var</span> style = comments().concat(rules());

    <span class="hljs-keyword">if</span> (!close()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@host missing '}'"</span>);

    <span class="hljs-keyword">return</span> pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'host'</span>,
      <span class="hljs-attr">rules</span>: style
    });
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse media.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atmedia</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();
    <span class="hljs-keyword">var</span> m = match(<span class="hljs-regexp">/^@media *([^{]+)/</span>);

    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> media = trim(m[<span class="hljs-number">1</span>]);

    <span class="hljs-keyword">if</span> (!open()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@media missing '{'"</span>);

    <span class="hljs-keyword">var</span> style = comments().concat(rules());

    <span class="hljs-keyword">if</span> (!close()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@media missing '}'"</span>);

    <span class="hljs-keyword">return</span> pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'media'</span>,
      <span class="hljs-attr">media</span>: media,
      <span class="hljs-attr">rules</span>: style
    });
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse paged media.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atpage</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();
    <span class="hljs-keyword">var</span> m = match(<span class="hljs-regexp">/^@page */</span>);
    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">var</span> sel = selector() || [];

    <span class="hljs-keyword">if</span> (!open()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@page missing '{'"</span>);
    <span class="hljs-keyword">var</span> decls = comments();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>declarations</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-keyword">var</span> decl;
    <span class="hljs-keyword">while</span> (decl = declaration()) {
      decls.push(decl);
      decls = decls.concat(comments());
    }

    <span class="hljs-keyword">if</span> (!close()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@page missing '}'"</span>);

    <span class="hljs-keyword">return</span> pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'page'</span>,
      <span class="hljs-attr">selectors</span>: sel,
      <span class="hljs-attr">declarations</span>: decls
    });
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse document.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atdocument</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();
    <span class="hljs-keyword">var</span> m = match(<span class="hljs-regexp">/^@([-\w]+)?document *([^{]+)/</span>);
    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">var</span> vendor = trim(m[<span class="hljs-number">1</span>]);
    <span class="hljs-keyword">var</span> doc = trim(m[<span class="hljs-number">2</span>]);

    <span class="hljs-keyword">if</span> (!open()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@document missing '{'"</span>);

    <span class="hljs-keyword">var</span> style = comments().concat(rules());

    <span class="hljs-keyword">if</span> (!close()) <span class="hljs-keyword">return</span> error(<span class="hljs-string">"@document missing '}'"</span>);

    <span class="hljs-keyword">return</span> pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'document'</span>,
      <span class="hljs-attr">document</span>: doc,
      <span class="hljs-attr">vendor</span>: vendor,
      <span class="hljs-attr">rules</span>: style
    });
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse import</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atimport</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _atrule(<span class="hljs-string">'import'</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse charset</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atcharset</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _atrule(<span class="hljs-string">'charset'</span>);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse namespace</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atnamespace</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _atrule(<span class="hljs-string">'namespace'</span>)
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse non-block at-rules</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_atrule</span>(<span class="hljs-params">name</span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();
    <span class="hljs-keyword">var</span> m = match(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'^@'</span> + name + <span class="hljs-string">' *([^;\\n]+);'</span>));
    <span class="hljs-keyword">if</span> (!m) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">var</span> ret = { <span class="hljs-attr">type</span>: name };
    ret[name] = trim(m[<span class="hljs-number">1</span>]);
    <span class="hljs-keyword">return</span> pos(ret);
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse at rule.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">atrule</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (css[<span class="hljs-number">0</span>] != <span class="hljs-string">'@'</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">return</span> atkeyframes()
      || atmedia()
      || atsupports()
      || atimport()
      || atcharset()
      || atnamespace()
      || atdocument()
      || atpage()
      || athost();
  }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse rule.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rule</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> pos = position();
    <span class="hljs-keyword">var</span> sel = selector();

    <span class="hljs-keyword">if</span> (!sel) <span class="hljs-keyword">return</span>;
    comments();

    <span class="hljs-keyword">return</span> pos({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'rule'</span>,
      <span class="hljs-attr">selectors</span>: sel,
      <span class="hljs-attr">declarations</span>: declarations()
    });
  }

  <span class="hljs-keyword">return</span> stylesheet();
};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<div class="dox">
<div class="summary">
<p>Trim <code>str</code>.</p>
</div>
<div class="body">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trim</span>(<span class="hljs-params">str</span>) </span>{
  <span class="hljs-keyword">return</span> str ? str.replace(<span class="hljs-regexp">/^\s+|\s+$/g</span>, <span class="hljs-string">''</span>) : <span class="hljs-string">''</span>;
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
