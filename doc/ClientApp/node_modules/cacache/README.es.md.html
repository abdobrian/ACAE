<!DOCTYPE html>
<html>
<head>
  <title>README.es.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "ClientApp\\node_modules\\cacache\\README.es.md";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#cacache">cacache     </a>
      </div>

      <div class="heading h2">
        <a href="#instalacion">Instalación</a>
      </div>

      <div class="heading h2">
        <a href="#indice">Índice</a>
      </div>

      <div class="heading h3">
        <a href="#ejemplo">Ejemplo</a>
      </div>

      <div class="heading h3">
        <a href="#caracteristicas">Características</a>
      </div>

      <div class="heading h3">
        <a href="#como-contribuir">Cómo Contribuir</a>
      </div>

      <div class="heading h3">
        <a href="#api">API</a>
      </div>

      <div class="heading h4">
        <a href="#usando-el-api-en-espanol"> Usando el API en español</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.ls-cache-greater-promiselessobjectgreater"> &amp;gt; cacache.ls(cache) -&amp;gt; Promise&amp;lt;Object&amp;gt;</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-1">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.ls.flujo-cache-greater-readable"> &amp;gt; cacache.ls.flujo(cache) -&amp;gt; Readable</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-2">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.saca-cache-clave-ops-greater-promise-data-metadata-integrity"> &amp;gt; cacache.saca(cache, clave, [ops]) -&amp;gt; Promise({data, metadata, integrity})</a>
      </div>

      <div class="heading h5">
        <a href="#nota">Nota</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-3">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.saca.flujo-cache-clave-ops-greater-readable"> &amp;gt; cacache.saca.flujo(cache, clave, [ops]) -&amp;gt; Readable</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-4">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.saca.info-cache-clave-greater-promise"> &amp;gt; cacache.saca.info(cache, clave) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#campos">Campos</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-5">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.saca.tienedatos-cache-integrity-greater-promise"> &amp;gt; cacache.saca.tieneDatos(cache, integrity) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-6">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.mete-cache-clave-datos-ops-greater-promise"> &amp;gt; cacache.mete(cache, clave, datos, [ops]) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-7">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.mete.flujo-cache-clave-ops-greater-writable"> &amp;gt; cacache.mete.flujo(cache, clave, [ops]) -&amp;gt; Writable</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-8">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-opciones-para-cacache.mete"> &amp;gt; opciones para cacache.mete</a>
      </div>

      <div class="heading h5">
        <a href="#ops.metadata">ops.metadata</a>
      </div>

      <div class="heading h5">
        <a href="#ops.size">ops.size</a>
      </div>

      <div class="heading h5">
        <a href="#ops.integrity">ops.integrity</a>
      </div>

      <div class="heading h5">
        <a href="#ops.algorithms">ops.algorithms</a>
      </div>

      <div class="heading h5">
        <a href="#ops.uidops.gid">ops.uid/ops.gid</a>
      </div>

      <div class="heading h5">
        <a href="#ops.memoize">ops.memoize</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.rm.todo-cache-greater-promise"> &amp;gt; cacache.rm.todo(cache) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-9">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.rm.entrada-cache-clave-greater-promise"> &amp;gt; cacache.rm.entrada(cache, clave) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-10">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.rm.datos-cache-integrity-greater-promise"> &amp;gt; cacache.rm.datos(cache, integrity) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-11">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.ponlenguaje-locale"> &amp;gt; cacache.ponLenguaje(locale)</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.limpiamemoizado"> &amp;gt; cacache.limpiaMemoizado()</a>
      </div>

      <div class="heading h4">
        <a href="#greater-tmp.hazdir-cache-ops-greater-promiselesspathgreater"> &amp;gt; tmp.hazdir(cache, ops) -&amp;gt; Promise&amp;lt;Path&amp;gt;</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-12">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-tmp.contmp-cache-ops-cb-greater-promise"> &amp;gt; tmp.conTmp(cache, ops, cb) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-13">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#hacheos-de-subresource-integrity"> Hacheos de Subresource Integrity</a>
      </div>

      <div class="heading h5">
        <a href="#generando-tus-propios-hacheos">Generando tus propios hacheos</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.verifica-cache-ops-greater-promise"> &amp;gt; cacache.verifica(cache, ops) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#opciones">Opciones</a>
      </div>

      <div class="heading h5">
        <a href="#example">Example</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.verifica.ultimavez-cache-greater-promise"> &amp;gt; cacache.verifica.ultimaVez(cache) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#example-1">Example</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="cacache">
  <h1>
    <a href="#cacache" name="cacache" class="pilcrow"></a>
cacache <a href="https://npm.im/cacache"><img src="https://img.shields.io/npm/v/cacache.svg" alt="npm version"></a> <a href="https://npm.im/cacache"><img src="https://img.shields.io/npm/l/cacache.svg" alt="license"></a> <a href="https://travis-ci.org/zkat/cacache"><img src="https://img.shields.io/travis/zkat/cacache.svg" alt="Travis"></a> <a href="https://ci.appveyor.com/project/zkat/cacache"><img src="https://ci.appveyor.com/api/projects/status/github/zkat/cacache?svg=true" alt="AppVeyor"></a> <a href="https://coveralls.io/github/zkat/cacache?branch=latest"><img src="https://coveralls.io/repos/github/zkat/cacache/badge.svg?branch=latest" alt="Coverage Status"></a>
  </h1>
</div>
<p><a href="https://github.com/zkat/cacache"><code>cacache</code></a> es una librería de Node.js para
manejar caches locales en disco, con acceso tanto con claves únicas como
direcciones de contenido (hashes/hacheos). Es súper rápida, excelente con el
acceso concurrente, y jamás te dará datos incorrectos, aún si se corrompen o
manipulan directamente los ficheros del cache.</p>
<p>El propósito original era reemplazar el caché local de
<a href="https://npm.im/npm">npm</a>, pero se puede usar por su propia cuenta.</p>
<p><em>Traducciones: <a href="README.md.html">English</a></em></p>
<div class="pilwrap" id="instalacion">
  <h2>
    <a href="#instalacion" name="instalacion" class="pilcrow"></a>
Instalación
  </h2>
</div>
<p><code>$ npm install --save cacache</code></p>
<div class="pilwrap" id="indice">
  <h2>
    <a href="#indice" name="indice" class="pilcrow"></a>
Índice
  </h2>
</div>
<ul>
<li><a href="#ejemplo.html">Ejemplo</a></li>
<li><a href="#caracter%C3%ADsticas.html">Características</a></li>
<li><a href="#c%C3%B3mo-contribuir.html">Cómo Contribuir</a></li>
<li><a href="#api.html">API</a>
<ul>
<li><a href="#localized-api.html">Usando el API en español</a></li>
<li>Leer
<ul>
<li><a href="#ls.html"><code>ls</code></a></li>
<li><a href="#ls-stream.html"><code>ls.flujo</code></a></li>
<li><a href="#get-data.html"><code>saca</code></a></li>
<li><a href="#get-stream.html"><code>saca.flujo</code></a></li>
<li><a href="#get-info.html"><code>saca.info</code></a></li>
<li><a href="#get-hasContent.html"><code>saca.tieneDatos</code></a></li>
</ul>
</li>
<li>Escribir
<ul>
<li><a href="#put-data.html"><code>mete</code></a></li>
<li><a href="#put-stream.html"><code>mete.flujo</code></a></li>
<li><a href="#put-options.html">opciones para <code>mete*</code></a></li>
<li><a href="#rm-all.html"><code>rm.todo</code></a></li>
<li><a href="#rm-entry.html"><code>rm.entrada</code></a></li>
<li><a href="#rm-content.html"><code>rm.datos</code></a></li>
</ul>
</li>
<li>Utilidades
<ul>
<li><a href="#set-locale.html"><code>ponLenguaje</code></a></li>
<li><a href="#clear-memoized.html"><code>limpiaMemoizado</code></a></li>
<li><a href="#tmp-mkdir.html"><code>tmp.hazdir</code></a></li>
<li><a href="#with-tmp.html"><code>tmp.conTmp</code></a></li>
</ul>
</li>
<li>Integridad
<ul>
<li><a href="#integrity.html">Subresource Integrity</a></li>
<li><a href="#verify.html"><code>verifica</code></a></li>
<li><a href="#verify-last-run.html"><code>verifica.ultimaVez</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="ejemplo">
  <h3>
    <a href="#ejemplo" name="ejemplo" class="pilcrow"></a>
Ejemplo
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-keyword">const</span> cacache = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cacache/es'</span>)
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)

<span class="hljs-keyword">const</span> tarbol = <span class="hljs-string">'/ruta/a/mi-tar.tgz'</span>
<span class="hljs-keyword">const</span> rutaCache = <span class="hljs-string">'/tmp/my-toy-cache'</span>
<span class="hljs-keyword">const</span> clave = <span class="hljs-string">'mi-clave-única-1234'</span>

<span class="hljs-comment">// ¡Añádelo al caché! Usa `rutaCache` como raíz del caché.</span>
cacache.mete(rutaCache, clave, <span class="hljs-string">'10293801983029384'</span>).then(<span class="hljs-function"><span class="hljs-params">integrity</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Saved content to <span class="hljs-subst">${rutaCache}</span>.`</span>)
})

<span class="hljs-keyword">const</span> destino = <span class="hljs-string">'/tmp/mytar.tgz'</span>

<span class="hljs-comment">// Copia el contenido del caché a otro fichero, pero esta vez con flujos.</span>
cacache.saca.flujo(
  rutaCache, clave
).pipe(
  fs.createWriteStream(destino)
).on(<span class="hljs-string">'finish'</span>, () =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'extracción completada'</span>)
})

<span class="hljs-comment">// La misma cosa, pero accesando el contenido directamente, sin tocar el índice.</span>
cacache.saca.porHacheo(rutaCache, integridad).then(<span class="hljs-function"><span class="hljs-params">datos</span> =&gt;</span> {
  fs.writeFile(destino, datos, err =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'datos del tarbol sacados basado en su sha512, y escrito a otro fichero'</span>)
  })
})
</code></pre>
<div class="pilwrap" id="caracteristicas">
  <h3>
    <a href="#caracteristicas" name="caracteristicas" class="pilcrow"></a>
Características
  </h3>
</div>
<ul>
<li>Extracción por clave o por dirección de contenido (shasum, etc)</li>
<li>Usa el estándard de web, <a href="#integrity.html">Subresource Integrity</a></li>
<li>Compatible con multiples algoritmos - usa sha1, sha512, etc, en el mismo caché sin problema</li>
<li>Entradas con contenido idéntico comparten ficheros</li>
<li>Tolerancia de fallas (inmune a corrupción, ficheros parciales, carreras de proceso, etc)</li>
<li>Verificación completa de datos cuando (escribiendo y leyendo)</li>
<li>Concurrencia rápida, segura y &quot;lockless&quot;</li>
<li>Compatible con <code>stream</code>s (flujos)</li>
<li>Compatible con <code>Promise</code>s (promesas)</li>
<li>Bastante rápida -- acceso, incluyendo verificación, en microsegundos</li>
<li>Almacenaje de metadatos arbitrarios</li>
<li>Colección de basura y verificación adicional fuera de banda</li>
<li>Cobertura rigurosa de pruebas</li>
<li>Probablente hay un &quot;Bloom filter&quot; por ahí en algún lado. Eso le mola a la gente, ¿Verdad? 🤔</li>
</ul>
<div class="pilwrap" id="como-contribuir">
  <h3>
    <a href="#como-contribuir" name="como-contribuir" class="pilcrow"></a>
Cómo Contribuir
  </h3>
</div>
<p>El equipo de cacache felizmente acepta contribuciones de código y otras maneras de participación. ¡Hay muchas formas diferentes de contribuir! La <a href="CONTRIBUTING.md.html">Guía de Colaboradores</a> (en inglés) tiene toda la información que necesitas para cualquier tipo de contribución: todo desde cómo reportar errores hasta cómo someter parches con nuevas características. Con todo y eso, no se preocupe por si lo que haces está exáctamente correcto: no hay ningún problema en hacer preguntas si algo no está claro, o no lo encuentras.</p>
<p>El equipo de cacache tiene miembros hispanohablantes: es completamente aceptable crear <code>issues</code> y <code>pull requests</code> en español/castellano.</p>
<p>Todos los participantes en este proyecto deben obedecer el <a href="CODE_OF_CONDUCT.md.html">Código de Conducta</a> (en inglés), y en general actuar de forma amable y respetuosa mientras participan en esta comunidad.</p>
<p>Por favor refiérase al <a href="CHANGELOG.md.html">Historial de Cambios</a> (en inglés) para detalles sobre cambios importantes incluídos en cada versión.</p>
<p>Finalmente, cacache tiene un sistema de localización de lenguaje. Si te interesa añadir lenguajes o mejorar los que existen, mira en el directorio <code>./locales</code> para comenzar.</p>
<p>Happy hacking!</p>
<div class="pilwrap" id="api">
  <h3>
    <a href="#api" name="api" class="pilcrow"></a>
API
  </h3>
</div>
<div class="pilwrap" id="usando-el-api-en-espanol">
  <h4>
    <a href="#usando-el-api-en-espanol" name="usando-el-api-en-espanol" class="pilcrow"></a>
<a name="localized-api"></a> Usando el API en español
  </h4>
</div>
<p>cacache incluye una traducción completa de su API al castellano, con las mismas
características. Para usar el API como está documentado en este documento, usa
<code>require('cacache/es')</code></p>
<p>cacache también tiene otros lenguajes: encuéntralos bajo <code>./locales</code>, y podrás
usar el API en ese lenguaje con <code>require('cacache/&lt;lenguaje&gt;')</code></p>
<div class="pilwrap" id="greater-cacache.ls-cache-greater-promiselessobjectgreater">
  <h4>
    <a href="#greater-cacache.ls-cache-greater-promiselessobjectgreater" name="greater-cacache.ls-cache-greater-promiselessobjectgreater" class="pilcrow"></a>
<a name="ls"></a> <code>&gt; cacache.ls(cache) -&gt; Promise&lt;Object&gt;</code>
  </h4>
</div>
<p>Enumera todas las entradas en el caché, dentro de un solo objeto. Cada entrada
en el objeto tendrá como clave la clave única usada para el índice, el valor
siendo un objeto de <a href="#get-info.html"><code>saca.info</code></a>.</p>
<div class="pilwrap" id="ejemplo-1">
  <h5>
    <a href="#ejemplo-1" name="ejemplo-1" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.ls(rutaCache).then(<span class="hljs-built_in">console</span>.log)
<span class="hljs-comment">// Salida</span>
{
  <span class="hljs-string">'my-thing'</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-string">'my-thing'</span>,
    <span class="hljs-attr">integrity</span>: <span class="hljs-string">'sha512-BaSe64/EnCoDED+HAsh=='</span>
    path: <span class="hljs-string">'.testcache/content/deadbeef'</span>, <span class="hljs-comment">// unido con `rutaCache`</span>
    time: <span class="hljs-number">12345698490</span>,
    <span class="hljs-attr">size</span>: <span class="hljs-number">4023948</span>,
    <span class="hljs-attr">metadata</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'blah'</span>,
      <span class="hljs-attr">version</span>: <span class="hljs-string">'1.2.3'</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">'this was once a package but now it is my-thing'</span>
    }
  },
  <span class="hljs-string">'other-thing'</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-string">'other-thing'</span>,
    <span class="hljs-attr">integrity</span>: <span class="hljs-string">'sha1-ANothER+hasH='</span>,
    <span class="hljs-attr">path</span>: <span class="hljs-string">'.testcache/content/bada55'</span>,
    <span class="hljs-attr">time</span>: <span class="hljs-number">11992309289</span>,
    <span class="hljs-attr">size</span>: <span class="hljs-number">111112</span>
  }
}
</code></pre>
<div class="pilwrap" id="greater-cacache.ls.flujo-cache-greater-readable">
  <h4>
    <a href="#greater-cacache.ls.flujo-cache-greater-readable" name="greater-cacache.ls.flujo-cache-greater-readable" class="pilcrow"></a>
<a name="ls-stream"></a> <code>&gt; cacache.ls.flujo(cache) -&gt; Readable</code>
  </h4>
</div>
<p>Enumera todas las entradas en el caché, emitiendo un objeto de
<a href="#get-info.html"><code>saca.info</code></a> por cada evento de <code>data</code> en el flujo.</p>
<div class="pilwrap" id="ejemplo-2">
  <h5>
    <a href="#ejemplo-2" name="ejemplo-2" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.ls.flujo(rutaCache).on(<span class="hljs-string">'data'</span>, <span class="hljs-built_in">console</span>.log)
<span class="hljs-comment">// Salida</span>
{
  <span class="hljs-attr">key</span>: <span class="hljs-string">'my-thing'</span>,
  <span class="hljs-attr">integrity</span>: <span class="hljs-string">'sha512-BaSe64HaSh'</span>,
  <span class="hljs-attr">path</span>: <span class="hljs-string">'.testcache/content/deadbeef'</span>, <span class="hljs-comment">// unido con `rutaCache`</span>
  time: <span class="hljs-number">12345698490</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">13423</span>,
  <span class="hljs-attr">metadata</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'blah'</span>,
    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.2.3'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'this was once a package but now it is my-thing'</span>
  }
}

{
  <span class="hljs-attr">key</span>: <span class="hljs-string">'other-thing'</span>,
  <span class="hljs-attr">integrity</span>: <span class="hljs-string">'whirlpool-WoWSoMuchSupport'</span>,
  <span class="hljs-attr">path</span>: <span class="hljs-string">'.testcache/content/bada55'</span>,
  <span class="hljs-attr">time</span>: <span class="hljs-number">11992309289</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">498023984029</span>
}

{
  ...
}
</code></pre>
<div class="pilwrap" id="greater-cacache.saca-cache-clave-ops-greater-promise-data-metadata-integrity">
  <h4>
    <a href="#greater-cacache.saca-cache-clave-ops-greater-promise-data-metadata-integrity" name="greater-cacache.saca-cache-clave-ops-greater-promise-data-metadata-integrity" class="pilcrow"></a>
<a name="get-data"></a> <code>&gt; cacache.saca(cache, clave, [ops]) -&gt; Promise({data, metadata, integrity})</code>
  </h4>
</div>
<p>Devuelve un objeto con los datos, hacheo de integridad y metadatos identificados
por la <code>clave</code>. La propiedad <code>data</code> de este objeto será una instancia de
<code>Buffer</code> con los datos almacenados en el caché. to do with it! cacache just
won't care.</p>
<p><code>integrity</code> es un <code>string</code> de <a href="#integrity.html">Subresource Integrity</a>. Dígase, un
<code>string</code> que puede ser usado para verificar a la <code>data</code>, que tiene como formato
<code>&lt;algoritmo&gt;-&lt;hacheo-integridad-base64&gt;</code>.</p>
<p>So no existe ninguna entrada identificada por <code>clave</code>, o se los datos
almacenados localmente fallan verificación, el <code>Promise</code> fallará.</p>
<p>Una sub-función, <code>saca.porHacheo</code>, tiene casi el mismo comportamiento, excepto
que busca entradas usando el hacheo de integridad, sin tocar el índice general.
Esta versión <em>sólo</em> devuelve <code>data</code>, sin ningún objeto conteniéndola.</p>
<div class="pilwrap" id="nota">
  <h5>
    <a href="#nota" name="nota" class="pilcrow"></a>
Nota
  </h5>
</div>
<p>Esta función lee la entrada completa a la memoria antes de devolverla. Si estás
almacenando datos Muy Grandes, es posible que <a href="#get-stream.html"><code>saca.flujo</code></a> sea
una mejor solución.</p>
<div class="pilwrap" id="ejemplo-3">
  <h5>
    <a href="#ejemplo-3" name="ejemplo-3" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">// Busca por clave
cache.saca(rutaCache, 'my-thing').then(console.log)
// Salida:
{
  metadata: {
    thingName: 'my'
  },
  integrity: 'sha512-BaSe64HaSh',
  data: Buffer#&lt;deadbeef&gt;,
  size: 9320
}

// Busca por hacheo
cache.saca.porHacheo(rutaCache, 'sha512-BaSe64HaSh').then(console.log)
// Salida:
Buffer#&lt;deadbeef&gt;
</code></pre>
<div class="pilwrap" id="greater-cacache.saca.flujo-cache-clave-ops-greater-readable">
  <h4>
    <a href="#greater-cacache.saca.flujo-cache-clave-ops-greater-readable" name="greater-cacache.saca.flujo-cache-clave-ops-greater-readable" class="pilcrow"></a>
<a name="get-stream"></a> <code>&gt; cacache.saca.flujo(cache, clave, [ops]) -&gt; Readable</code>
  </h4>
</div>
<p>Devuelve un <a href="https://nodejs.org/api/stream.html#stream_readable_streams">Readable
Stream</a> de los datos
almacenados bajo <code>clave</code>.</p>
<p>So no existe ninguna entrada identificada por <code>clave</code>, o se los datos
almacenados localmente fallan verificación, el <code>Promise</code> fallará.</p>
<p><code>metadata</code> y <code>integrity</code> serán emitidos como eventos antes de que el flujo
cierre.</p>
<p>Una sub-función, <code>saca.flujo.porHacheo</code>, tiene casi el mismo comportamiento,
excepto que busca entradas usando el hacheo de integridad, sin tocar el índice
general. Esta versión no emite eventos de <code>metadata</code> o <code>integrity</code>.</p>
<div class="pilwrap" id="ejemplo-4">
  <h5>
    <a href="#ejemplo-4" name="ejemplo-4" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript"><span class="hljs-comment">// Busca por clave</span>
cache.saca.flujo(
  rutaCache, <span class="hljs-string">'my-thing'</span>
).on(<span class="hljs-string">'metadata'</span>, metadata =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'metadata:'</span>, metadata)
}).on(<span class="hljs-string">'integrity'</span>, integrity =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'integrity:'</span>, integrity)
}).pipe(
  fs.createWriteStream(<span class="hljs-string">'./x.tgz'</span>)
)
<span class="hljs-comment">// Salidas:</span>
metadata: { ... }
integrity: <span class="hljs-string">'sha512-SoMeDIGest+64=='</span>

<span class="hljs-comment">// Busca por hacheo</span>
cache.saca.flujo.porHacheo(
  rutaCache, <span class="hljs-string">'sha512-SoMeDIGest+64=='</span>
).pipe(
  fs.createWriteStream(<span class="hljs-string">'./x.tgz'</span>)
)
</code></pre>
<div class="pilwrap" id="greater-cacache.saca.info-cache-clave-greater-promise">
  <h4>
    <a href="#greater-cacache.saca.info-cache-clave-greater-promise" name="greater-cacache.saca.info-cache-clave-greater-promise" class="pilcrow"></a>
<a name="get-info"></a> <code>&gt; cacache.saca.info(cache, clave) -&gt; Promise</code>
  </h4>
</div>
<p>Busca la <code>clave</code> en el índice del caché, devolviendo información sobre la
entrada si existe.</p>
<div class="pilwrap" id="campos">
  <h5>
    <a href="#campos" name="campos" class="pilcrow"></a>
Campos
  </h5>
</div>
<ul>
<li><code>key</code> - Clave de la entrada. Igual al argumento <code>clave</code>.</li>
<li><code>integrity</code> - <a href="#integrity.html">hacheo de Subresource Integrity</a> del contenido al que se refiere esta entrada.</li>
<li><code>path</code> - Dirección del fichero de datos almacenados, relativa al argumento <code>cache</code>.</li>
<li><code>time</code> - Hora de creación de la entrada</li>
<li><code>metadata</code> - Metadatos asignados a esta entrada por el usuario</li>
</ul>
<div class="pilwrap" id="ejemplo-5">
  <h5>
    <a href="#ejemplo-5" name="ejemplo-5" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.saca.info(rutaCache, <span class="hljs-string">'my-thing'</span>).then(<span class="hljs-built_in">console</span>.log)

<span class="hljs-comment">// Salida</span>
{
  <span class="hljs-attr">key</span>: <span class="hljs-string">'my-thing'</span>,
  <span class="hljs-attr">integrity</span>: <span class="hljs-string">'sha256-MUSTVERIFY+ALL/THINGS=='</span>
  path: <span class="hljs-string">'.testcache/content/deadbeef'</span>,
  <span class="hljs-attr">time</span>: <span class="hljs-number">12345698490</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">849234</span>,
  <span class="hljs-attr">metadata</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'blah'</span>,
    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.2.3'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'this was once a package but now it is my-thing'</span>
  }
}
</code></pre>
<div class="pilwrap" id="greater-cacache.saca.tienedatos-cache-integrity-greater-promise">
  <h4>
    <a href="#greater-cacache.saca.tienedatos-cache-integrity-greater-promise" name="greater-cacache.saca.tienedatos-cache-integrity-greater-promise" class="pilcrow"></a>
<a name="get-hasContent"></a> <code>&gt; cacache.saca.tieneDatos(cache, integrity) -&gt; Promise</code>
  </h4>
</div>
<p>Busca un <a href="#integrity.html">hacheo Subresource Integrity</a> en el caché. Si existe el
contenido asociado con <code>integrity</code>, devuelve un objeto con dos campos: el hacheo
<em>específico</em> que se usó para la búsqueda, <code>sri</code>, y el tamaño total del
contenido, <code>size</code>. Si no existe ningún contenido asociado con <code>integrity</code>,
devuelve <code>false</code>.</p>
<div class="pilwrap" id="ejemplo-6">
  <h5>
    <a href="#ejemplo-6" name="ejemplo-6" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.saca.tieneDatos(rutaCache, <span class="hljs-string">'sha256-MUSTVERIFY+ALL/THINGS=='</span>).then(<span class="hljs-built_in">console</span>.log)

<span class="hljs-comment">// Salida</span>
{
  <span class="hljs-attr">sri</span>: {
    <span class="hljs-attr">source</span>: <span class="hljs-string">'sha256-MUSTVERIFY+ALL/THINGS=='</span>,
    <span class="hljs-attr">algorithm</span>: <span class="hljs-string">'sha256'</span>,
    <span class="hljs-attr">digest</span>: <span class="hljs-string">'MUSTVERIFY+ALL/THINGS=='</span>,
    <span class="hljs-attr">options</span>: []
  },
  <span class="hljs-attr">size</span>: <span class="hljs-number">9001</span>
}

cacache.saca.tieneDatos(rutaCache, <span class="hljs-string">'sha521-NOT+IN/CACHE=='</span>).then(<span class="hljs-built_in">console</span>.log)

<span class="hljs-comment">// Salida</span>
<span class="hljs-literal">false</span>
</code></pre>
<div class="pilwrap" id="greater-cacache.mete-cache-clave-datos-ops-greater-promise">
  <h4>
    <a href="#greater-cacache.mete-cache-clave-datos-ops-greater-promise" name="greater-cacache.mete-cache-clave-datos-ops-greater-promise" class="pilcrow"></a>
<a name="put-data"></a> <code>&gt; cacache.mete(cache, clave, datos, [ops]) -&gt; Promise</code>
  </h4>
</div>
<p>Inserta <code>datos</code> en el caché. El <code>Promise</code> devuelto se resuelve con un hacheo
(generado conforme a <a href="#optsalgorithms.html"><code>ops.algorithms</code></a>) después que la entrada
haya sido escrita en completo.</p>
<div class="pilwrap" id="ejemplo-7">
  <h5>
    <a href="#ejemplo-7" name="ejemplo-7" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">fetch(
  <span class="hljs-string">'https://registry.npmjs.org/cacache/-/cacache-1.0.0.tgz'</span>
).then(<span class="hljs-function"><span class="hljs-params">datos</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> cacache.mete(rutaCache, <span class="hljs-string">'registry.npmjs.org|cacache@1.0.0'</span>, datos)
}).then(<span class="hljs-function"><span class="hljs-params">integridad</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'el hacheo de integridad es'</span>, integridad)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.mete.flujo-cache-clave-ops-greater-writable">
  <h4>
    <a href="#greater-cacache.mete.flujo-cache-clave-ops-greater-writable" name="greater-cacache.mete.flujo-cache-clave-ops-greater-writable" class="pilcrow"></a>
<a name="put-stream"></a> <code>&gt; cacache.mete.flujo(cache, clave, [ops]) -&gt; Writable</code>
  </h4>
</div>
<p>Devuelve un <a href="https://nodejs.org/api/stream.html#stream_writable_streams">Writable
Stream</a> que inserta
al caché los datos escritos a él. Emite un evento <code>integrity</code> con el hacheo del
contenido escrito, cuando completa.</p>
<div class="pilwrap" id="ejemplo-8">
  <h5>
    <a href="#ejemplo-8" name="ejemplo-8" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">request.get(
  <span class="hljs-string">'https://registry.npmjs.org/cacache/-/cacache-1.0.0.tgz'</span>
).pipe(
  cacache.mete.flujo(
    rutaCache, <span class="hljs-string">'registry.npmjs.org|cacache@1.0.0'</span>
  ).on(<span class="hljs-string">'integrity'</span>, d =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`integrity digest is <span class="hljs-subst">${d}</span>`</span>))
)
</code></pre>
<div class="pilwrap" id="greater-opciones-para-cacache.mete">
  <h4>
    <a href="#greater-opciones-para-cacache.mete" name="greater-opciones-para-cacache.mete" class="pilcrow"></a>
<a name="put-options"></a> <code>&gt; opciones para cacache.mete</code>
  </h4>
</div>
<p>La funciones <code>cacache.mete</code> tienen un número de opciones en común.</p>
<div class="pilwrap" id="ops.metadata">
  <h5>
    <a href="#ops.metadata" name="ops.metadata" class="pilcrow"></a>
<code>ops.metadata</code>
  </h5>
</div>
<p>Metadatos del usuario que se almacenarán con la entrada.</p>
<div class="pilwrap" id="ops.size">
  <h5>
    <a href="#ops.size" name="ops.size" class="pilcrow"></a>
<code>ops.size</code>
  </h5>
</div>
<p>El tamaño declarado de los datos que se van a insertar. Si es proveído, cacache
verificará que los datos escritos sean de ese tamaño, o si no, fallará con un
error con código <code>EBADSIZE</code>.</p>
<div class="pilwrap" id="ops.integrity">
  <h5>
    <a href="#ops.integrity" name="ops.integrity" class="pilcrow"></a>
<code>ops.integrity</code>
  </h5>
</div>
<p>El hacheo de integridad de los datos siendo escritos.</p>
<p>Si es proveído, y los datos escritos no le corresponden, la operación fallará
con un error con código <code>EINTEGRITY</code>.</p>
<p><code>ops.algorithms</code> no tiene ningún efecto si esta opción está presente.</p>
<div class="pilwrap" id="ops.algorithms">
  <h5>
    <a href="#ops.algorithms" name="ops.algorithms" class="pilcrow"></a>
<code>ops.algorithms</code>
  </h5>
</div>
<p>Por Defecto: <code>['sha512']</code></p>
<p>Algoritmos que se deben usar cuando se calcule el hacheo de <a href="#integrity.html">subresource
integrity</a> para los datos insertados. Puede usar cualquier algoritmo
enumerado en <code>crypto.getHashes()</code>.</p>
<p>Por el momento, sólo se acepta un algoritmo (dígase, un array con exáctamente un
valor). No tiene ningún efecto si <code>ops.integrity</code> también ha sido proveido.</p>
<div class="pilwrap" id="ops.uidops.gid">
  <h5>
    <a href="#ops.uidops.gid" name="ops.uidops.gid" class="pilcrow"></a>
<code>ops.uid</code>/<code>ops.gid</code>
  </h5>
</div>
<p>Si están presentes, cacache hará todo lo posible para asegurarse que todos los
ficheros creados en el proceso de sus operaciones en el caché usen esta
combinación en particular.</p>
<div class="pilwrap" id="ops.memoize">
  <h5>
    <a href="#ops.memoize" name="ops.memoize" class="pilcrow"></a>
<code>ops.memoize</code>
  </h5>
</div>
<p>Por Defecto: <code>null</code></p>
<p>Si es verdad, cacache tratará de memoizar los datos de la entrada en memoria. La
próxima vez que el proceso corriente trate de accesar los datos o entrada,
cacache buscará en memoria antes de buscar en disco.</p>
<p>Si <code>ops.memoize</code> es un objeto regular o un objeto como <code>Map</code> (es decir, un
objeto con métodos <code>get()</code> y <code>set()</code>), este objeto en sí sera usado en vez del
caché de memoria global. Esto permite tener lógica específica a tu aplicación
encuanto al almacenaje en memoria de tus datos.</p>
<p>Si quieres asegurarte que los datos se lean del disco en vez de memoria, usa
<code>memoize: false</code> cuando uses funciones de <code>cacache.saca</code>.</p>
<div class="pilwrap" id="greater-cacache.rm.todo-cache-greater-promise">
  <h4>
    <a href="#greater-cacache.rm.todo-cache-greater-promise" name="greater-cacache.rm.todo-cache-greater-promise" class="pilcrow"></a>
<a name="rm-all"></a> <code>&gt; cacache.rm.todo(cache) -&gt; Promise</code>
  </h4>
</div>
<p>Borra el caché completo, incluyendo ficheros temporeros, ficheros de datos, y el
índice del caché.</p>
<div class="pilwrap" id="ejemplo-9">
  <h5>
    <a href="#ejemplo-9" name="ejemplo-9" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.rm.todo(rutaCache).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'THE APOCALYPSE IS UPON US 😱'</span>)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.rm.entrada-cache-clave-greater-promise">
  <h4>
    <a href="#greater-cacache.rm.entrada-cache-clave-greater-promise" name="greater-cacache.rm.entrada-cache-clave-greater-promise" class="pilcrow"></a>
<a name="rm-entry"></a> <code>&gt; cacache.rm.entrada(cache, clave) -&gt; Promise</code>
  </h4>
</div>
<p>Alias: <code>cacache.rm</code></p>
<p>Borra la entrada <code>clave</code> del índuce. El contenido asociado con esta entrada
seguirá siendo accesible por hacheo usando
<a href="#get-stream.html"><code>saca.flujo.porHacheo</code></a>.</p>
<p>Para borrar el contenido en sí, usa <a href="#rm-content.html"><code>rm.datos</code></a>. Si quieres hacer
esto de manera más segura (pues ficheros de contenido pueden ser usados por
multiples entradas), usa <a href="#verify.html"><code>verifica</code></a> para borrar huérfanos.</p>
<div class="pilwrap" id="ejemplo-10">
  <h5>
    <a href="#ejemplo-10" name="ejemplo-10" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.rm.entrada(rutaCache, <span class="hljs-string">'my-thing'</span>).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'I did not like it anyway'</span>)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.rm.datos-cache-integrity-greater-promise">
  <h4>
    <a href="#greater-cacache.rm.datos-cache-integrity-greater-promise" name="greater-cacache.rm.datos-cache-integrity-greater-promise" class="pilcrow"></a>
<a name="rm-content"></a> <code>&gt; cacache.rm.datos(cache, integrity) -&gt; Promise</code>
  </h4>
</div>
<p>Borra el contenido identificado por <code>integrity</code>. Cualquier entrada que se
refiera a este contenido quedarán huérfanas y se invalidarán si se tratan de
accesar, al menos que contenido idéntico sea añadido bajo <code>integrity</code>.</p>
<div class="pilwrap" id="ejemplo-11">
  <h5>
    <a href="#ejemplo-11" name="ejemplo-11" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.rm.datos(rutaCache, <span class="hljs-string">'sha512-SoMeDIGest/IN+BaSE64=='</span>).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'los datos para `mi-cosa` se borraron'</span>)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.ponlenguaje-locale">
  <h4>
    <a href="#greater-cacache.ponlenguaje-locale" name="greater-cacache.ponlenguaje-locale" class="pilcrow"></a>
<a name="set-locale"></a> <code>&gt; cacache.ponLenguaje(locale)</code>
  </h4>
</div>
<p>Configura el lenguaje usado para mensajes y errores de cacache. La lista de
lenguajes disponibles está en el directorio <code>./locales</code> del proyecto.</p>
<p><em>Te interesa añadir más lenguajes? <a href="CONTRIBUTING.md.html">Somete un PR</a>!</em></p>
<div class="pilwrap" id="greater-cacache.limpiamemoizado">
  <h4>
    <a href="#greater-cacache.limpiamemoizado" name="greater-cacache.limpiamemoizado" class="pilcrow"></a>
<a name="clear-memoized"></a> <code>&gt; cacache.limpiaMemoizado()</code>
  </h4>
</div>
<p>Completamente reinicializa el caché de memoria interno. Si estás usando tu
propio objecto con <code>ops.memoize</code>, debes hacer esto de manera específica a él.</p>
<div class="pilwrap" id="greater-tmp.hazdir-cache-ops-greater-promiselesspathgreater">
  <h4>
    <a href="#greater-tmp.hazdir-cache-ops-greater-promiselesspathgreater" name="greater-tmp.hazdir-cache-ops-greater-promiselesspathgreater" class="pilcrow"></a>
<a name="tmp-mkdir"></a> <code>&gt; tmp.hazdir(cache, ops) -&gt; Promise&lt;Path&gt;</code>
  </h4>
</div>
<p>Alias: <code>tmp.mkdir</code></p>
<p>Devuelve un directorio único dentro del directorio <code>tmp</code> del caché.</p>
<p>Una vez tengas el directorio, es responsabilidad tuya asegurarte que todos los
ficheros escrito a él sean creados usando los permisos y <code>uid</code>/<code>gid</code> concordante
con el caché. Si no, puedes pedirle a cacache que lo haga llamando a
<a href="#tmp-fix.html"><code>cacache.tmp.fix()</code></a>. Esta función arreglará todos los permisos en el
directorio tmp.</p>
<p>Si quieres que cacache limpie el directorio automáticamente cuando termines, usa
<a href="#with-tpm.html"><code>cacache.tmp.conTmp()</code></a>.</p>
<div class="pilwrap" id="ejemplo-12">
  <h5>
    <a href="#ejemplo-12" name="ejemplo-12" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.tmp.mkdir(cache).then(dir =&gt; {
  fs.writeFile(path.join(dir, 'blablabla'), Buffer#&lt;1234&gt;, ...)
})
</code></pre>
<div class="pilwrap" id="greater-tmp.contmp-cache-ops-cb-greater-promise">
  <h4>
    <a href="#greater-tmp.contmp-cache-ops-cb-greater-promise" name="greater-tmp.contmp-cache-ops-cb-greater-promise" class="pilcrow"></a>
<a name="with-tmp"></a> <code>&gt; tmp.conTmp(cache, ops, cb) -&gt; Promise</code>
  </h4>
</div>
<p>Crea un directorio temporero con <a href="#tmp-mkdir.html"><code>tmp.mkdir()</code></a> y ejecuta <code>cb</code> con
él como primer argumento. El directorio creado será removido automáticamente
cuando el valor devolvido por <code>cb()</code> se resuelva.</p>
<p>Las mismas advertencias aplican en cuanto a manejando permisos para los ficheros
dentro del directorio.</p>
<div class="pilwrap" id="ejemplo-13">
  <h5>
    <a href="#ejemplo-13" name="ejemplo-13" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.tmp.conTmp(cache, dir =&gt; {
  return fs.writeFileAsync(path.join(dir, 'blablabla'), Buffer#&lt;1234&gt;, ...)
}).then(() =&gt; {
  // `dir` no longer exists
})
</code></pre>
<div class="pilwrap" id="hacheos-de-subresource-integrity">
  <h4>
    <a href="#hacheos-de-subresource-integrity" name="hacheos-de-subresource-integrity" class="pilcrow"></a>
<a name="integrity"></a> Hacheos de Subresource Integrity
  </h4>
</div>
<p>cacache usa strings que siguen la especificación de <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">Subresource Integrity
spec</a>.</p>
<p>Es decir, donde quiera cacache espera un argumento o opción <code>integrity</code>, ese
string debería usar el formato <code>&lt;algoritmo&gt;-&lt;hacheo-base64&gt;</code>.</p>
<p>Una variación importante sobre los hacheos que cacache acepta es que acepta el
nombre de cualquier algoritmo aceptado por el proceso de Node.js donde se usa.
Puedes usar <code>crypto.getHashes()</code> para ver cuales están disponibles.</p>
<div class="pilwrap" id="generando-tus-propios-hacheos">
  <h5>
    <a href="#generando-tus-propios-hacheos" name="generando-tus-propios-hacheos" class="pilcrow"></a>
Generando tus propios hacheos
  </h5>
</div>
<p>Si tienes un <code>shasum</code>, en general va a estar en formato de string hexadecimal
(es decir, un <code>sha1</code> se vería como algo así:
<code>5f5513f8822fdbe5145af33b64d8d970dcf95c6e</code>).</p>
<p>Para ser compatible con cacache, necesitas convertir esto a su equivalente en
subresource integrity. Por ejemplo, el hacheo correspondiente al ejemplo
anterior sería: <code>sha1-X1UT+IIv2+UUWvM7ZNjZcNz5XG4=</code>.</p>
<p>Puedes usar código así para generarlo por tu cuenta:</p>
<pre><code class="javascript"><span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>)
<span class="hljs-keyword">const</span> algoritmo = <span class="hljs-string">'sha512'</span>
<span class="hljs-keyword">const</span> datos = <span class="hljs-string">'foobarbaz'</span>

<span class="hljs-keyword">const</span> integrity = (
  algorithm +
  <span class="hljs-string">'-'</span> +
  crypto.createHash(algoritmo).update(datos).digest(<span class="hljs-string">'base64'</span>)
)
</code></pre>
<p>También puedes usar <a href="https://npm.im/ssri"><code>ssri</code></a> para deferir el trabajo a otra
librería que garantiza que todo esté correcto, pues maneja probablemente todas
las operaciones que tendrías que hacer con SRIs, incluyendo convirtiendo entre
hexadecimal y el formato SRI.</p>
<div class="pilwrap" id="greater-cacache.verifica-cache-ops-greater-promise">
  <h4>
    <a href="#greater-cacache.verifica-cache-ops-greater-promise" name="greater-cacache.verifica-cache-ops-greater-promise" class="pilcrow"></a>
<a name="verify"></a> <code>&gt; cacache.verifica(cache, ops) -&gt; Promise</code>
  </h4>
</div>
<p>Examina y arregla tu caché:</p>
<ul>
<li>Limpia entradas inválidas, huérfanas y corrompidas</li>
<li>Te deja filtrar cuales entradas retener, con tu propio filtro</li>
<li>Reclama cualquier ficheros de contenido sin referencias en el índice</li>
<li>Verifica integridad de todos los ficheros de contenido y remueve los malos</li>
<li>Arregla permisos del caché</li>
<li>Remieve el directorio <code>tmp</code> en el caché, y todo su contenido.</li>
</ul>
<p>Cuando termine, devuelve un objeto con varias estadísticas sobre el proceso de
verificación, por ejemplo la cantidad de espacio de disco reclamado, el número
de entradas válidas, número de entradas removidas, etc.</p>
<div class="pilwrap" id="opciones">
  <h5>
    <a href="#opciones" name="opciones" class="pilcrow"></a>
Opciones
  </h5>
</div>
<ul>
<li><code>ops.uid</code> - uid para asignarle al caché y su contenido</li>
<li><code>ops.gid</code> - gid para asignarle al caché y su contenido</li>
<li><code>ops.filter</code> - recibe una entrada como argumento. Devuelve falso para removerla. Nota: es posible que esta función sea invocada con la misma entrada más de una vez.</li>
</ul>
<div class="pilwrap" id="example">
  <h5>
    <a href="#example" name="example" class="pilcrow"></a>
Example
  </h5>
</div>
<pre><code class="sh"><span class="hljs-built_in">echo</span> somegarbage &gt;&gt; <span class="hljs-variable">$RUTACACHE</span>/content/deadbeef
</code></pre>
<pre><code class="javascript">cacache.verifica(rutaCache).then(<span class="hljs-function"><span class="hljs-params">stats</span> =&gt;</span> {
  <span class="hljs-comment">// deadbeef collected, because of invalid checksum.</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'cache is much nicer now! stats:'</span>, stats)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.verifica.ultimavez-cache-greater-promise">
  <h4>
    <a href="#greater-cacache.verifica.ultimavez-cache-greater-promise" name="greater-cacache.verifica.ultimavez-cache-greater-promise" class="pilcrow"></a>
<a name="verify-last-run"></a> <code>&gt; cacache.verifica.ultimaVez(cache) -&gt; Promise</code>
  </h4>
</div>
<p>Alias: <code>últimaVez</code></p>
<p>Devuelve un <code>Date</code> que representa la última vez que <code>cacache.verifica</code> fue
ejecutada en <code>cache</code>.</p>
<div class="pilwrap" id="example-1">
  <h5>
    <a href="#example-1" name="example-1" class="pilcrow"></a>
Example
  </h5>
</div>
<pre><code class="javascript">cacache.verifica(rutaCache).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  cacache.verifica.ultimaVez(rutaCache).then(última =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'La última vez que se usó cacache.verifica() fue '</span> + última)
  })
})
</code></pre>
</div>
  </div>
</body>
</html>
