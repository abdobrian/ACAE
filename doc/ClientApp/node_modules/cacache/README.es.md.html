<!DOCTYPE html>
<html>
<head>
  <title>README.es.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../doc-style.css" />
  <script src="../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../";
    var thisFile = "ClientApp\\node_modules\\cacache\\README.es.md";
    var defaultSidebar = true;
  </script>
  <script src="../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#cacache">cacache     </a>
      </div>

      <div class="heading h2">
        <a href="#instalacion">Instalaci√≥n</a>
      </div>

      <div class="heading h2">
        <a href="#indice">√çndice</a>
      </div>

      <div class="heading h3">
        <a href="#ejemplo">Ejemplo</a>
      </div>

      <div class="heading h3">
        <a href="#caracteristicas">Caracter√≠sticas</a>
      </div>

      <div class="heading h3">
        <a href="#como-contribuir">C√≥mo Contribuir</a>
      </div>

      <div class="heading h3">
        <a href="#api">API</a>
      </div>

      <div class="heading h4">
        <a href="#usando-el-api-en-espanol"> Usando el API en espa√±ol</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.ls-cache-greater-promiselessobjectgreater"> &amp;gt; cacache.ls(cache) -&amp;gt; Promise&amp;lt;Object&amp;gt;</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-1">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.ls.flujo-cache-greater-readable"> &amp;gt; cacache.ls.flujo(cache) -&amp;gt; Readable</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-2">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.saca-cache-clave-ops-greater-promise-data-metadata-integrity"> &amp;gt; cacache.saca(cache, clave, [ops]) -&amp;gt; Promise({data, metadata, integrity})</a>
      </div>

      <div class="heading h5">
        <a href="#nota">Nota</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-3">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.saca.flujo-cache-clave-ops-greater-readable"> &amp;gt; cacache.saca.flujo(cache, clave, [ops]) -&amp;gt; Readable</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-4">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.saca.info-cache-clave-greater-promise"> &amp;gt; cacache.saca.info(cache, clave) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#campos">Campos</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-5">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.saca.tienedatos-cache-integrity-greater-promise"> &amp;gt; cacache.saca.tieneDatos(cache, integrity) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-6">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.mete-cache-clave-datos-ops-greater-promise"> &amp;gt; cacache.mete(cache, clave, datos, [ops]) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-7">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.mete.flujo-cache-clave-ops-greater-writable"> &amp;gt; cacache.mete.flujo(cache, clave, [ops]) -&amp;gt; Writable</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-8">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-opciones-para-cacache.mete"> &amp;gt; opciones para cacache.mete</a>
      </div>

      <div class="heading h5">
        <a href="#ops.metadata">ops.metadata</a>
      </div>

      <div class="heading h5">
        <a href="#ops.size">ops.size</a>
      </div>

      <div class="heading h5">
        <a href="#ops.integrity">ops.integrity</a>
      </div>

      <div class="heading h5">
        <a href="#ops.algorithms">ops.algorithms</a>
      </div>

      <div class="heading h5">
        <a href="#ops.uidops.gid">ops.uid/ops.gid</a>
      </div>

      <div class="heading h5">
        <a href="#ops.memoize">ops.memoize</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.rm.todo-cache-greater-promise"> &amp;gt; cacache.rm.todo(cache) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-9">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.rm.entrada-cache-clave-greater-promise"> &amp;gt; cacache.rm.entrada(cache, clave) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-10">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.rm.datos-cache-integrity-greater-promise"> &amp;gt; cacache.rm.datos(cache, integrity) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-11">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.ponlenguaje-locale"> &amp;gt; cacache.ponLenguaje(locale)</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.limpiamemoizado"> &amp;gt; cacache.limpiaMemoizado()</a>
      </div>

      <div class="heading h4">
        <a href="#greater-tmp.hazdir-cache-ops-greater-promiselesspathgreater"> &amp;gt; tmp.hazdir(cache, ops) -&amp;gt; Promise&amp;lt;Path&amp;gt;</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-12">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#greater-tmp.contmp-cache-ops-cb-greater-promise"> &amp;gt; tmp.conTmp(cache, ops, cb) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#ejemplo-13">Ejemplo</a>
      </div>

      <div class="heading h4">
        <a href="#hacheos-de-subresource-integrity"> Hacheos de Subresource Integrity</a>
      </div>

      <div class="heading h5">
        <a href="#generando-tus-propios-hacheos">Generando tus propios hacheos</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.verifica-cache-ops-greater-promise"> &amp;gt; cacache.verifica(cache, ops) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#opciones">Opciones</a>
      </div>

      <div class="heading h5">
        <a href="#example">Example</a>
      </div>

      <div class="heading h4">
        <a href="#greater-cacache.verifica.ultimavez-cache-greater-promise"> &amp;gt; cacache.verifica.ultimaVez(cache) -&amp;gt; Promise</a>
      </div>

      <div class="heading h5">
        <a href="#example-1">Example</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="docs markdown"><div class="pilwrap" id="cacache">
  <h1>
    <a href="#cacache" name="cacache" class="pilcrow"></a>
cacache <a href="https://npm.im/cacache"><img src="https://img.shields.io/npm/v/cacache.svg" alt="npm version"></a> <a href="https://npm.im/cacache"><img src="https://img.shields.io/npm/l/cacache.svg" alt="license"></a> <a href="https://travis-ci.org/zkat/cacache"><img src="https://img.shields.io/travis/zkat/cacache.svg" alt="Travis"></a> <a href="https://ci.appveyor.com/project/zkat/cacache"><img src="https://ci.appveyor.com/api/projects/status/github/zkat/cacache?svg=true" alt="AppVeyor"></a> <a href="https://coveralls.io/github/zkat/cacache?branch=latest"><img src="https://coveralls.io/repos/github/zkat/cacache/badge.svg?branch=latest" alt="Coverage Status"></a>
  </h1>
</div>
<p><a href="https://github.com/zkat/cacache"><code>cacache</code></a> es una librer√≠a de Node.js para
manejar caches locales en disco, con acceso tanto con claves √∫nicas como
direcciones de contenido (hashes/hacheos). Es s√∫per r√°pida, excelente con el
acceso concurrente, y jam√°s te dar√° datos incorrectos, a√∫n si se corrompen o
manipulan directamente los ficheros del cache.</p>
<p>El prop√≥sito original era reemplazar el cach√© local de
<a href="https://npm.im/npm">npm</a>, pero se puede usar por su propia cuenta.</p>
<p><em>Traducciones: <a href="README.md.html">English</a></em></p>
<div class="pilwrap" id="instalacion">
  <h2>
    <a href="#instalacion" name="instalacion" class="pilcrow"></a>
Instalaci√≥n
  </h2>
</div>
<p><code>$ npm install --save cacache</code></p>
<div class="pilwrap" id="indice">
  <h2>
    <a href="#indice" name="indice" class="pilcrow"></a>
√çndice
  </h2>
</div>
<ul>
<li><a href="#ejemplo.html">Ejemplo</a></li>
<li><a href="#caracter%C3%ADsticas.html">Caracter√≠sticas</a></li>
<li><a href="#c%C3%B3mo-contribuir.html">C√≥mo Contribuir</a></li>
<li><a href="#api.html">API</a>
<ul>
<li><a href="#localized-api.html">Usando el API en espa√±ol</a></li>
<li>Leer
<ul>
<li><a href="#ls.html"><code>ls</code></a></li>
<li><a href="#ls-stream.html"><code>ls.flujo</code></a></li>
<li><a href="#get-data.html"><code>saca</code></a></li>
<li><a href="#get-stream.html"><code>saca.flujo</code></a></li>
<li><a href="#get-info.html"><code>saca.info</code></a></li>
<li><a href="#get-hasContent.html"><code>saca.tieneDatos</code></a></li>
</ul>
</li>
<li>Escribir
<ul>
<li><a href="#put-data.html"><code>mete</code></a></li>
<li><a href="#put-stream.html"><code>mete.flujo</code></a></li>
<li><a href="#put-options.html">opciones para <code>mete*</code></a></li>
<li><a href="#rm-all.html"><code>rm.todo</code></a></li>
<li><a href="#rm-entry.html"><code>rm.entrada</code></a></li>
<li><a href="#rm-content.html"><code>rm.datos</code></a></li>
</ul>
</li>
<li>Utilidades
<ul>
<li><a href="#set-locale.html"><code>ponLenguaje</code></a></li>
<li><a href="#clear-memoized.html"><code>limpiaMemoizado</code></a></li>
<li><a href="#tmp-mkdir.html"><code>tmp.hazdir</code></a></li>
<li><a href="#with-tmp.html"><code>tmp.conTmp</code></a></li>
</ul>
</li>
<li>Integridad
<ul>
<li><a href="#integrity.html">Subresource Integrity</a></li>
<li><a href="#verify.html"><code>verifica</code></a></li>
<li><a href="#verify-last-run.html"><code>verifica.ultimaVez</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="pilwrap" id="ejemplo">
  <h3>
    <a href="#ejemplo" name="ejemplo" class="pilcrow"></a>
Ejemplo
  </h3>
</div>
<pre><code class="javascript"><span class="hljs-keyword">const</span> cacache = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cacache/es'</span>)
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)

<span class="hljs-keyword">const</span> tarbol = <span class="hljs-string">'/ruta/a/mi-tar.tgz'</span>
<span class="hljs-keyword">const</span> rutaCache = <span class="hljs-string">'/tmp/my-toy-cache'</span>
<span class="hljs-keyword">const</span> clave = <span class="hljs-string">'mi-clave-√∫nica-1234'</span>

<span class="hljs-comment">// ¬°A√±√°delo al cach√©! Usa `rutaCache` como ra√≠z del cach√©.</span>
cacache.mete(rutaCache, clave, <span class="hljs-string">'10293801983029384'</span>).then(<span class="hljs-function"><span class="hljs-params">integrity</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Saved content to <span class="hljs-subst">${rutaCache}</span>.`</span>)
})

<span class="hljs-keyword">const</span> destino = <span class="hljs-string">'/tmp/mytar.tgz'</span>

<span class="hljs-comment">// Copia el contenido del cach√© a otro fichero, pero esta vez con flujos.</span>
cacache.saca.flujo(
  rutaCache, clave
).pipe(
  fs.createWriteStream(destino)
).on(<span class="hljs-string">'finish'</span>, () =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'extracci√≥n completada'</span>)
})

<span class="hljs-comment">// La misma cosa, pero accesando el contenido directamente, sin tocar el √≠ndice.</span>
cacache.saca.porHacheo(rutaCache, integridad).then(<span class="hljs-function"><span class="hljs-params">datos</span> =&gt;</span> {
  fs.writeFile(destino, datos, err =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'datos del tarbol sacados basado en su sha512, y escrito a otro fichero'</span>)
  })
})
</code></pre>
<div class="pilwrap" id="caracteristicas">
  <h3>
    <a href="#caracteristicas" name="caracteristicas" class="pilcrow"></a>
Caracter√≠sticas
  </h3>
</div>
<ul>
<li>Extracci√≥n por clave o por direcci√≥n de contenido (shasum, etc)</li>
<li>Usa el est√°ndard de web, <a href="#integrity.html">Subresource Integrity</a></li>
<li>Compatible con multiples algoritmos - usa sha1, sha512, etc, en el mismo cach√© sin problema</li>
<li>Entradas con contenido id√©ntico comparten ficheros</li>
<li>Tolerancia de fallas (inmune a corrupci√≥n, ficheros parciales, carreras de proceso, etc)</li>
<li>Verificaci√≥n completa de datos cuando (escribiendo y leyendo)</li>
<li>Concurrencia r√°pida, segura y &quot;lockless&quot;</li>
<li>Compatible con <code>stream</code>s (flujos)</li>
<li>Compatible con <code>Promise</code>s (promesas)</li>
<li>Bastante r√°pida -- acceso, incluyendo verificaci√≥n, en microsegundos</li>
<li>Almacenaje de metadatos arbitrarios</li>
<li>Colecci√≥n de basura y verificaci√≥n adicional fuera de banda</li>
<li>Cobertura rigurosa de pruebas</li>
<li>Probablente hay un &quot;Bloom filter&quot; por ah√≠ en alg√∫n lado. Eso le mola a la gente, ¬øVerdad? ü§î</li>
</ul>
<div class="pilwrap" id="como-contribuir">
  <h3>
    <a href="#como-contribuir" name="como-contribuir" class="pilcrow"></a>
C√≥mo Contribuir
  </h3>
</div>
<p>El equipo de cacache felizmente acepta contribuciones de c√≥digo y otras maneras de participaci√≥n. ¬°Hay muchas formas diferentes de contribuir! La <a href="CONTRIBUTING.md.html">Gu√≠a de Colaboradores</a> (en ingl√©s) tiene toda la informaci√≥n que necesitas para cualquier tipo de contribuci√≥n: todo desde c√≥mo reportar errores hasta c√≥mo someter parches con nuevas caracter√≠sticas. Con todo y eso, no se preocupe por si lo que haces est√° ex√°ctamente correcto: no hay ning√∫n problema en hacer preguntas si algo no est√° claro, o no lo encuentras.</p>
<p>El equipo de cacache tiene miembros hispanohablantes: es completamente aceptable crear <code>issues</code> y <code>pull requests</code> en espa√±ol/castellano.</p>
<p>Todos los participantes en este proyecto deben obedecer el <a href="CODE_OF_CONDUCT.md.html">C√≥digo de Conducta</a> (en ingl√©s), y en general actuar de forma amable y respetuosa mientras participan en esta comunidad.</p>
<p>Por favor refi√©rase al <a href="CHANGELOG.md.html">Historial de Cambios</a> (en ingl√©s) para detalles sobre cambios importantes inclu√≠dos en cada versi√≥n.</p>
<p>Finalmente, cacache tiene un sistema de localizaci√≥n de lenguaje. Si te interesa a√±adir lenguajes o mejorar los que existen, mira en el directorio <code>./locales</code> para comenzar.</p>
<p>Happy hacking!</p>
<div class="pilwrap" id="api">
  <h3>
    <a href="#api" name="api" class="pilcrow"></a>
API
  </h3>
</div>
<div class="pilwrap" id="usando-el-api-en-espanol">
  <h4>
    <a href="#usando-el-api-en-espanol" name="usando-el-api-en-espanol" class="pilcrow"></a>
<a name="localized-api"></a> Usando el API en espa√±ol
  </h4>
</div>
<p>cacache incluye una traducci√≥n completa de su API al castellano, con las mismas
caracter√≠sticas. Para usar el API como est√° documentado en este documento, usa
<code>require('cacache/es')</code></p>
<p>cacache tambi√©n tiene otros lenguajes: encu√©ntralos bajo <code>./locales</code>, y podr√°s
usar el API en ese lenguaje con <code>require('cacache/&lt;lenguaje&gt;')</code></p>
<div class="pilwrap" id="greater-cacache.ls-cache-greater-promiselessobjectgreater">
  <h4>
    <a href="#greater-cacache.ls-cache-greater-promiselessobjectgreater" name="greater-cacache.ls-cache-greater-promiselessobjectgreater" class="pilcrow"></a>
<a name="ls"></a> <code>&gt; cacache.ls(cache) -&gt; Promise&lt;Object&gt;</code>
  </h4>
</div>
<p>Enumera todas las entradas en el cach√©, dentro de un solo objeto. Cada entrada
en el objeto tendr√° como clave la clave √∫nica usada para el √≠ndice, el valor
siendo un objeto de <a href="#get-info.html"><code>saca.info</code></a>.</p>
<div class="pilwrap" id="ejemplo-1">
  <h5>
    <a href="#ejemplo-1" name="ejemplo-1" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.ls(rutaCache).then(<span class="hljs-built_in">console</span>.log)
<span class="hljs-comment">// Salida</span>
{
  <span class="hljs-string">'my-thing'</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-string">'my-thing'</span>,
    <span class="hljs-attr">integrity</span>: <span class="hljs-string">'sha512-BaSe64/EnCoDED+HAsh=='</span>
    path: <span class="hljs-string">'.testcache/content/deadbeef'</span>, <span class="hljs-comment">// unido con `rutaCache`</span>
    time: <span class="hljs-number">12345698490</span>,
    <span class="hljs-attr">size</span>: <span class="hljs-number">4023948</span>,
    <span class="hljs-attr">metadata</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'blah'</span>,
      <span class="hljs-attr">version</span>: <span class="hljs-string">'1.2.3'</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">'this was once a package but now it is my-thing'</span>
    }
  },
  <span class="hljs-string">'other-thing'</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-string">'other-thing'</span>,
    <span class="hljs-attr">integrity</span>: <span class="hljs-string">'sha1-ANothER+hasH='</span>,
    <span class="hljs-attr">path</span>: <span class="hljs-string">'.testcache/content/bada55'</span>,
    <span class="hljs-attr">time</span>: <span class="hljs-number">11992309289</span>,
    <span class="hljs-attr">size</span>: <span class="hljs-number">111112</span>
  }
}
</code></pre>
<div class="pilwrap" id="greater-cacache.ls.flujo-cache-greater-readable">
  <h4>
    <a href="#greater-cacache.ls.flujo-cache-greater-readable" name="greater-cacache.ls.flujo-cache-greater-readable" class="pilcrow"></a>
<a name="ls-stream"></a> <code>&gt; cacache.ls.flujo(cache) -&gt; Readable</code>
  </h4>
</div>
<p>Enumera todas las entradas en el cach√©, emitiendo un objeto de
<a href="#get-info.html"><code>saca.info</code></a> por cada evento de <code>data</code> en el flujo.</p>
<div class="pilwrap" id="ejemplo-2">
  <h5>
    <a href="#ejemplo-2" name="ejemplo-2" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.ls.flujo(rutaCache).on(<span class="hljs-string">'data'</span>, <span class="hljs-built_in">console</span>.log)
<span class="hljs-comment">// Salida</span>
{
  <span class="hljs-attr">key</span>: <span class="hljs-string">'my-thing'</span>,
  <span class="hljs-attr">integrity</span>: <span class="hljs-string">'sha512-BaSe64HaSh'</span>,
  <span class="hljs-attr">path</span>: <span class="hljs-string">'.testcache/content/deadbeef'</span>, <span class="hljs-comment">// unido con `rutaCache`</span>
  time: <span class="hljs-number">12345698490</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">13423</span>,
  <span class="hljs-attr">metadata</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'blah'</span>,
    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.2.3'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'this was once a package but now it is my-thing'</span>
  }
}

{
  <span class="hljs-attr">key</span>: <span class="hljs-string">'other-thing'</span>,
  <span class="hljs-attr">integrity</span>: <span class="hljs-string">'whirlpool-WoWSoMuchSupport'</span>,
  <span class="hljs-attr">path</span>: <span class="hljs-string">'.testcache/content/bada55'</span>,
  <span class="hljs-attr">time</span>: <span class="hljs-number">11992309289</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">498023984029</span>
}

{
  ...
}
</code></pre>
<div class="pilwrap" id="greater-cacache.saca-cache-clave-ops-greater-promise-data-metadata-integrity">
  <h4>
    <a href="#greater-cacache.saca-cache-clave-ops-greater-promise-data-metadata-integrity" name="greater-cacache.saca-cache-clave-ops-greater-promise-data-metadata-integrity" class="pilcrow"></a>
<a name="get-data"></a> <code>&gt; cacache.saca(cache, clave, [ops]) -&gt; Promise({data, metadata, integrity})</code>
  </h4>
</div>
<p>Devuelve un objeto con los datos, hacheo de integridad y metadatos identificados
por la <code>clave</code>. La propiedad <code>data</code> de este objeto ser√° una instancia de
<code>Buffer</code> con los datos almacenados en el cach√©. to do with it! cacache just
won't care.</p>
<p><code>integrity</code> es un <code>string</code> de <a href="#integrity.html">Subresource Integrity</a>. D√≠gase, un
<code>string</code> que puede ser usado para verificar a la <code>data</code>, que tiene como formato
<code>&lt;algoritmo&gt;-&lt;hacheo-integridad-base64&gt;</code>.</p>
<p>So no existe ninguna entrada identificada por <code>clave</code>, o se los datos
almacenados localmente fallan verificaci√≥n, el <code>Promise</code> fallar√°.</p>
<p>Una sub-funci√≥n, <code>saca.porHacheo</code>, tiene casi el mismo comportamiento, excepto
que busca entradas usando el hacheo de integridad, sin tocar el √≠ndice general.
Esta versi√≥n <em>s√≥lo</em> devuelve <code>data</code>, sin ning√∫n objeto conteni√©ndola.</p>
<div class="pilwrap" id="nota">
  <h5>
    <a href="#nota" name="nota" class="pilcrow"></a>
Nota
  </h5>
</div>
<p>Esta funci√≥n lee la entrada completa a la memoria antes de devolverla. Si est√°s
almacenando datos Muy Grandes, es posible que <a href="#get-stream.html"><code>saca.flujo</code></a> sea
una mejor soluci√≥n.</p>
<div class="pilwrap" id="ejemplo-3">
  <h5>
    <a href="#ejemplo-3" name="ejemplo-3" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">// Busca por clave
cache.saca(rutaCache, 'my-thing').then(console.log)
// Salida:
{
  metadata: {
    thingName: 'my'
  },
  integrity: 'sha512-BaSe64HaSh',
  data: Buffer#&lt;deadbeef&gt;,
  size: 9320
}

// Busca por hacheo
cache.saca.porHacheo(rutaCache, 'sha512-BaSe64HaSh').then(console.log)
// Salida:
Buffer#&lt;deadbeef&gt;
</code></pre>
<div class="pilwrap" id="greater-cacache.saca.flujo-cache-clave-ops-greater-readable">
  <h4>
    <a href="#greater-cacache.saca.flujo-cache-clave-ops-greater-readable" name="greater-cacache.saca.flujo-cache-clave-ops-greater-readable" class="pilcrow"></a>
<a name="get-stream"></a> <code>&gt; cacache.saca.flujo(cache, clave, [ops]) -&gt; Readable</code>
  </h4>
</div>
<p>Devuelve un <a href="https://nodejs.org/api/stream.html#stream_readable_streams">Readable
Stream</a> de los datos
almacenados bajo <code>clave</code>.</p>
<p>So no existe ninguna entrada identificada por <code>clave</code>, o se los datos
almacenados localmente fallan verificaci√≥n, el <code>Promise</code> fallar√°.</p>
<p><code>metadata</code> y <code>integrity</code> ser√°n emitidos como eventos antes de que el flujo
cierre.</p>
<p>Una sub-funci√≥n, <code>saca.flujo.porHacheo</code>, tiene casi el mismo comportamiento,
excepto que busca entradas usando el hacheo de integridad, sin tocar el √≠ndice
general. Esta versi√≥n no emite eventos de <code>metadata</code> o <code>integrity</code>.</p>
<div class="pilwrap" id="ejemplo-4">
  <h5>
    <a href="#ejemplo-4" name="ejemplo-4" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript"><span class="hljs-comment">// Busca por clave</span>
cache.saca.flujo(
  rutaCache, <span class="hljs-string">'my-thing'</span>
).on(<span class="hljs-string">'metadata'</span>, metadata =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'metadata:'</span>, metadata)
}).on(<span class="hljs-string">'integrity'</span>, integrity =&gt; {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'integrity:'</span>, integrity)
}).pipe(
  fs.createWriteStream(<span class="hljs-string">'./x.tgz'</span>)
)
<span class="hljs-comment">// Salidas:</span>
metadata: { ... }
integrity: <span class="hljs-string">'sha512-SoMeDIGest+64=='</span>

<span class="hljs-comment">// Busca por hacheo</span>
cache.saca.flujo.porHacheo(
  rutaCache, <span class="hljs-string">'sha512-SoMeDIGest+64=='</span>
).pipe(
  fs.createWriteStream(<span class="hljs-string">'./x.tgz'</span>)
)
</code></pre>
<div class="pilwrap" id="greater-cacache.saca.info-cache-clave-greater-promise">
  <h4>
    <a href="#greater-cacache.saca.info-cache-clave-greater-promise" name="greater-cacache.saca.info-cache-clave-greater-promise" class="pilcrow"></a>
<a name="get-info"></a> <code>&gt; cacache.saca.info(cache, clave) -&gt; Promise</code>
  </h4>
</div>
<p>Busca la <code>clave</code> en el √≠ndice del cach√©, devolviendo informaci√≥n sobre la
entrada si existe.</p>
<div class="pilwrap" id="campos">
  <h5>
    <a href="#campos" name="campos" class="pilcrow"></a>
Campos
  </h5>
</div>
<ul>
<li><code>key</code> - Clave de la entrada. Igual al argumento <code>clave</code>.</li>
<li><code>integrity</code> - <a href="#integrity.html">hacheo de Subresource Integrity</a> del contenido al que se refiere esta entrada.</li>
<li><code>path</code> - Direcci√≥n del fichero de datos almacenados, relativa al argumento <code>cache</code>.</li>
<li><code>time</code> - Hora de creaci√≥n de la entrada</li>
<li><code>metadata</code> - Metadatos asignados a esta entrada por el usuario</li>
</ul>
<div class="pilwrap" id="ejemplo-5">
  <h5>
    <a href="#ejemplo-5" name="ejemplo-5" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.saca.info(rutaCache, <span class="hljs-string">'my-thing'</span>).then(<span class="hljs-built_in">console</span>.log)

<span class="hljs-comment">// Salida</span>
{
  <span class="hljs-attr">key</span>: <span class="hljs-string">'my-thing'</span>,
  <span class="hljs-attr">integrity</span>: <span class="hljs-string">'sha256-MUSTVERIFY+ALL/THINGS=='</span>
  path: <span class="hljs-string">'.testcache/content/deadbeef'</span>,
  <span class="hljs-attr">time</span>: <span class="hljs-number">12345698490</span>,
  <span class="hljs-attr">size</span>: <span class="hljs-number">849234</span>,
  <span class="hljs-attr">metadata</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'blah'</span>,
    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.2.3'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'this was once a package but now it is my-thing'</span>
  }
}
</code></pre>
<div class="pilwrap" id="greater-cacache.saca.tienedatos-cache-integrity-greater-promise">
  <h4>
    <a href="#greater-cacache.saca.tienedatos-cache-integrity-greater-promise" name="greater-cacache.saca.tienedatos-cache-integrity-greater-promise" class="pilcrow"></a>
<a name="get-hasContent"></a> <code>&gt; cacache.saca.tieneDatos(cache, integrity) -&gt; Promise</code>
  </h4>
</div>
<p>Busca un <a href="#integrity.html">hacheo Subresource Integrity</a> en el cach√©. Si existe el
contenido asociado con <code>integrity</code>, devuelve un objeto con dos campos: el hacheo
<em>espec√≠fico</em> que se us√≥ para la b√∫squeda, <code>sri</code>, y el tama√±o total del
contenido, <code>size</code>. Si no existe ning√∫n contenido asociado con <code>integrity</code>,
devuelve <code>false</code>.</p>
<div class="pilwrap" id="ejemplo-6">
  <h5>
    <a href="#ejemplo-6" name="ejemplo-6" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.saca.tieneDatos(rutaCache, <span class="hljs-string">'sha256-MUSTVERIFY+ALL/THINGS=='</span>).then(<span class="hljs-built_in">console</span>.log)

<span class="hljs-comment">// Salida</span>
{
  <span class="hljs-attr">sri</span>: {
    <span class="hljs-attr">source</span>: <span class="hljs-string">'sha256-MUSTVERIFY+ALL/THINGS=='</span>,
    <span class="hljs-attr">algorithm</span>: <span class="hljs-string">'sha256'</span>,
    <span class="hljs-attr">digest</span>: <span class="hljs-string">'MUSTVERIFY+ALL/THINGS=='</span>,
    <span class="hljs-attr">options</span>: []
  },
  <span class="hljs-attr">size</span>: <span class="hljs-number">9001</span>
}

cacache.saca.tieneDatos(rutaCache, <span class="hljs-string">'sha521-NOT+IN/CACHE=='</span>).then(<span class="hljs-built_in">console</span>.log)

<span class="hljs-comment">// Salida</span>
<span class="hljs-literal">false</span>
</code></pre>
<div class="pilwrap" id="greater-cacache.mete-cache-clave-datos-ops-greater-promise">
  <h4>
    <a href="#greater-cacache.mete-cache-clave-datos-ops-greater-promise" name="greater-cacache.mete-cache-clave-datos-ops-greater-promise" class="pilcrow"></a>
<a name="put-data"></a> <code>&gt; cacache.mete(cache, clave, datos, [ops]) -&gt; Promise</code>
  </h4>
</div>
<p>Inserta <code>datos</code> en el cach√©. El <code>Promise</code> devuelto se resuelve con un hacheo
(generado conforme a <a href="#optsalgorithms.html"><code>ops.algorithms</code></a>) despu√©s que la entrada
haya sido escrita en completo.</p>
<div class="pilwrap" id="ejemplo-7">
  <h5>
    <a href="#ejemplo-7" name="ejemplo-7" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">fetch(
  <span class="hljs-string">'https://registry.npmjs.org/cacache/-/cacache-1.0.0.tgz'</span>
).then(<span class="hljs-function"><span class="hljs-params">datos</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> cacache.mete(rutaCache, <span class="hljs-string">'registry.npmjs.org|cacache@1.0.0'</span>, datos)
}).then(<span class="hljs-function"><span class="hljs-params">integridad</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'el hacheo de integridad es'</span>, integridad)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.mete.flujo-cache-clave-ops-greater-writable">
  <h4>
    <a href="#greater-cacache.mete.flujo-cache-clave-ops-greater-writable" name="greater-cacache.mete.flujo-cache-clave-ops-greater-writable" class="pilcrow"></a>
<a name="put-stream"></a> <code>&gt; cacache.mete.flujo(cache, clave, [ops]) -&gt; Writable</code>
  </h4>
</div>
<p>Devuelve un <a href="https://nodejs.org/api/stream.html#stream_writable_streams">Writable
Stream</a> que inserta
al cach√© los datos escritos a √©l. Emite un evento <code>integrity</code> con el hacheo del
contenido escrito, cuando completa.</p>
<div class="pilwrap" id="ejemplo-8">
  <h5>
    <a href="#ejemplo-8" name="ejemplo-8" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">request.get(
  <span class="hljs-string">'https://registry.npmjs.org/cacache/-/cacache-1.0.0.tgz'</span>
).pipe(
  cacache.mete.flujo(
    rutaCache, <span class="hljs-string">'registry.npmjs.org|cacache@1.0.0'</span>
  ).on(<span class="hljs-string">'integrity'</span>, d =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`integrity digest is <span class="hljs-subst">${d}</span>`</span>))
)
</code></pre>
<div class="pilwrap" id="greater-opciones-para-cacache.mete">
  <h4>
    <a href="#greater-opciones-para-cacache.mete" name="greater-opciones-para-cacache.mete" class="pilcrow"></a>
<a name="put-options"></a> <code>&gt; opciones para cacache.mete</code>
  </h4>
</div>
<p>La funciones <code>cacache.mete</code> tienen un n√∫mero de opciones en com√∫n.</p>
<div class="pilwrap" id="ops.metadata">
  <h5>
    <a href="#ops.metadata" name="ops.metadata" class="pilcrow"></a>
<code>ops.metadata</code>
  </h5>
</div>
<p>Metadatos del usuario que se almacenar√°n con la entrada.</p>
<div class="pilwrap" id="ops.size">
  <h5>
    <a href="#ops.size" name="ops.size" class="pilcrow"></a>
<code>ops.size</code>
  </h5>
</div>
<p>El tama√±o declarado de los datos que se van a insertar. Si es prove√≠do, cacache
verificar√° que los datos escritos sean de ese tama√±o, o si no, fallar√° con un
error con c√≥digo <code>EBADSIZE</code>.</p>
<div class="pilwrap" id="ops.integrity">
  <h5>
    <a href="#ops.integrity" name="ops.integrity" class="pilcrow"></a>
<code>ops.integrity</code>
  </h5>
</div>
<p>El hacheo de integridad de los datos siendo escritos.</p>
<p>Si es prove√≠do, y los datos escritos no le corresponden, la operaci√≥n fallar√°
con un error con c√≥digo <code>EINTEGRITY</code>.</p>
<p><code>ops.algorithms</code> no tiene ning√∫n efecto si esta opci√≥n est√° presente.</p>
<div class="pilwrap" id="ops.algorithms">
  <h5>
    <a href="#ops.algorithms" name="ops.algorithms" class="pilcrow"></a>
<code>ops.algorithms</code>
  </h5>
</div>
<p>Por Defecto: <code>['sha512']</code></p>
<p>Algoritmos que se deben usar cuando se calcule el hacheo de <a href="#integrity.html">subresource
integrity</a> para los datos insertados. Puede usar cualquier algoritmo
enumerado en <code>crypto.getHashes()</code>.</p>
<p>Por el momento, s√≥lo se acepta un algoritmo (d√≠gase, un array con ex√°ctamente un
valor). No tiene ning√∫n efecto si <code>ops.integrity</code> tambi√©n ha sido proveido.</p>
<div class="pilwrap" id="ops.uidops.gid">
  <h5>
    <a href="#ops.uidops.gid" name="ops.uidops.gid" class="pilcrow"></a>
<code>ops.uid</code>/<code>ops.gid</code>
  </h5>
</div>
<p>Si est√°n presentes, cacache har√° todo lo posible para asegurarse que todos los
ficheros creados en el proceso de sus operaciones en el cach√© usen esta
combinaci√≥n en particular.</p>
<div class="pilwrap" id="ops.memoize">
  <h5>
    <a href="#ops.memoize" name="ops.memoize" class="pilcrow"></a>
<code>ops.memoize</code>
  </h5>
</div>
<p>Por Defecto: <code>null</code></p>
<p>Si es verdad, cacache tratar√° de memoizar los datos de la entrada en memoria. La
pr√≥xima vez que el proceso corriente trate de accesar los datos o entrada,
cacache buscar√° en memoria antes de buscar en disco.</p>
<p>Si <code>ops.memoize</code> es un objeto regular o un objeto como <code>Map</code> (es decir, un
objeto con m√©todos <code>get()</code> y <code>set()</code>), este objeto en s√≠ sera usado en vez del
cach√© de memoria global. Esto permite tener l√≥gica espec√≠fica a tu aplicaci√≥n
encuanto al almacenaje en memoria de tus datos.</p>
<p>Si quieres asegurarte que los datos se lean del disco en vez de memoria, usa
<code>memoize: false</code> cuando uses funciones de <code>cacache.saca</code>.</p>
<div class="pilwrap" id="greater-cacache.rm.todo-cache-greater-promise">
  <h4>
    <a href="#greater-cacache.rm.todo-cache-greater-promise" name="greater-cacache.rm.todo-cache-greater-promise" class="pilcrow"></a>
<a name="rm-all"></a> <code>&gt; cacache.rm.todo(cache) -&gt; Promise</code>
  </h4>
</div>
<p>Borra el cach√© completo, incluyendo ficheros temporeros, ficheros de datos, y el
√≠ndice del cach√©.</p>
<div class="pilwrap" id="ejemplo-9">
  <h5>
    <a href="#ejemplo-9" name="ejemplo-9" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.rm.todo(rutaCache).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'THE APOCALYPSE IS UPON US üò±'</span>)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.rm.entrada-cache-clave-greater-promise">
  <h4>
    <a href="#greater-cacache.rm.entrada-cache-clave-greater-promise" name="greater-cacache.rm.entrada-cache-clave-greater-promise" class="pilcrow"></a>
<a name="rm-entry"></a> <code>&gt; cacache.rm.entrada(cache, clave) -&gt; Promise</code>
  </h4>
</div>
<p>Alias: <code>cacache.rm</code></p>
<p>Borra la entrada <code>clave</code> del √≠nduce. El contenido asociado con esta entrada
seguir√° siendo accesible por hacheo usando
<a href="#get-stream.html"><code>saca.flujo.porHacheo</code></a>.</p>
<p>Para borrar el contenido en s√≠, usa <a href="#rm-content.html"><code>rm.datos</code></a>. Si quieres hacer
esto de manera m√°s segura (pues ficheros de contenido pueden ser usados por
multiples entradas), usa <a href="#verify.html"><code>verifica</code></a> para borrar hu√©rfanos.</p>
<div class="pilwrap" id="ejemplo-10">
  <h5>
    <a href="#ejemplo-10" name="ejemplo-10" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.rm.entrada(rutaCache, <span class="hljs-string">'my-thing'</span>).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'I did not like it anyway'</span>)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.rm.datos-cache-integrity-greater-promise">
  <h4>
    <a href="#greater-cacache.rm.datos-cache-integrity-greater-promise" name="greater-cacache.rm.datos-cache-integrity-greater-promise" class="pilcrow"></a>
<a name="rm-content"></a> <code>&gt; cacache.rm.datos(cache, integrity) -&gt; Promise</code>
  </h4>
</div>
<p>Borra el contenido identificado por <code>integrity</code>. Cualquier entrada que se
refiera a este contenido quedar√°n hu√©rfanas y se invalidar√°n si se tratan de
accesar, al menos que contenido id√©ntico sea a√±adido bajo <code>integrity</code>.</p>
<div class="pilwrap" id="ejemplo-11">
  <h5>
    <a href="#ejemplo-11" name="ejemplo-11" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.rm.datos(rutaCache, <span class="hljs-string">'sha512-SoMeDIGest/IN+BaSE64=='</span>).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'los datos para `mi-cosa` se borraron'</span>)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.ponlenguaje-locale">
  <h4>
    <a href="#greater-cacache.ponlenguaje-locale" name="greater-cacache.ponlenguaje-locale" class="pilcrow"></a>
<a name="set-locale"></a> <code>&gt; cacache.ponLenguaje(locale)</code>
  </h4>
</div>
<p>Configura el lenguaje usado para mensajes y errores de cacache. La lista de
lenguajes disponibles est√° en el directorio <code>./locales</code> del proyecto.</p>
<p><em>Te interesa a√±adir m√°s lenguajes? <a href="CONTRIBUTING.md.html">Somete un PR</a>!</em></p>
<div class="pilwrap" id="greater-cacache.limpiamemoizado">
  <h4>
    <a href="#greater-cacache.limpiamemoizado" name="greater-cacache.limpiamemoizado" class="pilcrow"></a>
<a name="clear-memoized"></a> <code>&gt; cacache.limpiaMemoizado()</code>
  </h4>
</div>
<p>Completamente reinicializa el cach√© de memoria interno. Si est√°s usando tu
propio objecto con <code>ops.memoize</code>, debes hacer esto de manera espec√≠fica a √©l.</p>
<div class="pilwrap" id="greater-tmp.hazdir-cache-ops-greater-promiselesspathgreater">
  <h4>
    <a href="#greater-tmp.hazdir-cache-ops-greater-promiselesspathgreater" name="greater-tmp.hazdir-cache-ops-greater-promiselesspathgreater" class="pilcrow"></a>
<a name="tmp-mkdir"></a> <code>&gt; tmp.hazdir(cache, ops) -&gt; Promise&lt;Path&gt;</code>
  </h4>
</div>
<p>Alias: <code>tmp.mkdir</code></p>
<p>Devuelve un directorio √∫nico dentro del directorio <code>tmp</code> del cach√©.</p>
<p>Una vez tengas el directorio, es responsabilidad tuya asegurarte que todos los
ficheros escrito a √©l sean creados usando los permisos y <code>uid</code>/<code>gid</code> concordante
con el cach√©. Si no, puedes pedirle a cacache que lo haga llamando a
<a href="#tmp-fix.html"><code>cacache.tmp.fix()</code></a>. Esta funci√≥n arreglar√° todos los permisos en el
directorio tmp.</p>
<p>Si quieres que cacache limpie el directorio autom√°ticamente cuando termines, usa
<a href="#with-tpm.html"><code>cacache.tmp.conTmp()</code></a>.</p>
<div class="pilwrap" id="ejemplo-12">
  <h5>
    <a href="#ejemplo-12" name="ejemplo-12" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.tmp.mkdir(cache).then(dir =&gt; {
  fs.writeFile(path.join(dir, 'blablabla'), Buffer#&lt;1234&gt;, ...)
})
</code></pre>
<div class="pilwrap" id="greater-tmp.contmp-cache-ops-cb-greater-promise">
  <h4>
    <a href="#greater-tmp.contmp-cache-ops-cb-greater-promise" name="greater-tmp.contmp-cache-ops-cb-greater-promise" class="pilcrow"></a>
<a name="with-tmp"></a> <code>&gt; tmp.conTmp(cache, ops, cb) -&gt; Promise</code>
  </h4>
</div>
<p>Crea un directorio temporero con <a href="#tmp-mkdir.html"><code>tmp.mkdir()</code></a> y ejecuta <code>cb</code> con
√©l como primer argumento. El directorio creado ser√° removido autom√°ticamente
cuando el valor devolvido por <code>cb()</code> se resuelva.</p>
<p>Las mismas advertencias aplican en cuanto a manejando permisos para los ficheros
dentro del directorio.</p>
<div class="pilwrap" id="ejemplo-13">
  <h5>
    <a href="#ejemplo-13" name="ejemplo-13" class="pilcrow"></a>
Ejemplo
  </h5>
</div>
<pre><code class="javascript">cacache.tmp.conTmp(cache, dir =&gt; {
  return fs.writeFileAsync(path.join(dir, 'blablabla'), Buffer#&lt;1234&gt;, ...)
}).then(() =&gt; {
  // `dir` no longer exists
})
</code></pre>
<div class="pilwrap" id="hacheos-de-subresource-integrity">
  <h4>
    <a href="#hacheos-de-subresource-integrity" name="hacheos-de-subresource-integrity" class="pilcrow"></a>
<a name="integrity"></a> Hacheos de Subresource Integrity
  </h4>
</div>
<p>cacache usa strings que siguen la especificaci√≥n de <a href="https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity">Subresource Integrity
spec</a>.</p>
<p>Es decir, donde quiera cacache espera un argumento o opci√≥n <code>integrity</code>, ese
string deber√≠a usar el formato <code>&lt;algoritmo&gt;-&lt;hacheo-base64&gt;</code>.</p>
<p>Una variaci√≥n importante sobre los hacheos que cacache acepta es que acepta el
nombre de cualquier algoritmo aceptado por el proceso de Node.js donde se usa.
Puedes usar <code>crypto.getHashes()</code> para ver cuales est√°n disponibles.</p>
<div class="pilwrap" id="generando-tus-propios-hacheos">
  <h5>
    <a href="#generando-tus-propios-hacheos" name="generando-tus-propios-hacheos" class="pilcrow"></a>
Generando tus propios hacheos
  </h5>
</div>
<p>Si tienes un <code>shasum</code>, en general va a estar en formato de string hexadecimal
(es decir, un <code>sha1</code> se ver√≠a como algo as√≠:
<code>5f5513f8822fdbe5145af33b64d8d970dcf95c6e</code>).</p>
<p>Para ser compatible con cacache, necesitas convertir esto a su equivalente en
subresource integrity. Por ejemplo, el hacheo correspondiente al ejemplo
anterior ser√≠a: <code>sha1-X1UT+IIv2+UUWvM7ZNjZcNz5XG4=</code>.</p>
<p>Puedes usar c√≥digo as√≠ para generarlo por tu cuenta:</p>
<pre><code class="javascript"><span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>)
<span class="hljs-keyword">const</span> algoritmo = <span class="hljs-string">'sha512'</span>
<span class="hljs-keyword">const</span> datos = <span class="hljs-string">'foobarbaz'</span>

<span class="hljs-keyword">const</span> integrity = (
  algorithm +
  <span class="hljs-string">'-'</span> +
  crypto.createHash(algoritmo).update(datos).digest(<span class="hljs-string">'base64'</span>)
)
</code></pre>
<p>Tambi√©n puedes usar <a href="https://npm.im/ssri"><code>ssri</code></a> para deferir el trabajo a otra
librer√≠a que garantiza que todo est√© correcto, pues maneja probablemente todas
las operaciones que tendr√≠as que hacer con SRIs, incluyendo convirtiendo entre
hexadecimal y el formato SRI.</p>
<div class="pilwrap" id="greater-cacache.verifica-cache-ops-greater-promise">
  <h4>
    <a href="#greater-cacache.verifica-cache-ops-greater-promise" name="greater-cacache.verifica-cache-ops-greater-promise" class="pilcrow"></a>
<a name="verify"></a> <code>&gt; cacache.verifica(cache, ops) -&gt; Promise</code>
  </h4>
</div>
<p>Examina y arregla tu cach√©:</p>
<ul>
<li>Limpia entradas inv√°lidas, hu√©rfanas y corrompidas</li>
<li>Te deja filtrar cuales entradas retener, con tu propio filtro</li>
<li>Reclama cualquier ficheros de contenido sin referencias en el √≠ndice</li>
<li>Verifica integridad de todos los ficheros de contenido y remueve los malos</li>
<li>Arregla permisos del cach√©</li>
<li>Remieve el directorio <code>tmp</code> en el cach√©, y todo su contenido.</li>
</ul>
<p>Cuando termine, devuelve un objeto con varias estad√≠sticas sobre el proceso de
verificaci√≥n, por ejemplo la cantidad de espacio de disco reclamado, el n√∫mero
de entradas v√°lidas, n√∫mero de entradas removidas, etc.</p>
<div class="pilwrap" id="opciones">
  <h5>
    <a href="#opciones" name="opciones" class="pilcrow"></a>
Opciones
  </h5>
</div>
<ul>
<li><code>ops.uid</code> - uid para asignarle al cach√© y su contenido</li>
<li><code>ops.gid</code> - gid para asignarle al cach√© y su contenido</li>
<li><code>ops.filter</code> - recibe una entrada como argumento. Devuelve falso para removerla. Nota: es posible que esta funci√≥n sea invocada con la misma entrada m√°s de una vez.</li>
</ul>
<div class="pilwrap" id="example">
  <h5>
    <a href="#example" name="example" class="pilcrow"></a>
Example
  </h5>
</div>
<pre><code class="sh"><span class="hljs-built_in">echo</span> somegarbage &gt;&gt; <span class="hljs-variable">$RUTACACHE</span>/content/deadbeef
</code></pre>
<pre><code class="javascript">cacache.verifica(rutaCache).then(<span class="hljs-function"><span class="hljs-params">stats</span> =&gt;</span> {
  <span class="hljs-comment">// deadbeef collected, because of invalid checksum.</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'cache is much nicer now! stats:'</span>, stats)
})
</code></pre>
<div class="pilwrap" id="greater-cacache.verifica.ultimavez-cache-greater-promise">
  <h4>
    <a href="#greater-cacache.verifica.ultimavez-cache-greater-promise" name="greater-cacache.verifica.ultimavez-cache-greater-promise" class="pilcrow"></a>
<a name="verify-last-run"></a> <code>&gt; cacache.verifica.ultimaVez(cache) -&gt; Promise</code>
  </h4>
</div>
<p>Alias: <code>√∫ltimaVez</code></p>
<p>Devuelve un <code>Date</code> que representa la √∫ltima vez que <code>cacache.verifica</code> fue
ejecutada en <code>cache</code>.</p>
<div class="pilwrap" id="example-1">
  <h5>
    <a href="#example-1" name="example-1" class="pilcrow"></a>
Example
  </h5>
</div>
<pre><code class="javascript">cacache.verifica(rutaCache).then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  cacache.verifica.ultimaVez(rutaCache).then(√∫ltima =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'La √∫ltima vez que se us√≥ cacache.verifica() fue '</span> + √∫ltima)
  })
})
</code></pre>
</div>
  </div>
</body>
</html>
